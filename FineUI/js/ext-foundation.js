(function(){var d=Ext.EventManager;var c=Ext.lib.Dom;Ext.dd.DragDrop=function(a,f,b){if(a){this.init(a,f,b)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(b,a){},startDrag:function(b,a){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(b,a){},b4DragOver:function(a){},onDragOver:function(b,a){},b4DragOut:function(a){},onDragOut:function(b,a){},b4DragDrop:function(a){},onDragDrop:function(b,a){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(r,t,a){if(Ext.isNumber(t)){t={left:t,right:t,top:t,bottom:t}}t=t||this.defaultPadding;var p=Ext.get(this.getEl()).getBox(),w=Ext.get(r),b=w.getScroll(),q,v=w.dom;if(v==document.body){q={x:b.left,y:b.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var o=w.getXY();q={x:o[0],y:o[1],width:v.clientWidth,height:v.clientHeight}}var s=p.y-q.y,u=p.x-q.x;this.resetConstraints();this.setXConstraint(u-(t.left||0),q.width-u-p.width-(t.right||0),this.xTickSize);this.setYConstraint(s-(t.top||0),q.height-s-p.height-(t.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(a,f,b){this.initTarget(a,f,b);d.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(a,f,b){this.config=b||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof a!=="string"){a=Ext.id(a)}this.id=a;this.addToGroup((f)?f:"default");this.handleElId=a;this.setDragElId(a);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(b,h,a,g){if(!h&&0!==h){this.padding=[b,b,b,b]}else{if(!a&&0!==a){this.padding=[b,h,b,h]}else{this.padding=[b,h,a,g]}}},setInitPosition:function(i,j){var b=this.getEl();if(!this.DDM.verifyEl(b)){return}var k=i||0;var l=j||0;var a=c.getXY(b);this.initPageX=a[0]-k;this.initPageY=a[1]-l;this.lastPageX=a[0];this.lastPageY=a[1];this.setStartPosition(a)},setStartPosition:function(a){var b=a||c.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=b[0];this.startPageY=b[1]},addToGroup:function(a){this.groups[a]=true;this.DDM.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDM.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDM.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}d.on(a,"mousedown",this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){d.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(a,b){if(this.primaryButtonOnly&&a.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var e=new Ext.lib.Point(Ext.lib.Event.getPageX(a),Ext.lib.Event.getPageY(a));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(e,this)){}else{if(this.clickValidator(a)){this.setStartPosition();this.b4MouseDown(a);this.onMouseDown(a);this.DDM.handleMouseDown(a,this);this.DDM.stopEvent(a)}else{}}},clickValidator:function(a){var b=a.getTarget();return(this.isValidHandleChild(b)&&(this.id==this.handleElId||this.DDM.handleWasClicked(b,this.id)))},addInvalidHandleType:function(b){var a=b.toUpperCase();this.invalidHandleTypes[a]=a},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(b){var a=b.toUpperCase();delete this.invalidHandleTypes[a]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){for(var a=0,f=this.invalidHandleClasses.length;a<f;++a){if(this.invalidHandleClasses[a]==b){delete this.invalidHandleClasses[a]}}},isValidHandleChild:function(e){var i=true;var a;try{a=e.nodeName.toUpperCase()}catch(b){a=e.nodeName}i=i&&!this.invalidHandleTypes[a];i=i&&!this.invalidHandleIds[e.id];for(var k=0,l=this.invalidHandleClasses.length;i&&k<l;++k){i=!Ext.fly(e).hasClass(this.invalidHandleClasses[k])}return i},setXTicks:function(a,h){this.xTicks=[];this.xTickSize=h;var b={};for(var g=this.initPageX;g>=this.minX;g=g-h){if(!b[g]){this.xTicks[this.xTicks.length]=g;b[g]=true}}for(g=this.initPageX;g<=this.maxX;g=g+h){if(!b[g]){this.xTicks[this.xTicks.length]=g;b[g]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(a,h){this.yTicks=[];this.yTickSize=h;var b={};for(var g=this.initPageY;g>=this.minY;g=g-h){if(!b[g]){this.yTicks[this.yTicks.length]=g;b[g]=true}}for(g=this.initPageY;g<=this.maxY;g=g+h){if(!b[g]){this.yTicks[this.yTicks.length]=g;b[g]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(a,b,f){this.leftConstraint=a;this.rightConstraint=b;this.minX=this.initPageX-a;this.maxX=this.initPageX+b;if(f){this.setXTicks(this.initPageX,f)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(f,a,b){this.topConstraint=f;this.bottomConstraint=a;this.minY=this.initPageY-f;this.maxY=this.initPageY+a;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var a=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var b=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(a,k){if(!k){return a}else{if(k[0]>=a){return k[0]}else{for(var m=0,n=k.length;m<n;++m){var l=m+1;if(k[l]&&k[l]>=a){var b=a-k[m];var i=k[l]-a;return(i>b)?k[m]:k[l]}}return k[k.length-1]}}},toString:function(){return("DragDrop "+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var b=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(i,j){for(var h in this.ids){for(var a in this.ids[h]){var g=this.ids[h][a];if(!this.isTypeOfDD(g)){continue}g[i].apply(g,j)}}},_onLoad:function(){this.init();b.on(document,"mouseup",this.handleMouseUp,this,true);b.on(document,"mousemove",this.handleMouseMove,this,true);b.on(window,"unload",this._onUnload,this,true);b.on(window,"resize",this._onResize,this,true)},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(d,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][d.id]=d},removeDDFromGroup:function(e,a){if(!this.ids[a]){this.ids[a]={}}var f=this.ids[a];if(f&&f[e.id]){delete f[e.id]}},_remove:function(d){for(var a in d.groups){if(a&&this.ids[a]&&this.ids[a][d.id]){delete this.ids[a][d.id]}}delete this.handleIds[d.id]},regHandle:function(d,a){if(!this.handleIds[d]){this.handleIds[d]={}}this.handleIds[d][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(h,l){var i=[];for(var j in h.groups){for(var k in this.ids[j]){var a=this.ids[j][k];if(!this.isTypeOfDD(a)){continue}if(!l||a.isTarget){i[i.length]=a}}}return i},isLegalTarget:function(g,h){var j=this.getRelated(g,true);for(var i=0,a=j.length;i<a;++i){if(j[i].id==h.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(d,a){return(this.handleIds[d]&&this.handleIds[d][a])},getDDById:function(d){for(var a in this.ids){if(this.ids[a][d]){return this.ids[a][d]}}return null},handleMouseDown:function(e,f){if(Ext.QuickTips){Ext.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(e)}this.currentTarget=e.getTarget();this.dragCurrent=f;var a=f.getEl();this.startX=e.getPageX();this.startY=e.getPageY();this.deltaX=this.startX-a.offsetLeft;this.deltaY=this.startY-a.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var c=Ext.dd.DDM;c.startDrag(c.startX,c.startY)},this.clickTimeThresh)},startDrag:function(a,d){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(a,d);this.dragCurrent.startDrag(a,d)}this.dragThreshMet=true},handleMouseUp:function(a){if(Ext.QuickTips){Ext.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(a,true)}else{}this.stopDrag(a);this.stopEvent(a)},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(a){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(a);this.dragCurrent.endDrag(a)}this.dragCurrent.onMouseUp(a)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(e){if(!this.dragCurrent){return true}if(Ext.isIE&&(e.button!==0&&e.button!==1&&e.button!==2)){this.stopEvent(e);return this.handleMouseUp(e)}if(!this.dragThreshMet){var f=Math.abs(this.startX-e.getPageX());var a=Math.abs(this.startY-e.getPageY());if(f>this.clickPixelThresh||a>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(e);this.dragCurrent.onDrag(e);if(!this.dragCurrent.moveOnly){this.fireEvents(e,false)}}this.stopEvent(e);return true},fireEvents:function(s,r){var e=this.dragCurrent;if(!e||e.isLocked()){return}var a=s.getPoint();var B=[];var y=[];var u=[];var w=[];var z=[];for(var x in this.dragOvers){var A=this.dragOvers[x];if(!this.isTypeOfDD(A)){continue}if(!this.isOverTarget(a,A,this.mode)){y.push(A)}B[x]=true;delete this.dragOvers[x]}for(var i in e.groups){if("string"!=typeof i){continue}for(x in this.ids[i]){var v=this.ids[i][x];if(!this.isTypeOfDD(v)){continue}if(v.isTarget&&!v.isLocked()&&((v!=e)||(e.ignoreSelf===false))){if(this.isOverTarget(a,v,this.mode)){if(r){w.push(v)}else{if(!B[v.id]){z.push(v)}else{u.push(v)}this.dragOvers[v.id]=v}}}}}if(this.mode){if(y.length){e.b4DragOut(s,y);e.onDragOut(s,y)}if(z.length){e.onDragEnter(s,z)}if(u.length){e.b4DragOver(s,u);e.onDragOver(s,u)}if(w.length){e.b4DragDrop(s,w);e.onDragDrop(s,w)}}else{var t=0;for(x=0,t=y.length;x<t;++x){e.b4DragOut(s,y[x].id);e.onDragOut(s,y[x].id)}for(x=0,t=z.length;x<t;++x){e.onDragEnter(s,z[x].id)}for(x=0,t=u.length;x<t;++x){e.b4DragOver(s,u[x].id);e.onDragOver(s,u[x].id)}for(x=0,t=w.length;x<t;++x){e.b4DragDrop(s,w[x].id);e.onDragDrop(s,w[x].id)}}if(r&&!w.length){e.onInvalidDrop(s)}},getBestMatch:function(i){var g=null;var j=i.length;if(j==1){g=i[0]}else{for(var h=0;h<j;++h){var a=i[h];if(a.cursorIsOver){g=a;break}else{if(!g||g.overlap.getArea()<a.overlap.getArea()){g=a}}}}return g},refreshCache:function(j){for(var a in j){if("string"!=typeof a){continue}for(var i in this.ids[a]){var h=this.ids[a][i];if(this.isTypeOfDD(h)){var g=this.getLocation(h);if(g){this.locationCache[h.id]=g}else{delete this.locationCache[h.id]}}}}},verifyEl:function(f){if(f){var a;if(Ext.isIE){try{a=f.offsetParent}catch(e){}}else{a=f.offsetParent}if(a){return true}}return false},getLocation:function(v){if(!this.isTypeOfDD(v)){return null}var x=v.getEl(),r,y,z,e,l,a,A,s,w,t;try{r=Ext.lib.Dom.getXY(x)}catch(u){}if(!r){return null}y=r[0];z=y+x.offsetWidth;e=r[1];l=e+x.offsetHeight;a=e-v.padding[0];A=z+v.padding[1];s=l+v.padding[2];w=y-v.padding[3];t=new Ext.lib.Region(a,A,s,w);x=Ext.get(x.parentNode);while(x&&t){if(x.isScrollable()){t=t.intersect(x.getRegion())}x=x.parent()}return t},isOverTarget:function(a,r,p){var n=this.locationCache[r.id];if(!n||!this.useCache){n=this.getLocation(r);this.locationCache[r.id]=n}if(!n){return false}r.cursorIsOver=n.contains(a);var k=this.dragCurrent;if(!k||!k.getTargetCoord||(!p&&!k.constrainX&&!k.constrainY)){return r.cursorIsOver}r.overlap=null;var m=k.getTargetCoord(a.x,a.y);var q=k.getDragEl();var o=new Ext.lib.Region(m.y,m.x+q.offsetWidth,m.y+q.offsetHeight,m.x);var l=o.intersect(n);if(l){r.overlap=l;return(p)?true:r.cursorIsOver}else{return false}},_onUnload:function(d,a){b.removeListener(document,"mouseup",this.handleMouseUp,this);b.removeListener(document,"mousemove",this.handleMouseMove,this);b.removeListener(window,"resize",this._onResize,this);Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var a in this.elementCache){delete this.elementCache[a]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(d){var a=this.elementCache[d];if(!a||!a.el){a=this.elementCache[d]=new this.ElementWrapper(Ext.getDom(d))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(d){var a=Ext.getDom(d);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.lib.Dom.getX(a)},getPosY:function(a){return Ext.lib.Dom.getY(a)},swapNode:function(g,a){if(g.swapNode){g.swapNode(a)}else{var f=a.parentNode;var h=a.nextSibling;if(h==g){f.insertBefore(g,a)}else{if(a==g.nextSibling){f.insertBefore(a,g)}else{g.parentNode.replaceChild(a,g);f.insertBefore(g,h)}}}},getScroll:function(){var g,a,f=document.documentElement,h=document.body;if(f&&(f.scrollTop||f.scrollLeft)){g=f.scrollTop;a=f.scrollLeft}else{if(h){g=h.scrollTop;a=h.scrollLeft}else{}}return{top:g,left:a}},getStyle:function(d,a){return Ext.fly(d).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,e){var f=Ext.lib.Dom.getXY(e);Ext.lib.Dom.setXY(a,f)},numericSort:function(a,e){return(a-e)},_timeoutCount:0,_addListeners:function(){var a=Ext.dd.DDM;if(Ext.lib.Event&&document){a._onLoad()}else{if(a._timeoutCount>2000){}else{setTimeout(a._addListeners,10);if(document&&document.body){a._timeoutCount+=1}}}},handleWasClicked:function(a,e){if(this.isHandle(e,a.id)){return true}else{var f=a.parentNode;while(f){if(this.isHandle(e,f.id)){return true}else{f=f.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(f,e,d){if(f){this.init(f,e,d)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(h,e){var f=h-this.startPageX;var g=e-this.startPageY;this.setDelta(f,g)},setDelta:function(c,d){this.deltaX=c;this.deltaY=d},setDragElPos:function(f,d){var e=this.getDragEl();this.alignElWithMouse(e,f,d)},alignElWithMouse:function(p,l,m){var n=this.getTargetCoord(l,m);var i=p.dom?p:Ext.fly(p,"_dd");if(!this.deltaSetXY){var k=[n.x,n.y];i.setXY(k);var o=i.getLeft(true);var j=i.getTop(true);this.deltaSetXY=[o-n.x,j-n.y]}else{i.setLeftTop(n.x+this.deltaSetXY[0],n.y+this.deltaSetXY[1])}this.cachePosition(n.x,n.y);this.autoScroll(n.x,n.y,p.offsetHeight,p.offsetWidth);return n},cachePosition:function(d,e){if(d){this.lastPageX=d;this.lastPageY=e}else{var f=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=f[0];this.lastPageY=f[1]}},autoScroll:function(s,t,x,r){if(this.scroll){var q=Ext.lib.Dom.getViewHeight();var A=Ext.lib.Dom.getViewWidth();var h=this.DDM.getScrollTop();var y=this.DDM.getScrollLeft();var u=x+t;var p=r+s;var v=(q+h-t-this.deltaY);var w=(A+y-s-this.deltaX);var z=40;var B=(document.all)?80:30;if(u>q&&v<z){window.scrollTo(y,h+B)}if(t<h&&h>0&&t-h<z){window.scrollTo(y,h-B)}if(p>A&&w<z){window.scrollTo(y+B,h)}if(s<y&&y>0&&s-y<z){window.scrollTo(y-B,h)}}},getTargetCoord:function(h,e){var f=h-this.deltaX;var g=e-this.deltaY;if(this.constrainX){if(f<this.minX){f=this.minX}if(f>this.maxX){f=this.maxX}}if(this.constrainY){if(g<this.minY){g=this.minY}if(g>this.maxY){g=this.maxY}}f=this.getTick(f,this.xTicks);g=this.getTick(g,this.yTicks);return{x:f,y:g}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){this.autoOffset(b.getPageX(),b.getPageY())},b4Drag:function(b){this.setDragElPos(b.getPageX(),b.getPageY())},toString:function(){return("DD "+this.id)}});Ext.dd.DDProxy=function(f,e,d){if(f){this.init(f,e,d);this.initFrame()}};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var e=this;var f=document.body;if(!f||!f.firstChild){setTimeout(function(){e.createFrame()},50);return}var g=this.getDragEl();if(!g){g=document.createElement("div");g.id=this.dragElId;var h=g.style;h.position="absolute";h.visibility="hidden";h.cursor="move";h.border="2px solid #aaa";h.zIndex=999;f.insertBefore(g,f.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(h,i){var j=this.getEl();var g=this.getDragEl();var f=g.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(f.width,10)/2),Math.round(parseInt(f.height,10)/2))}this.setDragElPos(h,i);Ext.fly(g).show()},_resizeProxy:function(){if(this.resizeFrame){var b=this.getEl();Ext.fly(this.getDragEl()).setSize(b.offsetWidth,b.offsetHeight)}},b4MouseDown:function(d){var e=d.getPageX();var f=d.getPageY();this.autoOffset(e,f);this.setDragElPos(e,f)},b4StartDrag:function(d,c){this.showFrame(d,c)},b4EndDrag:function(b){Ext.fly(this.getDragEl()).hide()},endDrag:function(f){var d=this.getEl();var e=this.getDragEl();e.style.visibility="";this.beforeMove();d.style.visibility="hidden";Ext.dd.DDM.moveToEl(d,e);e.style.visibility="hidden";d.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.dd.DDTarget=function(f,e,d){if(f){this.initTarget(f,e,d)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:false,tolerance:5,autoStart:false,constructor:function(b){Ext.apply(this,b);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}Ext.dd.DragTracker.superclass.constructor.call(this,b)},initEl:function(b){this.el=Ext.get(b);b.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this);delete this.el},onMouseDown:function(c,d){if(this.fireEvent("mousedown",this,c)!==false&&this.onBeforeStart(c)!==false){this.startXY=this.lastXY=c.getXY();this.dragTarget=this.delegate?d:this.el.dom;if(this.preventDefault!==false){c.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this,[c])}}},onMouseMove:function(g,h){if(this.active&&Ext.isIE&&!g.browserEvent.button){g.preventDefault();this.onMouseUp(g);return}g.preventDefault();var e=g.getXY(),f=this.startXY;this.lastXY=e;if(!this.active){if(Math.abs(f[0]-e[0])>this.tolerance||Math.abs(f[1]-e[1])>this.tolerance){this.triggerStart(g)}else{return}}this.fireEvent("mousemove",this,g);this.onDrag(g);this.fireEvent("drag",this,g)},onMouseUp:function(f){var d=Ext.getDoc(),e=this.active;d.un("mousemove",this.onMouseMove,this);d.un("mouseup",this.onMouseUp,this);d.un("selectstart",this.stopSelect,this);f.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent("mouseup",this,f);if(e){this.onEnd(f);this.fireEvent("dragend",this,f)}},triggerStart:function(b){this.clearStart();this.active=true;this.onStart(b);this.fireEvent("dragstart",this,b)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(b){b.stopEvent();return false},onBeforeStart:function(b){},onStart:function(b){},onDrag:function(b){},onEnd:function(b){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(b){return b?this.constrainModes[b].call(this,this.lastXY):this.lastXY},getOffset:function(f){var d=this.getXY(f),e=this.startXY;return[e[0]-d[0],e[1]-d[1]]},constrainModes:{point:function(c){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var d=this.dragRegion;d.left=c[0];d.top=c[1];d.right=c[0];d.bottom=c[1];d.constrainTo(this.elRegion);return[d.left,d.top]}}});Ext.dd.ScrollManager=function(){var r=Ext.dd.DragDropMgr;var p={};var s=null;var m={};var n=function(a){s=null;t()};var l=function(){if(r.dragCurrent){r.refreshCache(r.dragCurrent.groups)}};var q=function(){if(r.dragCurrent){var b=Ext.dd.ScrollManager;var a=m.el.ddScrollConfig?m.el.ddScrollConfig.increment:b.increment;if(!b.animate){if(m.el.scroll(m.dir,a)){l()}}else{m.el.scroll(m.dir,a,true,b.animDuration,l)}}};var t=function(){if(m.id){clearInterval(m.id)}m.id=0;m.el=null;m.dir=""};var o=function(b,c){t();m.el=b;m.dir=c;var d=b.ddScrollConfig?b.ddScrollConfig.ddGroup:undefined,a=(b.ddScrollConfig&&b.ddScrollConfig.frequency)?b.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(d===undefined||r.dragCurrent.ddGroup==d){m.id=setInterval(q,a)}};var k=function(d,b){if(b||!r.dragCurrent){return}var a=Ext.dd.ScrollManager;if(!s||s!=r.dragCurrent){s=r.dragCurrent;a.refreshCache()}var i=Ext.lib.Event.getXY(d);var h=new Ext.lib.Point(i[0],i[1]);for(var f in p){var e=p[f],g=e._region;var c=e.ddScrollConfig?e.ddScrollConfig:a;if(g&&g.contains(h)&&e.isScrollable()){if(g.bottom-h.y<=c.vthresh){if(m.el!=e){o(e,"down")}return}else{if(g.right-h.x<=c.hthresh){if(m.el!=e){o(e,"left")}return}else{if(h.y-g.top<=c.vthresh){if(m.el!=e){o(e,"up")}return}else{if(h.x-g.left<=c.hthresh){if(m.el!=e){o(e,"right")}return}}}}}}t()};r.fireEvents=r.fireEvents.createSequence(k,r);r.stopDrag=r.stopDrag.createSequence(n,r);return{register:function(a){if(Ext.isArray(a)){for(var b=0,c=a.length;b<c;b++){this.register(a[b])}}else{a=Ext.get(a);p[a.id]=a}},unregister:function(a){if(Ext.isArray(a)){for(var b=0,c=a.length;b<c;b++){this.unregister(a[b])}}else{a=Ext.get(a);delete p[a.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){for(var a in p){if(typeof p[a]=="object"){p[a]._region=p[a].getRegion()}}}}}();Ext.dd.Registry=function(){var g={};var e={};var f=0;var h=function(b,c){if(typeof b=="string"){return b}var a=b.id;if(!a&&c!==false){a="extdd-"+(++f);b.id=a}return a};return{register:function(b,a){a=a||{};if(typeof b=="string"){b=document.getElementById(b)}a.ddel=b;g[h(b)]=a;if(a.isHandle!==false){e[a.ddel.id]=a}if(a.handles){var c=a.handles;for(var d=0,i=c.length;d<i;d++){e[h(c[d])]=a}}},unregister:function(c){var a=h(c,false);var b=g[a];if(b){delete g[a];if(b.handles){var d=b.handles;for(var i=0,l=d.length;i<l;i++){delete e[h(d[i],false)]}}}},getHandle:function(a){if(typeof a!="string"){a=a.id}return e[a]},getHandleFromEvent:function(a){var b=Ext.lib.Event.getTarget(a);return b?e[b.id]:null},getTarget:function(a){if(typeof a!="string"){a=a.id}return g[a]},getTargetFromEvent:function(a){var b=Ext.lib.Event.getTarget(a);return b?g[b.id]||e[b.id]:null}}}();Ext.dd.StatusProxy=function(b){Ext.apply(this,b);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!b||b.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(b){b=b||this.dropNotAllowed;if(this.dropStatus!=b){this.el.replaceClass(this.dropStatus,b);this.dropStatus=b}},reset:function(b){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(b){this.ghost.update("")}},update:function(d){if(typeof d=="string"){this.ghost.update(d)}else{this.ghost.update("");d.style.margin="0";this.ghost.dom.appendChild(d)}var c=this.ghost.dom.firstChild;if(c){Ext.fly(c).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(b){this.el.hide();if(b){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(d,f,e){this.callback=f;this.scope=e;if(d&&this.animRepair!==false){this.el.addClass("x-dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:"easeOut",xy:d,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(c,d){this.el=Ext.get(c);if(!this.dragData){this.dragData={}}Ext.apply(this,d);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(b){return this.dragData},onDragEnter:function(h,g){var e=Ext.dd.DragDropMgr.getDDById(g);this.cachedTarget=e;if(this.beforeDragEnter(e,h,g)!==false){if(e.isNotifyTarget){var f=e.notifyEnter(this,h,this.dragData);this.proxy.setStatus(f)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(e,h,g)}}},beforeDragEnter:function(d,e,f){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(h,g){var e=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(g);if(this.beforeDragOver(e,h,g)!==false){if(e.isNotifyTarget){var f=e.notifyOver(this,h,this.dragData);this.proxy.setStatus(f)}if(this.afterDragOver){this.afterDragOver(e,h,g)}}},beforeDragOver:function(d,e,f){return true},onDragOut:function(d,f){var e=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(f);if(this.beforeDragOut(e,d,f)!==false){if(e.isNotifyTarget){e.notifyOut(this,d,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(e,d,f)}}this.cachedTarget=null},beforeDragOut:function(d,e,f){return true},onDragDrop:function(d,f){var e=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(f);if(this.beforeDragDrop(e,d,f)!==false){if(e.isNotifyTarget){if(e.notifyDrop(this,d,this.dragData)){this.onValidDrop(e,d,f)}else{this.onInvalidDrop(e,d,f)}}else{this.onValidDrop(e,d,f)}if(this.afterDragDrop){this.afterDragDrop(e,d,f)}}delete this.cachedTarget},beforeDragDrop:function(d,e,f){return true},onValidDrop:function(d,e,f){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(d,e,f)}},getRepairXY:function(c,d){return this.el.getXY()},onInvalidDrop:function(d,e,f){this.beforeInvalidDrop(d,e,f);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,e,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(e,f)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(d,e,f){return true},handleMouseDown:function(c){if(this.dragging){return}var d=this.getDragData(c);if(d&&this.onBeforeDrag(d,c)!==false){this.dragData=d;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(d,c){return true},onStartDrag:Ext.emptyFn,startDrag:function(d,c){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(d,c);this.proxy.show()},onInitDrag:function(e,f){var d=this.el.dom.cloneNode(true);d.id=Ext.id();this.proxy.update(d);this.onStartDrag(e,f);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(b){},endDrag:function(b){this.onEndDrag(this.dragData,b)},onEndDrag:function(d,c){},autoOffset:function(d,c){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(c,d){this.el=Ext.get(c);Ext.apply(this,d);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(e,f,d){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(e,f,d){return this.dropAllowed},notifyOut:function(e,f,d){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(e,f,d){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(c,d){Ext.dd.DragZone.superclass.constructor.call(this,c,d);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(b){return Ext.dd.Registry.getHandleFromEvent(b)},onInitDrag:function(d,c){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(d,c);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(b){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DropZone=function(c,d){Ext.dd.DropZone.superclass.constructor.call(this,c,d)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(b){return Ext.dd.Registry.getTargetFromEvent(b)},onNodeEnter:function(g,f,h,e){},onNodeOver:function(g,f,h,e){return this.dropAllowed},onNodeOut:function(g,f,h,e){},onNodeDrop:function(g,f,h,e){return false},onContainerOver:function(e,f,d){return this.dropNotAllowed},onContainerDrop:function(e,f,d){return false},notifyEnter:function(e,f,d){return this.dropNotAllowed},notifyOver:function(f,h,e){var g=this.getTargetFromEvent(h);if(!g){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,f,h,e);this.lastOverNode=null}return this.onContainerOver(f,h,e)}if(this.lastOverNode!=g){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,f,h,e)}this.onNodeEnter(g,f,h,e);this.lastOverNode=g}return this.onNodeOver(g,f,h,e)},notifyOut:function(e,f,d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,f,d);this.lastOverNode=null}},notifyDrop:function(f,h,e){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,f,h,e);this.lastOverNode=null}var g=this.getTargetFromEvent(h);return g?this.onNodeDrop(g,f,h,e):this.onContainerDrop(f,h,e)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(h,e,g){var f=new Ext.dd.DD(Ext.id(this.dom),h,e);return Ext.apply(f,g)},initDDProxy:function(h,e,g){var f=new Ext.dd.DDProxy(Ext.id(this.dom),h,e);return Ext.apply(f,g)},initDDTarget:function(h,e,g){var f=new Ext.dd.DDTarget(Ext.id(this.dom),h,e);return Ext.apply(f,g)}});Ext.data.Api=(function(){var b={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(a){return(Ext.data.Api.actions[a])?true:false},getVerb:function(a){if(b[a]){return b[a]}for(var d in this.actions){if(this.actions[d]===a){b[a]=d;break}}return(b[a]!==undefined)?b[a]:null},isValid:function(a){var f=[];var g=this.actions;for(var h in a){if(!(h in g)){f.push(h)}}return(!f.length)?true:f},hasUniqueUrl:function(j,g){var a=(j.api[g])?j.api[g].url:null;var h=true;for(var i in j.api){if((h=(i===g)?true:(j.api[i].url!=a)?true:false)===false){break}}return h},prepare:function(a){if(!a.api){a.api={}}for(var e in this.actions){var f=this.actions[e];a.api[f]=a.api[f]||a.url||a.directFn;if(typeof(a.api[f])=="string"){a.api[f]={url:a.api[f],method:(a.restful===true)?Ext.data.Api.restActions[f]:undefined}}}},restify:function(a){a.restful=true;for(var d in this.restActions){a.api[this.actions[d]].method||(a.api[this.actions[d]].method=this.restActions[d])}a.onWrite=a.onWrite.createInterceptor(function(j,c,l,m){var n=c.reader;var k=new Ext.data.Response({action:j,raw:l});switch(l.status){case 200:return true;break;case 201:if(Ext.isEmpty(k.raw.responseText)){k.success=true}else{return true}break;case 204:k.success=true;k.data=null;break;default:return true;break}if(k.success===true){this.fireEvent("write",this,j,k.data,k,m,c.request.arg)}else{this.fireEvent("exception",this,"remote",j,c,k,m)}c.request.callback.call(c.request.scope,k.data,k,k.success);return false},a)}}})();Ext.data.Response=function(c,d){Ext.apply(this,c,{raw:d})};Ext.data.Response.prototype={message:null,success:false,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(c,d){this.arg=d;Ext.Error.call(this,c)},name:"Ext.data.Api"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.",invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}});Ext.data.SortTypes={none:function(b){return b},stripTagsRE:/<\/?[^>]+>/gi,asText:function(b){return String(b).replace(this.stripTagsRE,"")},asUCText:function(b){return String(b).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(b){return String(b).toUpperCase()},asDate:function(b){if(!b){return 0}if(Ext.isDate(b)){return b.getTime()}return Date.parse(String(b))},asFloat:function(d){var c=parseFloat(String(d).replace(/,/g,""));return isNaN(c)?0:c},asInt:function(d){var c=parseInt(String(d).replace(/,/g,""),10);return isNaN(c)?0:c}};Ext.data.Record=function(d,c){this.id=(c||c===0)?c:Ext.data.Record.id(this);this.data=d||{}};Ext.data.Record.create=function(h){var j=Ext.extend(Ext.data.Record,{});var i=j.prototype;i.fields=new Ext.util.MixedCollection(false,function(a){return a.name});for(var f=0,g=h.length;f<g;f++){i.fields.add(new Ext.data.Field(h[f]))}j.getField=function(a){return i.fields.get(a)};return j};Ext.data.Record.PREFIX="ext-record";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.id=function(b){b.phantom=true;return[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")};Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,phantom:false,join:function(b){this.store=b},set:function(e,f){var d=Ext.isPrimitive(f)?String:Ext.encode;if(d(this.data[e])==d(f)){return}this.dirty=true;if(!this.modified){this.modified={}}if(this.modified[e]===undefined){this.modified[e]=this.data[e]}this.data[e]=f;if(!this.editing){this.afterEdit()}},afterEdit:function(){if(this.store!=undefined&&typeof this.store.afterEdit=="function"){this.store.afterEdit(this)}},afterReject:function(){if(this.store){this.store.afterReject(this)}},afterCommit:function(){if(this.store){this.store.afterCommit(this)}},get:function(b){return this.data[b]},beginEdit:function(){this.editing=true;this.modified=this.modified||{}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty){this.afterEdit()}},reject:function(d){var e=this.modified;for(var f in e){if(typeof e[f]!="function"){this.data[f]=e[f]}}this.dirty=false;delete this.modified;this.editing=false;if(d!==true){this.afterReject()}},commit:function(b){this.dirty=false;delete this.modified;this.editing=false;if(b!==true){this.afterCommit()}},getChanges:function(){var e=this.modified,d={};for(var f in e){if(e.hasOwnProperty(f)){d[f]=this.data[f]}}return d},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(b){return new this.constructor(Ext.apply({},this.data),b||this.id)},isModified:function(b){return !!(this.modified&&this.modified.hasOwnProperty(b))},isValid:function(){return this.fields.find(function(b){return(b.allowBlank===false&&Ext.isEmpty(this.data[b.name]))?true:false},this)?false:true},markDirty:function(){this.dirty=true;if(!this.modified){this.modified={}}this.fields.each(function(b){this.modified[b.name]=this.data[b.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var d=0,c;(c=arguments[d]);d++){this.add(c)}},unregister:function(){for(var d=0,c;(c=arguments[d]);d++){this.remove(this.lookup(c))}},lookup:function(h){if(Ext.isArray(h)){var f=["field1"],i=!Ext.isArray(h[0]);if(!i){for(var j=2,g=h[0].length;j<=g;++j){f.push("field"+j)}}return new Ext.data.ArrayStore({fields:f,data:h,expandData:i,autoDestroy:true,autoCreated:true})}return Ext.isObject(h)?(h.events?h:Ext.create(h,"store")):this.get(h)},getKey:function(b){return b.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:false,autoDestroy:false,pruneModifiedRecords:false,lastOptions:null,autoSave:true,batch:true,restful:false,paramNames:undefined,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:false,hasMultiSort:false,batchKey:"_ext_batch_",constructor:function(b){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(a){return a.id};this.removed=[];if(b&&b.data){this.inlineData=b.data;delete b.data}Ext.apply(this,b);this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{};this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames);if((this.url||this.api)&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})}if(this.restful===true&&this.proxy){this.batch=false;Ext.data.Api.restify(this.proxy)}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)}if(this.writer){if(this.writer instanceof (Ext.data.DataWriter)===false){this.writer=this.buildWriter(this.writer)}this.writer.meta=this.reader.meta;this.pruneModifiedRecords=true}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save");if(this.proxy){this.relayEvents(this.proxy,["loadexception","exception"])}if(this.writer){this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear})}this.sortToggle={};if(this.sortField){this.setDefaultSort(this.sortField,this.sortDir)}else{if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}}Ext.data.Store.superclass.constructor.call(this);if(this.id){this.storeId=this.id;delete this.id}if(this.storeId){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])}}this.batchCounter=0;this.batches={}},buildWriter:function(d){var e=undefined,f=(d.format||"json").toLowerCase();switch(f){case"json":e=Ext.data.JsonWriter;break;case"xml":e=Ext.data.XmlWriter;break;default:e=Ext.data.JsonWriter}return new e(d)},destroy:function(){if(!this.isDestroyed){if(this.storeId){Ext.StoreMgr.unregister(this)}this.clearData();this.data=null;Ext.destroy(this.proxy);this.reader=this.writer=null;this.purgeListeners();this.isDestroyed=true}},add:function(j){var h,g,f,i;j=[].concat(j);if(j.length<1){return}for(h=0,g=j.length;h<g;h++){f=j[h];f.join(this);if(f.dirty||f.phantom){this.modified.push(f)}}i=this.data.length;this.data.addAll(j);if(this.snapshot){this.snapshot.addAll(j)}this.fireEvent("add",this,j,i)},addSorted:function(d){var c=this.findInsertIndex(d);this.insert(c,d)},doUpdate:function(d){var c=d.id;this.getById(c).join(null);this.data.replace(c,d);if(this.snapshot){this.snapshot.replace(c,d)}d.join(this);this.fireEvent("update",this,d,Ext.data.Record.COMMIT)},remove:function(d){if(Ext.isArray(d)){Ext.each(d,function(a){this.remove(a)},this);return}var c=this.data.indexOf(d);if(c>-1){d.join(null);this.data.removeAt(c)}if(this.pruneModifiedRecords){this.modified.remove(d)}if(this.snapshot){this.snapshot.remove(d)}if(c>-1){this.fireEvent("remove",this,d,c)}},removeAt:function(b){this.remove(this.getAt(b))},removeAll:function(c){var d=[];this.each(function(a){d.push(a)});this.clearData();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}if(c!==true){this.fireEvent("clear",this,d)}},onClear:function(c,d){Ext.each(d,function(a,b){this.destroyRecord(this,a,b)},this)},insert:function(i,j){var h,g,f;j=[].concat(j);for(h=0,g=j.length;h<g;h++){f=j[h];this.data.insert(i+h,f);f.join(this);if(f.dirty||f.phantom){this.modified.push(f)}}if(this.snapshot){this.snapshot.addAll(j)}this.fireEvent("add",this,j,i)},indexOf:function(b){return this.data.indexOf(b)},indexOfId:function(b){return this.data.indexOfKey(b)},getById:function(b){return(this.snapshot||this.data).key(b)},getAt:function(b){return this.data.itemAt(b)},getRange:function(c,d){return this.data.getRange(c,d)},storeOptions:function(b){b=Ext.apply({},b);delete b.callback;delete b.scope;this.lastOptions=b},clearData:function(){this.data.each(function(b){b.join(null)});this.data.clear()},load:function(d){d=Ext.apply({},d);this.storeOptions(d);if(this.sortInfo&&this.remoteSort){var e=this.paramNames;d.params=Ext.apply({},d.params);d.params[e.sort]=this.sortInfo.field;d.params[e.dir]=this.sortInfo.direction}try{return this.execute("read",null,d)}catch(f){this.handleException(f);return false}},updateRecord:function(d,e,f){if(f==Ext.data.Record.EDIT&&this.autoSave===true&&(!e.phantom||(e.phantom&&e.isValid()))){this.save()}},createRecords:function(n,h,l){var m=this.modified,j=h.length,i,k;for(k=0;k<j;k++){i=h[k];if(i.phantom&&i.isValid()){i.markDirty();if(m.indexOf(i)==-1){m.push(i)}}}if(this.autoSave===true){this.save()}},destroyRecord:function(d,e,f){if(this.modified.indexOf(e)!=-1){this.modified.remove(e)}if(!e.phantom){this.removed.push(e);e.lastIndex=f;if(this.autoSave===true){this.save()}}},execute:function(h,g,j,f){if(!Ext.data.Api.isAction(h)){throw new Ext.data.Api.Error("execute",h)}j=Ext.applyIf(j||{},{params:{}});if(f!==undefined){this.addToBatch(f)}var i=true;if(h==="read"){i=this.fireEvent("beforeload",this,j);Ext.applyIf(j.params,this.baseParams)}else{if(this.writer.listful===true&&this.restful!==true){g=(Ext.isArray(g))?g:[g]}else{if(Ext.isArray(g)&&g.length==1){g=g.shift()}}if((i=this.fireEvent("beforewrite",this,h,g,j))!==false){this.writer.apply(j.params,this.baseParams,h,g)}}if(i!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,h)){j.params.xaction=h}this.proxy.request(Ext.data.Api.actions[h],g,j.params,this.reader,this.createCallback(h,g,f),this,j)}return i},save:function(){if(!this.writer){throw new Ext.data.Store.Error("writer-undefined")}var l=[],k,i,n,p={},o;if(this.removed.length){l.push(["destroy",this.removed])}var q=[].concat(this.getModifiedRecords());if(q.length){var m=[];for(o=q.length-1;o>=0;o--){if(q[o].phantom===true){var r=q.splice(o,1).shift();if(r.isValid()){m.push(r)}}else{if(!q[o].isValid()){q.splice(o,1)}}}if(m.length){l.push(["create",m])}if(q.length){l.push(["update",q])}}k=l.length;if(k){n=++this.batchCounter;for(o=0;o<k;++o){i=l[o];p[i[0]]=i[1]}if(this.fireEvent("beforesave",this,p)!==false){for(o=0;o<k;++o){i=l[o];this.doTransaction(i[0],i[1],n)}return n}}return -1},doTransaction:function(j,g,l){function i(b){try{this.execute(j,b,undefined,l)}catch(a){this.handleException(a)}}if(this.batch===false){for(var k=0,h=g.length;k<h;k++){i.call(this,g[k])}}else{i.call(this,g)}},addToBatch:function(h){var b=this.batches,g=this.batchKey+h,f=b[g];if(!f){b[g]=f={id:h,count:0,data:{}}}++f.count},removeFromBatch:function(m,j,k){var n=this.batches,l=this.batchKey+m,i=n[l],b;if(i){b=i.data[j]||[];i.data[j]=b.concat(k);if(i.count===1){k=i.data;delete n[l];this.fireEvent("save",this,m,k)}else{--i.count}}},createCallback:function(h,f,e){var g=Ext.data.Api.actions;return(h=="read")?this.loadRecords:function(b,c,a){this["on"+Ext.util.Format.capitalize(h)+"Records"](a,f,[].concat(b));if(a===true){this.fireEvent("write",this,h,b,c,f)}this.removeFromBatch(e,h,b)}},clearModified:function(d){if(Ext.isArray(d)){for(var c=d.length-1;c>=0;c--){this.modified.splice(this.modified.indexOf(d[c]),1)}}else{this.modified.splice(this.modified.indexOf(d),1)}},reMap:function(e){if(Ext.isArray(e)){for(var g=0,f=e.length;g<f;g++){this.reMap(e[g])}}else{delete this.data.map[e._phid];this.data.map[e.id]=e;var h=this.data.keys.indexOf(e._phid);this.data.keys.splice(h,1,e.id);delete e._phid}},onCreateRecords:function(g,f,e){if(g===true){try{this.reader.realize(f,e)}catch(h){this.handleException(h);if(Ext.isArray(f)){this.onCreateRecords(g,f,e)}}}},onUpdateRecords:function(g,f,e){if(g===true){try{this.reader.update(f,e)}catch(h){this.handleException(h);if(Ext.isArray(f)){this.onUpdateRecords(g,f,e)}}}},onDestroyRecords:function(h,f,i){f=(f instanceof Ext.data.Record)?[f]:[].concat(f);for(var j=0,g=f.length;j<g;j++){this.removed.splice(this.removed.indexOf(f[j]),1)}if(h===false){for(j=f.length-1;j>=0;j--){this.insert(f[j].lastIndex,f[j])}}},handleException:function(b){Ext.handleError(b)},reload:function(b){this.load(Ext.applyIf(b||{},this.lastOptions))},loadRecords:function(s,i,n){var p,o;if(this.isDestroyed===true){return}if(!s||n===false){if(n!==false){this.fireEvent("load",this,[],i)}if(i.callback){i.callback.call(i.scope||this,[],i,false,s)}return}var t=s.records,m=s.totalRecords||t.length;if(!i||i.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(p=0,o=t.length;p<o;p++){t[p].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.clearData();this.data.addAll(t);this.totalLength=m;this.applySort();this.fireEvent("datachanged",this)}else{var l=[],q,r=0;for(p=0,o=t.length;p<o;++p){q=t[p];if(this.indexOfId(q.id)>-1){this.doUpdate(q)}else{l.push(q);++r}}this.totalLength=Math.max(m,this.data.length+r);this.add(l)}this.fireEvent("load",this,t,i);if(i.callback){i.callback.call(i.scope||this,t,i,true)}},loadData:function(f,e){var d=this.reader.readRecords(f);this.loadRecords(d,{add:e},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if((this.sortInfo||this.multiSortInfo)&&!this.remoteSort){this.sortData()}},sortData:function(){var j=this.hasMultiSort?this.multiSortInfo:this.sortInfo,k=j.direction||"ASC",l=j.sorters,p=[];if(!this.hasMultiSort){l=[{direction:k,field:j.field}]}for(var o=0,i=l.length;o<i;o++){p.push(this.createSortFunction(l[o].field,l[o].direction))}if(p.length==0){return}var m=k.toUpperCase()=="DESC"?-1:1;var n=function(a,b){var c=p[0].call(this,a,b);if(p.length>1){for(var d=1,e=p.length;d<e;d++){c=c||p[d].call(this,a,b)}}return m*c};this.data.sort(k,n);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(k,n)}},createSortFunction:function(h,e){e=e||"ASC";var f=e.toUpperCase()=="DESC"?-1:1;var g=this.fields.get(h).sortType;return function(c,d){var a=g(c.data[h]),b=g(d.data[h]);return f*(a>b?1:(a<b?-1:0))}},setDefaultSort:function(c,d){d=d?d.toUpperCase():"ASC";this.sortInfo={field:c,direction:d};this.sortToggle[c]=d},sort:function(c,d){if(Ext.isArray(arguments[0])){return this.multiSort.call(this,c,d)}else{return this.singleSort(c,d)}},singleSort:function(i,l){var j=this.fields.get(i);if(!j){return false}var g=j.name,h=this.sortInfo||null,k=this.sortToggle?this.sortToggle[g]:null;if(!l){if(h&&h.field==g){l=(this.sortToggle[g]||"ASC").toggle("ASC","DESC")}else{l=j.sortDir}}this.sortToggle[g]=l;this.sortInfo={field:g,direction:l};this.hasMultiSort=false;if(this.remoteSort){if(!this.load(this.lastOptions)){if(k){this.sortToggle[g]=k}if(h){this.sortInfo=h}}}else{this.applySort();this.fireEvent("datachanged",this)}return true},multiSort:function(c,d){this.hasMultiSort=true;d=d||"ASC";if(this.multiSortInfo&&d==this.multiSortInfo.direction){d=d.toggle("ASC","DESC")}this.multiSortInfo={sorters:c,direction:d};if(this.remoteSort){this.singleSort(c[0].field,c[0].direction)}else{this.applySort();this.fireEvent("datachanged",this)}},each:function(c,d){this.data.each(c,d)},getModifiedRecords:function(){return this.modified},sum:function(j,i,h){var l=this.data.items,g=0;i=i||0;h=(h||h===0)?h:l.length-1;for(var k=i;k<=h;k++){g+=(l[k].data[j]||0)}return g},createFilterFn:function(i,j,h,g,f){if(Ext.isEmpty(j,false)){return false}j=this.data.createValueMatcher(j,h,g,f);return function(a){return j.test(a.data[i])}},createMultipleFilterFn:function(b){return function(a){var i=true;for(var m=0,n=b.length;m<n;m++){var j=b[m],k=j.fn,l=j.scope;i=i&&k.call(l,a)}return i}},filter:function(j,o,r,q,t){var p;if(Ext.isObject(j)){j=[j]}if(Ext.isArray(j)){var w=[];for(var s=0,u=j.length;s<u;s++){var x=j[s],v=x.fn,i=x.scope||this;if(!Ext.isFunction(v)){v=this.createFilterFn(x.property,x.value,x.anyMatch,x.caseSensitive,x.exactMatch)}w.push({fn:v,scope:i})}p=this.createMultipleFilterFn(w)}else{p=this.createFilterFn(j,o,r,q,t)}return p?this.filterBy(p):this.clearFilter()},filterBy:function(c,d){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(c,d||this);this.fireEvent("datachanged",this)},clearFilter:function(b){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(b!==true){this.fireEvent("datachanged",this)}}},isFiltered:function(){return !!this.snapshot&&this.snapshot!=this.data},query:function(i,j,h,g){var f=this.createFilterFn(i,j,h,g);return f?this.queryBy(f):this.data.clone()},queryBy:function(d,e){var f=this.snapshot||this.data;return f.filterBy(d,e||this)},find:function(k,l,i,j,h){var g=this.createFilterFn(k,l,j,h);return g?this.data.findIndexBy(g,null,i):-1},findExact:function(d,e,f){return this.data.findIndexBy(function(a){return a.get(d)===e},this,f)},findBy:function(d,e,f){return this.data.findIndexBy(d,e,f)},collect:function(n,l,s){var o=(s===true&&this.snapshot)?this.snapshot.items:this.data.items;var i,d,t=[],r={};for(var q=0,p=o.length;q<p;q++){i=o[q].data[n];d=String(i);if((l||!Ext.isEmpty(i))&&!r[d]){r[d]=true;t[t.length]=i}}return t},afterEdit:function(b){if(this.modified.indexOf(b)==-1){this.modified.push(b)}this.fireEvent("update",this,b,Ext.data.Record.EDIT)},afterReject:function(b){this.modified.remove(b);this.fireEvent("update",this,b,Ext.data.Record.REJECT)},afterCommit:function(b){this.modified.remove(b);this.fireEvent("update",this,b,Ext.data.Record.COMMIT)},commitChanges:function(){var e=this.modified.slice(0),f=e.length,d;for(d=0;d<f;d++){e[d].commit()}this.modified=[];this.removed=[]},rejectChanges:function(){var g=this.modified.slice(0),h=this.removed.slice(0).reverse(),j=g.length,i=h.length,f;for(f=0;f<j;f++){g[f].reject()}for(f=0;f<i;f++){this.insert(h[f].lastIndex||0,h[f]);h[f].reject()}this.modified=[];this.removed=[]},onMetaChange:function(b){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;if(this.reader.meta.sortInfo){this.sortInfo=this.reader.meta.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}if(this.writer){this.writer.meta=this.reader.meta}this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(e){this.suspendEvents();var f=this.data.clone();this.data.add(e);this.applySort();var d=this.data.indexOf(e);this.data=f;this.resumeEvents();return d},setBaseParam:function(d,c){this.baseParams=this.baseParams||{};this.baseParams[d]=c}});Ext.reg("store",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}});Ext.data.Field=Ext.extend(Object,{constructor:function(e){if(Ext.isString(e)){e={name:e}}Ext.apply(this,e);var g=Ext.data.Types,f=this.sortType,h;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||g.AUTO}}else{this.type=g.AUTO}if(Ext.isString(f)){this.sortType=Ext.data.SortTypes[f]}else{if(Ext.isEmpty(f)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true});Ext.data.DataReader=function(d,c){this.meta=d;this.recordType=Ext.isArray(c)?Ext.data.Record.create(c):c;if(this.recordType){this.buildExtractors()}};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(e,f){if(Ext.isArray(e)){for(var d=e.length-1;d>=0;d--){if(Ext.isArray(f)){this.realize(e.splice(d,1).shift(),f.splice(d,1).shift())}else{this.realize(e.splice(d,1).shift(),f)}}}else{if(Ext.isArray(f)&&f.length==1){f=f.shift()}if(!this.isData(f)){throw new Ext.data.DataReader.Error("realize",e)}e.phantom=false;e._phid=e.id;e.id=this.getId(f);e.data=f;e.commit();e.store.reMap(e)}},update:function(e,f){if(Ext.isArray(e)){for(var d=e.length-1;d>=0;d--){if(Ext.isArray(f)){this.update(e.splice(d,1).shift(),f.splice(d,1).shift())}else{this.update(e.splice(d,1).shift(),f)}}}else{if(Ext.isArray(f)&&f.length==1){f=f.shift()}if(this.isData(f)){e.data=Ext.apply(e.data,f)}e.commit()}},extractData:function(p,x){var q=(this instanceof Ext.data.JsonReader)?"json":"node";var v=[];if(this.isData(p)&&!(this instanceof Ext.data.XmlReader)){p=[p]}var r=this.recordType.prototype.fields,f=r.items,i=r.length,v=[];if(x===true){var n=this.recordType;for(var t=0;t<p.length;t++){var w=p[t];var s=new n(this.extractValues(w,f,i),this.getId(w));s[q]=w;v.push(s)}}else{for(var t=0;t<p.length;t++){var u=this.extractValues(p[t],f,i);u[this.meta.idProperty]=this.getId(p[t]);v.push(u)}}return v},isData:function(b){return(b&&Ext.isObject(b)&&!Ext.isEmpty(this.getId(b)))?true:false},onMetaChange:function(b){delete this.ef;this.meta=b;this.recordType=Ext.data.Record.create(b.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(c,d){this.arg=d;Ext.Error.call(this,c)},name:"Ext.data.DataReader"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}});Ext.data.DataWriter=function(b){Ext.apply(this,b)};Ext.data.DataWriter.prototype={writeAllFields:false,listful:false,apply:function(j,i,k,h){var l=[],g=k+"Record";if(Ext.isArray(h)){Ext.each(h,function(a){l.push(this[g](a))},this)}else{if(h instanceof Ext.data.Record){l=this[g](h)}}this.render(j,i,l)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(i,l){var j=i.fields.map,k={},g=(this.writeAllFields===false&&i.phantom===false)?i.getChanges():i.data,h;Ext.iterate(g,function(a,b){if((h=j[a])){k[h.mapping?h.mapping:h.name]=b}});if(i.phantom){if(i.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(i.data[this.meta.idProperty])){delete k[this.meta.idProperty]}}else{k[this.meta.idProperty]=i.id}return k},toArray:function(c){var d=[];Ext.iterate(c,function(a,b){d.push({name:a,value:b})},this);return d}};Ext.data.DataProxy=function(d){d=d||{};this.api=d.api;this.url=d.url;this.restful=d.restful;this.listeners=d.listeners;this.prettyUrls=d.prettyUrls;this.addEvents("exception","beforeload","load","loadexception","beforewrite","write");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(c){if(c instanceof Ext.data.Api.Error){c.toConsole()}}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:false,setApi:function(){if(arguments.length==1){var b=Ext.data.Api.isValid(arguments[0]);if(b===true){this.api=arguments[0]}else{throw new Ext.data.Api.Error("invalid",b)}}else{if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0])){throw new Ext.data.Api.Error("invalid",arguments[0])}this.api[arguments[0]]=arguments[1]}}Ext.data.Api.prepare(this)},isApiAction:function(b){return(this.api[b])?true:false},request:function(l,h,k,i,j,m,n){if(!this.api[l]&&!this.load){throw new Ext.data.DataProxy.Error("action-undefined",l)}k=k||{};if((l===Ext.data.Api.actions.read)?this.fireEvent("beforeload",this,k):this.fireEvent("beforewrite",this,l,h,k)!==false){this.doRequest.apply(this,arguments)}else{j.call(m||this,null,n,false)}},load:null,doRequest:function(l,h,k,i,j,m,n){this.load(k,i,j,m,n)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(i,f){f=f||null;var j=(this.conn&&this.conn.url)?this.conn.url:(this.api[i])?this.api[i].url:this.url;if(!j){throw new Ext.data.Api.Error("invalid-url",i)}var h=null;var g=j.match(/(.*)(\.json|\.xml|\.html)$/);if(g){h=g[2];j=g[1]}if((this.restful===true||this.prettyUrls===true)&&f instanceof Ext.data.Record&&!f.phantom){j+="/"+f.id}return(h===null)?j:j+h},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(c,d){this.arg=d;Ext.Error.call(this,c)},name:"Ext.data.DataProxy"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}});Ext.data.Request=function(b){Ext.apply(this,b)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(b){Ext.apply(this,b)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(b){Ext.apply(this,b);Ext.data.ScriptTagProxy.superclass.constructor.call(this,b);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:"callback",nocache:true,doRequest:function(t,s,u,r,p,o,n){var v=Ext.urlEncode(Ext.apply(u,this.extraParams));var w=this.buildUrl(t,s);if(!w){throw new Ext.data.Api.Error("invalid-url",w)}w=Ext.urlAppend(w,v);if(this.nocache){w=Ext.urlAppend(w,"_dc="+(new Date().getTime()))}var x=++Ext.data.ScriptTagProxy.TRANS_ID;var m={id:x,action:t,cb:"stcCallback"+x,scriptId:"stcScript"+x,params:u,arg:n,url:w,callback:p,scope:o,reader:r};window[m.cb]=this.createCallback(t,s,m);w+=String.format("&{0}={1}",this.callbackParam,m.cb);if(this.autoAbort!==false){this.abort()}m.timeoutId=this.handleFailure.defer(this.timeout,this,[m]);var q=document.createElement("script");q.setAttribute("src",w);q.setAttribute("type","text/javascript");q.setAttribute("id",m.scriptId);this.head.appendChild(q);this.trans=m},createCallback:function(g,e,h){var f=this;return function(a){f.trans=false;f.destroyTrans(h,true);if(g===Ext.data.Api.actions.read){f.onRead.call(f,g,h,a)}else{f.onWrite.call(f,g,h,a,e)}}},onRead:function(i,j,e){var g;try{g=j.reader.readRecords(e)}catch(h){this.fireEvent("loadexception",this,j,e,h);this.fireEvent("exception",this,"response",i,j,e,h);j.callback.call(j.scope||window,null,j.arg,false);return}if(g.success===false){this.fireEvent("loadexception",this,j,e);this.fireEvent("exception",this,"remote",i,j,e,null)}else{this.fireEvent("load",this,e,j.arg)}j.callback.call(j.scope||window,g,j.arg,g.success)},onWrite:function(k,l,n,e){var i=l.reader;try{var m=i.readResponse(k,n)}catch(j){this.fireEvent("exception",this,"response",k,l,m,j);l.callback.call(l.scope||window,null,m,false);return}if(!m.success===true){this.fireEvent("exception",this,"remote",k,l,m,e);l.callback.call(l.scope||window,null,m,false);return}this.fireEvent("write",this,k,m.data,m,e,l.arg);l.callback.call(l.scope||window,m.data,m,true)},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(d,e){this.head.removeChild(document.getElementById(d.scriptId));clearTimeout(d.timeoutId);if(e){window[d.cb]=undefined;try{delete window[d.cb]}catch(f){}}else{window[d.cb]=function(){window[d.cb]=undefined;try{delete window[d.cb]}catch(a){}}}},handleFailure:function(b){this.trans=false;this.destroyTrans(b,false);if(b.action===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,null,b.arg)}this.fireEvent("exception",this,"response",b.action,{response:null,options:b.arg});b.callback.call(b.scope||window,null,b.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(e){Ext.data.HttpProxy.superclass.constructor.call(this,e);this.conn=e;this.conn.url=null;this.useAjax=!e||!e.events;var f=Ext.data.Api.actions;this.activeRequest={};for(var d in f){this.activeRequest[f[d]]=undefined}};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(d,c){this.conn.url=d;if(c===true){this.url=d;this.api=null;Ext.data.Api.prepare(this)}},doRequest:function(m,o,k,p,i,n,j){var l={method:(this.api[m])?this.api[m]["method"]:undefined,request:{callback:i,scope:n,arg:j},reader:p,callback:this.createCallback(m,o),scope:this};if(k.jsonData){l.jsonData=k.jsonData}else{if(k.xmlData){l.xmlData=k.xmlData}else{l.params=k||{}}}this.conn.url=this.buildUrl(m,o);if(this.useAjax){Ext.applyIf(l,this.conn);if(this.activeRequest[m]){}this.activeRequest[m]=Ext.Ajax.request(l)}else{this.conn.request(l)}this.conn.url=null},createCallback:function(c,d){return function(a,b,f){this.activeRequest[c]=undefined;if(!b){if(c===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,a,f)}this.fireEvent("exception",this,"response",c,a,f);a.request.callback.call(a.request.scope,null,a.request.arg,false);return}if(c===Ext.data.Api.actions.read){this.onRead(c,a,f)}else{this.onWrite(c,a,f,d)}}},onRead:function(k,i,e){var h;try{h=i.reader.read(e)}catch(j){this.fireEvent("loadexception",this,i,e,j);this.fireEvent("exception",this,"response",k,i,e,j);i.request.callback.call(i.request.scope,null,i.request.arg,false);return}if(h.success===false){this.fireEvent("loadexception",this,i,e);var l=i.reader.readResponse(k,e);this.fireEvent("exception",this,"remote",k,i,l,null)}else{this.fireEvent("load",this,i,i.request.arg)}i.request.callback.call(i.request.scope,h,i.request.arg,h.success)},onWrite:function(l,j,n,e){var i=j.reader;var m;try{m=i.readResponse(l,n)}catch(k){this.fireEvent("exception",this,"response",l,j,n,k);j.request.callback.call(j.request.scope,null,j.request.arg,false);return}if(m.success===true){this.fireEvent("write",this,l,m.data,m,e,j.request.arg)}else{this.fireEvent("exception",this,"remote",l,j,m,e)}j.request.callback.call(j.request.scope,m.data,m,m.success)},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){var c=Ext.data.Api.actions;for(var d in c){if(this.activeRequest[c[d]]){Ext.Ajax.abort(this.activeRequest[c[d]])}}}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(c){var d={};d[Ext.data.Api.actions.read]=true;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:d});this.data=c};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(q,p,r,o,m,l,k){r=r||{};var e;try{e=o.readRecords(this.data)}catch(n){this.fireEvent("loadexception",this,null,k,n);this.fireEvent("exception",this,"response",q,k,null,n);m.call(l,null,k,false);return}m.call(l,e,k,true)}});Ext.data.Types=new function(){var b=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(a){return a},sortType:b.none,type:"auto"},STRING:{convert:function(a){return(a===undefined||a===null)?"":String(a)},sortType:b.asUCString,type:"string"},INT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseInt(String(a).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:b.none,type:"int"},FLOAT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseFloat(String(a).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:b.none,type:"float"},BOOL:{convert:function(a){return a===true||a==="true"||a==1},sortType:b.none,type:"bool"},DATE:{convert:function(f){var e=this.dateFormat;if(!f){return null}if(Ext.isDate(f)){return f}if(e){if(e=="timestamp"){return new Date(f*1000)}if(e=="time"){return new Date(parseInt(f,10))}return Date.parseDate(f,e)}var a=Date.parse(f);return a?new Date(a):null},sortType:b.asDate,type:"date"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:true,encodeDelete:false,constructor:function(b){Ext.data.JsonWriter.superclass.constructor.call(this,b)},render:function(h,g,e){if(this.encode===true){Ext.apply(h,g);h[this.meta.root]=Ext.encode(e)}else{var f=Ext.apply({},g);f[this.meta.root]=e;h.jsonData=f}},createRecord:function(b){return this.toHash(b)},updateRecord:function(b){return this.toHash(b)},destroyRecord:function(c){if(this.encodeDelete){var d={};d[this.meta.idProperty]=c.id;return d}else{return c.id}}});Ext.data.JsonReader=function(d,c){d=d||{};Ext.applyIf(d,{idProperty:"id",successProperty:"success",totalProperty:"total"});Ext.data.JsonReader.superclass.constructor.call(this,d,c||d.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(e){var d=e.responseText;var f=Ext.decode(d);if(!f){throw {message:"JsonReader.read: Json object not found"}}return this.readRecords(f)},readResponse:function(l,h){var j=(h.responseText!==undefined)?Ext.decode(h.responseText):h;if(!j){throw new Ext.data.JsonReader.Error("response")}var i=this.getRoot(j),k=this.getSuccess(j);if(k&&l===Ext.data.Api.actions.create){var m=Ext.isDefined(i);if(m&&Ext.isEmpty(i)){throw new Ext.data.JsonReader.Error("root-empty",this.meta.root)}else{if(!m){throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}}}var n=new Ext.data.Response({action:l,success:k,data:(i)?this.extractData(i,false):[],message:this.getMessage(j),raw:j});if(Ext.isEmpty(n.success)){throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty)}return n},readRecords:function(v){this.jsonData=v;if(v.metaData){this.onMetaChange(v.metaData)}var c=this.meta,q=this.recordType,u=q.prototype.fields,f=u.items,p=u.length,o;var r=this.getRoot(v),s=r.length,t=s,n=true;if(c.totalProperty){o=parseInt(this.getTotal(v),10);if(!isNaN(o)){t=o}}if(c.successProperty){o=this.getSuccess(v);if(o===false||o==="false"){n=false}}return{success:n,records:this.extractData(r,true),totalRecords:t}},buildExtractors:function(){if(this.ef){return}var f=this.meta,m=this.recordType,n=m.prototype.fields,g=n.items,i=n.length;if(f.totalProperty){this.getTotal=this.createAccessor(f.totalProperty)}if(f.successProperty){this.getSuccess=this.createAccessor(f.successProperty)}if(f.messageProperty){this.getMessage=this.createAccessor(f.messageProperty)}this.getRoot=f.root?this.createAccessor(f.root):function(a){return a};if(f.id||f.idProperty){var o=this.createAccessor(f.id||f.idProperty);this.getId=function(a){var b=o(a);return(b===undefined||b==="")?null:b}}else{this.getId=function(){return null}}var p=[];for(var q=0;q<i;q++){n=g[q];var r=(n.mapping!==undefined&&n.mapping!==null)?n.mapping:n.name;p.push(this.createAccessor(r))}this.ef=p},simpleAccess:function(c,d){return c[d]},createAccessor:function(){var b=/[\[\.]/;return function(d){if(Ext.isEmpty(d)){return Ext.emptyFn}if(Ext.isFunction(d)){return d}var a=String(d).search(b);if(a>=0){return new Function("obj","return obj"+(a>0?".":"")+d)}return function(c){return c[d]}}}(),extractValues:function(j,m,i){var k,n={};for(var l=0;l<i;l++){k=m[l];var f=this.ef[l](j);n[k.name]=k.convert((f!==undefined)?f:k.defaultValue,j)}return n}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(c,d){this.arg=d;Ext.Error.call(this,c)},name:"Ext.data.JsonReader"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(s){this.arrayData=s;var G=this.meta,K=G?Ext.num(G.idIndex,G.id):null,M=this.recordType,C=M.prototype.fields,f=[],J=true,I;var n=this.getRoot(s);for(var i=0,D=n.length;i<D;i++){var o=n[i],N={},E=((K||K===0)&&o[K]!==undefined&&o[K]!==""?o[K]:null);for(var j=0,F=C.length;j<F;j++){var v=C.items[j],k=v.mapping!==undefined&&v.mapping!==null?v.mapping:j;I=o[k]!==undefined?o[k]:v.defaultValue;I=v.convert(I,o);N[v.name]=I}var L=new M(N,E);L.json=o;f[f.length]=L}var H=f.length;if(G.totalProperty){I=parseInt(this.getTotal(s),10);if(!isNaN(I)){H=I}}if(G.successProperty){I=this.getSuccess(s);if(I===false||I==="false"){J=false}}return{success:J,records:f,totalRecords:H}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(b){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(b,{reader:new Ext.data.ArrayReader(b)}))},loadData:function(h,f){if(this.expandData===true){var i=[];for(var j=0,g=h.length;j<g;j++){i[i.length]=[h[j]]}h=i}Ext.data.ArrayStore.superclass.loadData.call(this,h,f)}});Ext.reg("arraystore",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg("simplestore",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(b){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(b,{reader:new Ext.data.JsonReader(b)}))}});Ext.reg("jsonstore",Ext.data.JsonStore);Ext.data.XmlWriter=function(b){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments);this.tpl=(typeof(this.tpl)==="string")?new Ext.XTemplate(this.tpl).compile():this.tpl.compile()};Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:false,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><\u003fxml version="{version}" encoding="{encoding}"\u003f><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}</{name}></tpl></tpl></tpl><tpl if="records.length&gt;1"><{root}></tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if="records.length&gt;1"></{root}></tpl><tpl if="documentRoot"></{documentRoot}></tpl></tpl>',render:function(d,f,e){f=this.toArray(f);d.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:(f.length>0||this.forceDocumentRoot===true)?this.documentRoot:false,record:this.meta.record,root:this.root,baseParams:f,records:(Ext.isArray(e[0]))?e:[e]})},createRecord:function(b){return this.toArray(this.toHash(b))},updateRecord:function(b){return this.toArray(this.toHash(b))},destroyRecord:function(c){var d={};d[this.meta.idProperty]=c.id;return this.toArray(d)}});Ext.data.XmlReader=function(d,c){d=d||{};Ext.applyIf(d,{idProperty:d.idProperty||d.idPath||d.id,successProperty:d.successProperty||d.success});Ext.data.XmlReader.superclass.constructor.call(this,d,c||d.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(d){var c=d.responseXML;if(!c){throw {message:"XmlReader.read: XML Document not available"}}return this.readRecords(c)},readRecords:function(k){this.xmlData=k;var h=k.documentElement||k,l=Ext.DomQuery,i=0,j=true;if(this.meta.totalProperty){i=this.getTotal(h,0)}if(this.meta.successProperty){j=this.getSuccess(h)}var g=this.extractData(l.select(this.meta.record,h),true);return{success:j,records:g,totalRecords:i||g.length}},readResponse:function(k,h){var l=Ext.DomQuery,j=h.responseXML,i=j.documentElement||j;var n=new Ext.data.Response({action:k,success:this.getSuccess(i),message:this.getMessage(i),data:this.extractData(l.select(this.meta.record,i)||l.select(this.meta.root,i),false),raw:j});if(Ext.isEmpty(n.success)){throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty)}if(k===Ext.data.Api.actions.create){var m=Ext.isDefined(n.data);if(m&&Ext.isEmpty(n.data)){throw new Ext.data.JsonReader.Error("root-empty",this.meta.root)}else{if(!m){throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}}}return n},getSuccess:function(){return true},buildExtractors:function(){if(this.ef){return}var f=this.meta,m=this.recordType,n=m.prototype.fields,g=n.items,i=n.length;if(f.totalProperty){this.getTotal=this.createAccessor(f.totalProperty)}if(f.successProperty){this.getSuccess=this.createAccessor(f.successProperty)}if(f.messageProperty){this.getMessage=this.createAccessor(f.messageProperty)}this.getRoot=function(a){return(!Ext.isEmpty(a[this.meta.record]))?a[this.meta.record]:a[this.meta.root]};if(f.idPath||f.idProperty){var o=this.createAccessor(f.idPath||f.idProperty);this.getId=function(b){var a=o(b)||b.id;return(a===undefined||a==="")?null:a}}else{this.getId=function(){return null}}var p=[];for(var q=0;q<i;q++){n=g[q];var r=(n.mapping!==undefined&&n.mapping!==null)?n.mapping:n.name;p.push(this.createAccessor(r))}this.ef=p},createAccessor:function(){var b=Ext.DomQuery;return function(a){if(Ext.isFunction(a)){return a}switch(a){case this.meta.totalProperty:return function(f,e){return b.selectNumber(a,f,e)};break;case this.meta.successProperty:return function(i,h){var j=b.selectValue(a,i,true);var g=j!==false&&j!=="false";return g};break;default:return function(f,e){return b.selectValue(a,f,e)};break}}}(),extractValues:function(j,m,i){var k,n={};for(var l=0;l<i;l++){k=m[l];var f=this.ef[l](j);n[k.name]=k.convert((f!==undefined)?f:k.defaultValue,j)}return n}});Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(b){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(b,{reader:new Ext.data.XmlReader(b)}))}});Ext.reg("xmlstore",Ext.data.XmlStore);Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(i){i=i||{};this.hasMultiSort=true;this.multiSortInfo=this.multiSortInfo||{sorters:[]};var h=this.multiSortInfo.sorters,j=i.groupField||this.groupField,f=i.sortInfo||this.sortInfo,g=i.groupDir||this.groupDir;if(j){h.push({field:j,direction:g})}if(f){h.push(f)}Ext.data.GroupingStore.superclass.constructor.call(this,i);this.addEvents("groupchange");this.applyGroupField()},remoteGroup:false,groupOnSort:false,groupDir:"ASC",clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy;delete this.baseParams.groupDir}var b=this.lastOptions;if(b&&b.params){delete b.params.groupBy;delete b.params.groupDir}this.reload()}else{this.sort();this.fireEvent("datachanged",this)}},groupBy:function(h,g,i){i=i?(String(i).toUpperCase()=="DESC"?"DESC":"ASC"):this.groupDir;if(this.groupField==h&&this.groupDir==i&&!g){return}var j=this.multiSortInfo.sorters;if(j.length>0&&j[0].field==this.groupField){j.shift()}this.groupField=h;this.groupDir=i;this.applyGroupField();var f=function(){this.fireEvent("groupchange",this,this.getGroupState())};if(this.groupOnSort){this.sort(h,i);f.call(this);return}if(this.remoteGroup){this.on("load",f,this,{single:true});this.reload()}else{this.sort(j);f.call(this)}},sort:function(j,n){if(this.remoteSort){return Ext.data.GroupingStore.superclass.sort.call(this,j,n)}var k=[];if(Ext.isArray(arguments[0])){k=arguments[0]}else{if(j==undefined){k=this.sortInfo?[this.sortInfo]:[]}else{var l=this.fields.get(j);if(!l){return false}var h=l.name,i=this.sortInfo||null,m=this.sortToggle?this.sortToggle[h]:null;if(!n){if(i&&i.field==h){n=(this.sortToggle[h]||"ASC").toggle("ASC","DESC")}else{n=l.sortDir}}this.sortToggle[h]=n;this.sortInfo={field:h,direction:n};k=[this.sortInfo]}}if(this.groupField){k.unshift({direction:this.groupDir,field:this.groupField})}return this.multiSort.call(this,k,n)},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var b=this.lastOptions;if(b&&b.params){b.params.groupDir=this.groupDir;delete b.params.groupBy}}},applyGrouping:function(b){if(this.groupField!==false){this.groupBy(this.groupField,true,this.groupDir);return true}else{if(b===true){this.fireEvent("datachanged",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?(this.sortInfo?this.sortInfo.field:undefined):this.groupField}});Ext.reg("groupingstore",Ext.data.GroupingStore);Ext.data.DirectProxy=function(b){Ext.apply(this,b);if(typeof this.paramOrder=="string"){this.paramOrder=this.paramOrder.split(/[\s,|]/)}Ext.data.DirectProxy.superclass.constructor.call(this,b)};Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:true,directFn:undefined,doRequest:function(w,v,x,t,p,o,i){var q=[],r=this.api[w]||this.directFn;switch(w){case Ext.data.Api.actions.create:q.push(x.jsonData);break;case Ext.data.Api.actions.read:if(r.directCfg.method.len>0){if(this.paramOrder){for(var u=0,s=this.paramOrder.length;u<s;u++){q.push(x[this.paramOrder[u]])}}else{if(this.paramsAsHash){q.push(x)}}}break;case Ext.data.Api.actions.update:q.push(x.jsonData);break;case Ext.data.Api.actions.destroy:q.push(x.jsonData);break}var n={params:x||{},request:{callback:p,scope:o,arg:i},reader:t};q.push(this.createCallback(w,v,n),this);r.apply(window,q)},createCallback:function(g,f,e){var h=this;return function(b,a){if(!a.status){if(g===Ext.data.Api.actions.read){h.fireEvent("loadexception",h,e,a,null)}h.fireEvent("exception",h,"remote",g,e,a,null);e.request.callback.call(e.request.scope,null,e.request.arg,false);return}if(g===Ext.data.Api.actions.read){h.onRead(g,e,b,a)}else{h.onWrite(g,e,b,a,f)}}},onRead:function(i,j,h,k){var g;try{g=j.reader.readRecords(h)}catch(l){this.fireEvent("loadexception",this,j,k,l);this.fireEvent("exception",this,"response",i,j,k,l);j.request.callback.call(j.request.scope,null,j.request.arg,false);return}this.fireEvent("load",this,k,j.request.arg);j.request.callback.call(j.request.scope,g,j.request.arg,true)},onWrite:function(k,m,i,n,h){var l=m.reader.extractData(m.reader.getRoot(i),false);var j=m.reader.getSuccess(i);j=(j!==false);if(j){this.fireEvent("write",this,k,l,n,h,m.request.arg)}else{this.fireEvent("exception",this,"remote",k,m,i,h)}m.request.callback.call(m.request.scope,l,n,j)}});Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(d){var c=Ext.apply({},{batchTransactions:false},d);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(c,{proxy:Ext.isDefined(c.proxy)?c.proxy:new Ext.data.DirectProxy(Ext.copyTo({},c,"paramOrder,paramsAsHash,directFn,api")),reader:(!Ext.isDefined(c.reader)&&c.fields)?new Ext.data.JsonReader(Ext.copyTo({},c,"totalProperty,root,idProperty"),c.fields):c.reader}))}});Ext.reg("directstore",Ext.data.DirectStore);Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception");this.transactions={};this.providers={}},addProvider:function(f){var h=arguments;if(h.length>1){for(var g=0,a=h.length;g<a;g++){this.addProvider(h[g])}return}if(!f.events){f=new Ext.Direct.PROVIDERS[f.type](f)}f.id=f.id||Ext.id();this.providers[f.id]=f;f.on("data",this.onProviderData,this);f.on("exception",this.onProviderException,this);if(!f.isConnected()){f.connect()}return f},getProvider:function(b){return this.providers[b]},removeProvider:function(c){var d=c.id?c:this.providers[c];d.un("data",this.onProviderData,this);d.un("exception",this.onProviderException,this);delete this.providers[d.id];return d},addTransaction:function(b){this.transactions[b.tid]=b;return b},removeTransaction:function(b){delete this.transactions[b.tid||b];return b},getTransaction:function(b){return this.transactions[b.tid||b]},onProviderData:function(g,h){if(Ext.isArray(h)){for(var e=0,f=h.length;e<f;e++){this.onProviderData(g,h[e])}return}if(h.name&&h.name!="event"&&h.name!="exception"){this.fireEvent(h.name,h)}else{if(h.type=="exception"){this.fireEvent("exception",h)}}this.fireEvent("event",h,g)},createEvent:function(d,c){return new Ext.Direct.eventTypes[d.type](Ext.apply(d,c))}});Ext.Direct=new Ext.Direct();Ext.Direct.TID=1;Ext.Direct.PROVIDERS={};Ext.Direct.Transaction=function(b){Ext.apply(this,b);this.tid=++Ext.Direct.TID;this.retryCount=0};Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}};Ext.Direct.Event=function(b){Ext.apply(this,b)};Ext.Direct.Event.prototype={status:true,getData:function(){return this.data}};Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}});Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:false,type:"exception"});Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent};Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(b){Ext.apply(this,b);this.addEvents("connect","disconnect","data","exception");Ext.direct.Provider.superclass.constructor.call(this,b)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(b){if(!Ext.isEmpty(b.responseText)){if(typeof b.responseText=="object"){return b.responseText}return Ext.decode(b.responseText)}return null},getEvents:function(j){var l=null;try{l=this.parseResponse(j)}catch(k){var m=new Ext.Direct.ExceptionEvent({data:k,xhr:j,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+l});return[m]}var n=[];if(Ext.isArray(l)){for(var e=0,i=l.length;e<i;e++){n.push(Ext.Direct.createEvent(l[e]))}}else{n.push(Ext.Direct.createEvent(l))}return n}});Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3000,constructor:function(b){Ext.direct.PollingProvider.superclass.constructor.call(this,b);this.addEvents("beforepoll","poll")},isConnected:function(){return !!this.pollTask},connect:function(){if(this.url&&!this.pollTask){this.pollTask=Ext.TaskMgr.start({run:function(){if(this.fireEvent("beforepoll",this)!==false){if(typeof this.url=="function"){this.url(this.baseParams)}else{Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams})}}},interval:this.interval,scope:this});this.fireEvent("connect",this)}else{if(!this.url){throw"Error initializing PollingProvider, no url configured."}}},disconnect:function(){if(this.pollTask){Ext.TaskMgr.stop(this.pollTask);delete this.pollTask;this.fireEvent("disconnect",this)}},onData:function(m,j,k){if(j){var n=this.getEvents(k);for(var e=0,i=n.length;e<i;e++){var l=n[e];this.fireEvent("data",this,l)}}else{var l=new Ext.Direct.ExceptionEvent({data:l,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:k});this.fireEvent("data",this,l)}}});Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider;Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(b){Ext.direct.RemotingProvider.superclass.constructor.call(this,b);this.addEvents("beforecall","call");this.namespace=(Ext.isString(this.namespace))?Ext.ns(this.namespace):this.namespace||window;this.transactions={};this.callBuffer=[]},initAPI:function(){var k=this.actions;for(var j in k){var n=this.namespace[j]||(this.namespace[j]={}),m=k[j];for(var l=0,c=m.length;l<c;l++){var i=m[l];n[i.name]=this.createMethod(j,i)}}},isConnected:function(){return !!this.connected},connect:function(){if(this.url){this.initAPI();this.connected=true;this.fireEvent("connect",this)}else{if(!this.url){throw"Error initializing RemotingProvider, no url configured."}}},disconnect:function(){if(this.connected){this.connected=false;this.fireEvent("disconnect",this)}},onData:function(r,m,l){if(m){var i=this.getEvents(l);for(var q=0,p=i.length;q<p;q++){var o=i[q],e=this.getTransaction(o);this.fireEvent("data",this,o);if(e){this.doCallback(e,o,true);Ext.Direct.removeTransaction(e)}}}else{var n=[].concat(r.ts);for(var q=0,p=n.length;q<p;q++){var e=this.getTransaction(n[q]);if(e&&e.retryCount<this.maxRetries){e.retry()}else{var o=new Ext.Direct.ExceptionEvent({data:o,transaction:e,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:l});this.fireEvent("data",this,o);if(e){this.doCallback(e,o,false);Ext.Direct.removeTransaction(e)}}}}},getCallData:function(b){return{action:b.action,method:b.method,data:b.data,type:"rpc",tid:b.tid}},doSend:function(k){var i={url:this.url,callback:this.onData,scope:this,ts:k,timeout:this.timeout},g;if(Ext.isArray(k)){g=[];for(var l=0,h=k.length;l<h;l++){g.push(this.getCallData(k[l]))}}else{g=this.getCallData(k)}if(this.enableUrlEncode){var j={};j[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(g);i.params=j}else{i.jsonData=g}Ext.Ajax.request(i)},combineAndSend:function(){var b=this.callBuffer.length;if(b>0){this.doSend(b==1?this.callBuffer[0]:this.callBuffer);this.callBuffer=[]}},queueTransaction:function(b){if(b.form){this.processForm(b);return}this.callBuffer.push(b);if(this.enableBuffer){if(!this.callTask){this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)}this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)}else{this.combineAndSend()}},doCall:function(j,i,c){var k=null,m=c[i.len],l=c[i.len+1];if(i.len!==0){k=c.slice(0,i.len)}var n=new Ext.Direct.Transaction({provider:this,args:c,action:j,method:i.name,data:k,cb:l&&Ext.isFunction(m)?m.createDelegate(l):m});if(this.fireEvent("beforecall",this,n,i)!==false){Ext.Direct.addTransaction(n);this.queueTransaction(n);this.fireEvent("call",this,n,i)}},doForm:function(k,c,n,l,o){var p=new Ext.Direct.Transaction({provider:this,action:k,method:c.name,args:[n,l,o],cb:o&&Ext.isFunction(l)?l.createDelegate(o):l,isForm:true});if(this.fireEvent("beforecall",this,p,c)!==false){Ext.Direct.addTransaction(p);var j=String(n.getAttribute("enctype")).toLowerCase()=="multipart/form-data",m={extTID:p.tid,extAction:k,extMethod:c.name,extType:"rpc",extUpload:String(j)};Ext.apply(p,{form:Ext.getDom(n),isUpload:j,params:l&&Ext.isObject(l.params)?Ext.apply(m,l.params):m});this.fireEvent("call",this,p,c);this.processForm(p)}},processForm:function(b){Ext.Ajax.request({url:this.url,params:b.params,callback:this.onData,scope:this,form:b.form,isUpload:b.isUpload,ts:b})},createMethod:function(f,e){var c;if(!e.formHandler){c=function(){this.doCall(f,e,Array.prototype.slice.call(arguments,0))}.createDelegate(this)}else{c=function(b,a,d){this.doForm(f,e,b,a,d)}.createDelegate(this)}c.directCfg={action:f,method:e};return c},getTransaction:function(b){return b&&b.tid?Ext.Direct.getTransaction(b.tid):null},doCallback:function(j,h){var i=h.status?"success":"failure";if(j&&j.cb){var e=j.cb,g=Ext.isDefined(h.result)?h.result:h.data;if(Ext.isFunction(e)){e(g,h)}else{Ext.callback(e[i],e.scope,[g,h]);Ext.callback(e.callback,e.scope,[g,h])}}}});Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider;Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(w,v){this.el=Ext.get(w);if(v&&v.wrap){v.resizeChild=this.el;this.el=this.el.wrap(typeof v.wrap=="object"?v.wrap:{cls:"xresizable-wrap"});this.el.id=this.el.dom.id=v.resizeChild.id+"-rzwrap";this.el.setStyle("overflow","hidden");this.el.setPositioning(v.resizeChild.getPositioning());v.resizeChild.clearPositioning();if(!v.width||!v.height){var u=v.resizeChild.getSize();this.el.setSize(u.width,u.height)}if(v.pinned&&!v.adjustments){v.adjustments="auto"}}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");Ext.apply(this,v);if(this.pinned){this.disableTrackOver=true;this.el.addClass("x-resizable-pinned")}var r=this.el.getStyle("position");if(r!="absolute"&&r!="fixed"){this.el.setStyle("position","relative")}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var i=this.handles.split(/\s*?[,;]\s*?| /);var x=Ext.Resizable.positions;for(var s=0,q=i.length;s<q;s++){if(i[s]&&x[i[s]]){var o=x[i[s]];this[o]=new Ext.Resizable.Handle(this,o,this.disableTrackOver,this.transparent,this.handleCls)}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments=="auto"){var y=this.resizeChild;var p=this.west,t=this.east,z=this.north,i=this.south;if(y&&(p||z)){y.position("relative");y.setLeft(p?p.el.getWidth():0);y.setTop(z?z.el.getHeight():0)}this.adjustments=[(t?-t.el.getWidth():0)+(p?-p.el.getWidth():0),(z?-z.el.getHeight():0)+(i?-i.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id);if(this.constrainTo){this.dd.constrainTo(this.constrainTo)}}this.addEvents("beforeresize","resize");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:false,disableTrackOver:false,draggable:false,duration:0.35,dynamic:false,easing:"easeOutStrong",enabled:true,handles:false,multiDirectional:false,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:10000,maxWidth:10000,minX:0,minY:0,pinned:false,preserveRatio:false,resizeChild:false,transparent:false,resizeTo:function(c,d){this.el.setSize(c,d);this.updateChildSize();this.fireEvent("resize",this,c,d,null)},startSizing:function(f,d){this.fireEvent("beforeresize",this,f);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.overlay.setStyle("cursor",d.el.getStyle("cursor"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=f.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var e=Ext.get(this.constrainTo);this.resizeRegion=e.getRegion().adjust(e.getFrameWidth("t"),e.getFrameWidth("l"),-e.getFrameWidth("b"),-e.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible")}}},onMouseDown:function(d,c){if(this.enabled){c.stopEvent();this.activeHandle=d;this.startSizing(c,d)}},onMouseUp:function(c){this.activeHandle=null;var d=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,d.width,d.height,c)},updateChildSize:function(){if(this.resizeChild){var g=this.el;var f=this.resizeChild;var h=this.adjustments;if(g.dom.offsetWidth){var b=g.getSize(true);f.setSize(b.width+h[0],b.height+h[1])}if(Ext.isIE){setTimeout(function(){if(g.dom.offsetWidth){var a=g.getSize(true);f.setSize(a.width+h[0],a.height+h[1])}},10)}}},snap:function(j,h,f){if(!h||!j){return j}var i=j;var g=j%h;if(g>0){if(g>(h/2)){i=j+(h-g)}else{i=j-g}}return Math.max(f,i)},resizeElement:function(){var b=this.proxy.getBox();if(this.updateBox){this.el.setBox(b,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(b.width,b.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}if(this.draggable&&this.constrainTo){this.dd.resetConstraints();this.dd.constrainTo(this.constrainTo)}return b},constrain:function(e,h,f,g){if(e-h<f){h=e-f}else{if(e-h>g){h=e-g}}return h},onMouseMove:function(h){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(h.getPoint())){return}var E=this.curSize||this.startBox,P=this.startBox.x,Q=this.startBox.y,V=P,W=Q,O=E.width,x=E.height,U=O,M=x,N=this.minWidth,e=this.minHeight,G=this.maxWidth,F=this.maxHeight,S=this.widthIncrement,X=this.heightIncrement,K=h.getXY(),I=-(this.startPoint[0]-Math.max(this.minX,K[0])),L=-(this.startPoint[1]-Math.max(this.minY,K[1])),R=this.activeHandle.position,y,T;switch(R){case"east":O+=I;O=Math.min(Math.max(N,O),G);break;case"south":x+=L;x=Math.min(Math.max(e,x),F);break;case"southeast":O+=I;x+=L;O=Math.min(Math.max(N,O),G);x=Math.min(Math.max(e,x),F);break;case"north":L=this.constrain(x,L,e,F);Q+=L;x-=L;break;case"west":I=this.constrain(O,I,N,G);P+=I;O-=I;break;case"northeast":O+=I;O=Math.min(Math.max(N,O),G);L=this.constrain(x,L,e,F);Q+=L;x-=L;break;case"northwest":I=this.constrain(O,I,N,G);L=this.constrain(x,L,e,F);Q+=L;x-=L;P+=I;O-=I;break;case"southwest":I=this.constrain(O,I,N,G);x+=L;x=Math.min(Math.max(e,x),F);P+=I;O-=I;break}var J=this.snap(O,S,N);var H=this.snap(x,X,e);if(J!=O||H!=x){switch(R){case"northeast":Q-=H-x;break;case"north":Q-=H-x;break;case"southwest":P-=J-O;break;case"west":P-=J-O;break;case"northwest":P-=J-O;Q-=H-x;break}O=J;x=H}if(this.preserveRatio){switch(R){case"southeast":case"east":x=M*(O/U);x=Math.min(Math.max(e,x),F);O=U*(x/M);break;case"south":O=U*(x/M);O=Math.min(Math.max(N,O),G);x=M*(O/U);break;case"northeast":O=U*(x/M);O=Math.min(Math.max(N,O),G);x=M*(O/U);break;case"north":y=O;O=U*(x/M);O=Math.min(Math.max(N,O),G);x=M*(O/U);P+=(y-O)/2;break;case"southwest":x=M*(O/U);x=Math.min(Math.max(e,x),F);y=O;O=U*(x/M);P+=y-O;break;case"west":T=x;x=M*(O/U);x=Math.min(Math.max(e,x),F);Q+=(T-x)/2;y=O;O=U*(x/M);P+=y-O;break;case"northwest":y=O;T=x;x=M*(O/U);x=Math.min(Math.max(e,x),F);O=U*(x/M);Q+=T-x;P+=y-O;break}}this.proxy.setBounds(P,Q,O,x);if(this.dynamic){this.resizeElement()}}catch(w){}}},handleOver:function(){if(this.enabled){this.el.addClass("x-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("x-resizable-over")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(d){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var f=Ext.Resizable.positions;for(var e in f){if(typeof f[e]!="function"&&this[f[e]]){this[f[e]].destroy()}}if(d){this.el.update("");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var b=this.el.getHeight(true);if(this.west){this.west.el.setHeight(b)}if(this.east){this.east.el.setHeight(b)}}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(k,i,l,j,h){if(!this.tpl){var g=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});g.compile();Ext.Resizable.Handle.prototype.tpl=g}this.position=i;this.rz=k;this.el=this.tpl.append(k.el.dom,[this.position],true);this.el.unselectable();if(j){this.el.setOpacity(0)}if(!Ext.isEmpty(h)){this.el.addClass(h)}this.el.on("mousedown",this.onMouseDown,this);if(!l){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},afterResize:function(b){},onMouseDown:function(b){this.rz.onMouseDown(this,b)},onMouseOver:function(b){this.rz.handleOver(this,b)},onMouseOut:function(b){this.rz.handleOut(this,b)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:true,draggable:true,closable:true,closeAction:"close",constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,showAnimDuration:0.25,hideAnimDuration:0.25,collapsible:false,initHidden:undefined,hidden:true,elements:"header,body",frame:true,floating:true,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore");if(Ext.isDefined(this.initHidden)){this.hidden=this.initHidden}if(this.hidden===false){this.hidden=true;this.show()}},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(c,d){Ext.Window.superclass.onRender.call(this,c,d);if(this.plain){this.el.addClass("x-window-plain")}this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom);this.mask.enableDisplayMode("block");this.mask.hide();this.mon(this.mask,"click",this.focus,this)}if(this.maximizable){this.mon(this.header,"dblclick",this.toggleMaximize,this)}},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this.resizerAction,handleCls:"x-window-handle"});this.resizer.window=this;this.mon(this.resizer,"beforeresize",this.beforeResize,this)}if(this.draggable){this.header.addClass("x-window-draggable")}this.mon(this.el,"mousedown",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var b=this.getKeyMap();b.on(27,this.onEsc,this);b.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(d,c){if(this.activeGhost){this.unghost()}c.stopEvent();this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();this.clearAnchor();Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:true})}if(this.closable){this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var b=this.proxy.getBox();this.proxy.hide();this.window.handleResize(b);return b},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(c){var d=this.resizeBox;if(d.x!=c.x||d.y!=c.y){this.updateBox(c)}else{this.setSize(c);if(Ext.isIE6&&Ext.isStrict){this.doLayout()}}this.focus();this.updateHandles();this.saveState()},focus:function(){var h=this.focusEl,g=this.defaultButton,j=typeof g,i,f;if(Ext.isDefined(g)){if(Ext.isNumber(g)&&this.fbar){h=this.fbar.items.get(g)}else{if(Ext.isString(g)){h=Ext.getCmp(g)}else{h=g}}i=h.getEl();f=Ext.getDom(this.container);if(i&&f){if(f!=document.body&&!Ext.lib.Region.getRegion(f).contains(Ext.lib.Region.getRegion(i.dom))){return}}}h=h||this.focusEl;h.focus.defer(10,h)},setAnimateTarget:function(b){b=Ext.get(b);this.animateTarget=b},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var d=this.el.getAlignToXY(this.container,"c-c");var c=this.el.translatePoints(d[0],d[1]);this.x=this.x===undefined?c.left:this.x;this.y=this.y===undefined?c.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(f,e,d){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return this}if(this.fireEvent("beforeshow",this)===false){return this}if(e){this.on("show",e,d,{single:true})}this.hidden=false;if(Ext.isDefined(f)){this.setAnimateTarget(f)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}return this},afterShow:function(c){if(this.isDestroyed){return false}this.proxy.hide();this.el.setStyle("display","block");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();this.doLayout();if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();if(c&&(Ext.isIE||Ext.isWebKit)){var d=this.getSize();this.onResize(d.width,d.height)}this.onShow();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var b=this.getBox();this.el.setStyle("display","none");this.proxy.shift(Ext.apply(b,{callback:this.afterShow.createDelegate(this,[true],false),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:0.5}))},hide:function(f,e,d){if(this.hidden||this.fireEvent("beforehide",this)===false){return this}if(e){this.on("hide",e,d,{single:true})}this.hidden=true;if(f!==undefined){this.setAnimateTarget(f)}if(this.modal){this.mask.hide();Ext.getBody().removeClass("x-body-masked")}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}return this},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.keyMap){this.keyMap.disable()}this.onHide();this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var b=this.getBox(false);this.proxy.setBox(b);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize("100%","100%");var b=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var d;if(this.constrain){d={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var e=this.getSize();d={right:-(e.width-100),bottom:-(e.height-25+this.el.getConstrainOffset())}}var f=this.el.getConstrainToXY(this.container,true,d);if(f){this.setPosition(f[0],f[1])}}},ghost:function(e){var f=this.createGhost(e);var d=this.getBox(true);f.setLeftTop(d.x,d.y);f.setWidth(d.width);this.el.hide();this.activeGhost=f;return f},unghost:function(c,d){if(!this.activeGhost){return}if(c!==false){this.el.show();this.focus.defer(10,this);if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}}if(d!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this);return this},close:function(){if(this.fireEvent("beforeclose",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){this.fireEvent("close",this);this.destroy()},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass("x-window-maximized");this.container.addClass("x-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this)}return this},restore:function(){if(this.maximized){var b=this.tools;this.el.removeClass("x-window-maximized");if(b.restore){b.restore.hide()}if(b.maximize){b.maximize.show()}this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible&&b.toggle){b.toggle.show()}this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var b=this.container.getViewSize(false);this.setSize(b.width,b.height)},setZIndex:function(b){if(this.modal){this.mask.setStyle("z-index",b)}this.el.setZIndex(++b);b+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++b)}this.lastZIndex=b},alignTo:function(e,f,h){var g=this.el.getAlignToXY(e,f,h);this.setPagePosition(g[0],g[1]);return this},anchorTo:function(j,h,i,f){this.clearAnchor();this.anchorTarget={el:j,alignment:h,offsets:i};Ext.EventManager.onWindowResize(this.doAnchor,this);var g=typeof f;if(g!="undefined"){Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:g=="number"?f:50})}return this.doAnchor()},doAnchor:function(){var b=this.anchorTarget;this.alignTo(b.el,b.alignment,b.offsets);return this},clearAnchor:function(){if(this.anchorTarget){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this);delete this.anchorTarget}return this},toFront:function(b){if(this.manager.bringToFront(this)){if(!b||!b.getTarget().focus){this.focus()}}return this},setActive:function(b){if(b){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var b=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(b[0],b[1]);return this}});Ext.reg("window",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(b){this.win=b;Ext.Window.DD.superclass.constructor.call(this,b.el.id,"WindowDD-"+b.id);this.setHandleElId(b.header.id);this.scroll=false},moveOnly:true,headerOffsets:[100,25],startDrag:function(){var e=this.win;this.proxy=e.ghost(e.initialConfig.cls);if(e.constrain!==false){var f=e.el.shadowOffset;this.constrainTo(e.container,{right:f,left:f,bottom:f})}else{if(e.constrainHeader!==false){var d=this.proxy.getSize();this.constrainTo(e.container,{right:-(d.width-this.headerOffsets[0]),bottom:-(d.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(b){this.alignElWithMouse(this.proxy,b.getPageX(),b.getPageY())},endDrag:function(b){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var k={};var m=[];var l=null;var n=function(a,b){return(!a._lastAccess||a._lastAccess<b._lastAccess)?-1:1};var j=function(){var c=m,e=c.length;if(e>0){c.sort(n);var d=c[0].manager.zseed;for(var b=0;b<e;b++){var a=c[b];if(a&&!a.hidden){a.setZIndex(d+(b*10))}}}i()};var h=function(a){if(a!=l){if(l){l.setActive(false)}l=a;if(a){a.setActive(true)}}};var i=function(){for(var a=m.length-1;a>=0;--a){if(!m[a].hidden){h(m[a]);return}}h(null)};return{zseed:9000,register:function(a){if(a.manager){a.manager.unregister(a)}a.manager=this;k[a.id]=a;m.push(a);a.on("hide",i)},unregister:function(a){delete a.manager;delete k[a.id];a.un("hide",i);m.remove(a)},get:function(a){return typeof a=="object"?a:k[a]},bringToFront:function(a){a=this.get(a);if(a!=l){a._lastAccess=new Date().getTime();j();return true}return false},sendToBack:function(a){a=this.get(a);a._lastAccess=-(new Date().getTime());j();return a},hideAll:function(){for(var a in k){if(k[a]&&typeof k[a]!="function"&&k[a].isVisible()){k[a].hide()}}},getActive:function(){return l},getBy:function(c,d){var b=[];for(var e=m.length-1;e>=0;--e){var a=m[e];if(c.call(d||a,a)!==false){b.push(a)}}return b},each:function(b,c){for(var a in k){if(k[a]&&typeof k[a]!="function"){if(b.call(c||k[a],k[a])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.MessageBox=function(){var y,Q,C,z,L,H,A,R,F,D,J,M,B,x,E,K="",O="",G=["ok","yes","no","cancel"];var P=function(a){B[a].blur();if(y.isVisible()){y.hide();w();Ext.callback(Q.fn,Q.scope||window,[a,x.dom.value,Q],1)}};var w=function(){if(Q&&Q.cls){y.el.removeClass(Q.cls)}F.reset()};var N=function(c,b,a){if(Q&&Q.closable!==false){y.hide();w()}if(a){a.stopEvent()}};var I=function(b){var c=0,a;if(!b){Ext.each(G,function(d){B[d].hide()});return c}y.footer.dom.style.display="";Ext.iterate(B,function(e,d){a=b[e];if(a){d.show();d.setText(Ext.isString(a)?a:Ext.MessageBox.buttonText[e]);c+=d.getEl().getWidth()+15}else{d.hide()}});return c};return{getDialog:function(b){if(!y){var c=[];B={};Ext.each(G,function(d){c.push(B[d]=new Ext.Button({text:this.buttonText[d],handler:P.createCallback(d),hideMode:"offsets"}))},this);y=new Ext.Window({autoCreate:true,title:b,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"center",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(Q&&Q.buttons&&Q.buttons.no&&!Q.buttons.cancel){P("no")}else{P("cancel")}},fbar:new Ext.Toolbar({items:c,enableOverflow:false})});y.render(document.body);y.getEl().addClass("x-window-dlg");C=y.mask;L=y.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});J=Ext.get(L.dom.firstChild);var a=L.dom.childNodes[1];H=Ext.get(a.firstChild);A=Ext.get(a.childNodes[2].firstChild);A.enableDisplayMode();A.addKeyListener([10,13],function(){if(y.isVisible()&&Q&&Q.buttons){if(Q.buttons.ok){P("ok")}else{if(Q.buttons.yes){P("yes")}}}});R=Ext.get(a.childNodes[2].childNodes[1]);R.enableDisplayMode();F=new Ext.ProgressBar({renderTo:L});L.createChild({cls:"x-clear"})}return y},updateText:function(b){if(!y.isVisible()&&!Q.width){y.setSize(this.maxWidth,100)}H.update(b?b+" ":"&#160;");var f=O!=""?(J.getWidth()+J.getMargins("lr")):0,d=H.getWidth()+H.getMargins("lr"),c=y.getFrameWidth("lr"),e=y.body.getFrameWidth("lr"),a;a=Math.max(Math.min(Q.width||f+d+c+e,Q.maxWidth||this.maxWidth),Math.max(Q.minWidth||this.minWidth,E||0));if(Q.prompt===true){x.setWidth(a-f-c-e)}if(Q.progress===true||Q.wait===true){F.setSize(a-f-c-e)}if(Ext.isIE&&a==E){a+=4}H.update(b||"&#160;");y.setSize(a,"auto").center();return this},updateProgress:function(a,b,c){F.updateProgress(a,b);if(c){this.updateText(c)}return this},isVisible:function(){return y&&y.isVisible()},hide:function(){var a=y?y.activeGhost:null;if(this.isVisible()||a){y.hide();w();if(a){y.unghost(false,false)}}return this},show:function(d){if(this.isVisible()){this.hide()}Q=d;var b=this.getDialog(Q.title||"&#160;");b.setTitle(Q.title||"&#160;");var c=(Q.closable!==false&&Q.progress!==true&&Q.wait!==true);b.tools.close.setDisplayed(c);x=A;Q.prompt=Q.prompt||(Q.multiline?true:false);if(Q.prompt){if(Q.multiline){A.hide();R.show();R.setHeight(Ext.isNumber(Q.multiline)?Q.multiline:this.defaultTextHeight);x=R}else{A.show();R.hide()}}else{A.hide();R.hide()}x.dom.value=Q.value||"";if(Q.prompt){b.focusEl=x}else{var e=Q.buttons;var a=null;if(e&&e.ok){a=B.ok}else{if(e&&e.yes){a=B.yes}}if(a){b.focusEl=a}}if(Ext.isDefined(Q.iconCls)){b.setIconClass(Q.iconCls)}this.setIcon(Ext.isDefined(Q.icon)?Q.icon:K);E=I(Q.buttons);F.setVisible(Q.progress===true||Q.wait===true);this.updateProgress(0,Q.progressText);this.updateText(Q.msg);if(Q.cls){b.el.addClass(Q.cls)}b.proxyDrag=Q.proxyDrag===true;b.modal=Q.modal!==false;b.mask=Q.modal!==false?C:false;if(!b.isVisible()){document.body.appendChild(y.el.dom);b.setAnimateTarget(Q.animEl);b.on("show",function(){if(c===true){b.keyMap.enable()}else{b.keyMap.disable()}},this,{single:true});b.show(Q.animEl)}if(Q.wait===true){F.wait(Q.waitConfig)}return this},setIcon:function(a){if(!y){K=a;return}K=undefined;if(a&&a!=""){J.removeClass("x-hidden");J.replaceClass(O,a);L.addClass("x-dlg-icon");O=a}else{J.replaceClass(O,"x-hidden");L.removeClass("x-dlg-icon");O=""}return this},progress:function(c,a,b){this.show({title:c,msg:a,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:b});return this},wait:function(c,a,b){this.show({title:a,msg:c,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:b});return this},alert:function(c,d,a,b){this.show({title:c,msg:d,buttons:this.OK,fn:a,scope:b,minWidth:this.minWidth});return this},confirm:function(c,d,a,b){this.show({title:c,msg:d,buttons:this.YESNO,fn:a,scope:b,icon:this.QUESTION,minWidth:this.minWidth});return this},prompt:function(f,b,e,a,c,d){this.show({title:f,msg:b,buttons:this.OKCANCEL,fn:e,minWidth:this.minPromptWidth,scope:a,prompt:true,multiline:c,value:d});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(d,c){this.panel=d;this.id=this.panel.id+"-ddproxy";Ext.apply(this,c)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display="";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display="none"}},repair:function(d,f,e){this.hide();if(typeof f=="function"){f.call(e||this)}},moveProxy:function(d,c){if(this.proxy){d.insertBefore(this.proxy.dom,c)}}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(e,f){this.panel=e;this.dragData={panel:e};this.proxy=new Ext.dd.PanelProxy(e,f);Ext.Panel.DD.superclass.constructor.call(this,e.el,f);var g=e.header,h=e.body;if(g){this.setHandleElId(g.id);h=e.header}h.setStyle("cursor","move");this.scroll=false},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(d,c){this.proxy.show()},b4MouseDown:function(d){var e=d.getPageX(),f=d.getPageY();this.autoOffset(e,f)},onInitDrag:function(d,c){this.onStartDrag(d,c);return true},createFrame:Ext.emptyFn,getDragEl:function(b){return this.proxy.ghost.dom},endDrag:function(b){this.proxy.hide();this.panel.saveState()},autoOffset:function(d,c){d-=this.startPageX;c-=this.startPageY;this.setDelta(d,c)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(c,d){return typeof this.state[c]=="undefined"?d:this.state[c]},clear:function(b){delete this.state[b];this.fireEvent("statechange",this,b,null)},set:function(d,c){this.state[d]=c;this.fireEvent("statechange",this,d,c)},decodeValue:function(h){var l=/^(a|n|d|b|s|o|e)\:(.*)$/,j=l.exec(unescape(h)),m,n,i,k;if(!j||!j[1]){return}n=j[1];i=j[2];switch(n){case"e":return null;case"n":return parseFloat(i);case"d":return new Date(Date.parse(i));case"b":return(i=="1");case"a":m=[];if(i!=""){Ext.each(i.split("^"),function(a){m.push(this.decodeValue(a))},this)}return m;case"o":m={};if(i!=""){Ext.each(i.split("^"),function(a){k=a.split("=");m[k[0]]=this.decodeValue(k[1])},this)}return m;default:return i}},encodeValue:function(l){var g,i="",j=0,h,k;if(l==null){return"e:1"}else{if(typeof l=="number"){g="n:"+l}else{if(typeof l=="boolean"){g="b:"+(l?"1":"0")}else{if(Ext.isDate(l)){g="d:"+l.toGMTString()}else{if(Ext.isArray(l)){for(h=l.length;j<h;j++){i+=this.encodeValue(l[j]);if(j!=h-1){i+="^"}}g="a:"+i}else{if(typeof l=="object"){for(k in l){if(typeof l[k]!="function"&&l[k]!==undefined){i+=k+"="+this.encodeValue(l[k])+"^"}}g="o:"+i.substring(0,i.length-1)}else{g="s:"+l}}}}}}return escape(g)}});Ext.state.Manager=function(){var b=new Ext.state.Provider();return{setProvider:function(a){b=a},get:function(d,a){return b.get(d,a)},set:function(a,d){b.set(a,d)},clear:function(a){b.clear(a)},getProvider:function(){return b}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(b){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,b);this.state=this.readCookies()},set:function(d,c){if(typeof c=="undefined"||c===null){this.clear(d);return}this.setCookie(d,c);Ext.state.CookieProvider.superclass.set.call(this,d,c)},clear:function(b){this.clearCookie(b);Ext.state.CookieProvider.superclass.clear.call(this,b)},readCookies:function(){var l={},i=document.cookie+";",c=/\s?(.*?)=(.*?);/g,j,h,k;while((j=c.exec(i))!=null){h=j[1];k=j[2];if(h&&h.substring(0,3)=="ys-"){l[h.substr(3)]=this.decodeValue(k)}}return l},setCookie:function(d,c){document.cookie="ys-"+d+"="+this.encodeValue(c)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")},clearCookie:function(b){document.cookie="ys-"+b+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.bindStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);var c=this.getTemplateTarget(),d=this.store.getRange();c.update("");if(d.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){c.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(c,this.collectData(d,0));this.all.fill(Ext.query(this.itemSelector,c.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},getTemplateTarget:function(){return this.el},prepareData:function(b){return b},collectData:function(f,h){var i=[],j=0,g=f.length;for(;j<g;j++){i[i.length]=this.prepareData(f[j].data,h+j,f[j])}return i},bufferRender:function(e,d){var f=document.createElement("div");this.tpl.overwrite(f,this.collectData(e,d));return Ext.query(this.itemSelector,f)},onUpdate:function(i,h){var g=this.store.indexOf(h);if(g>-1){var j=this.isSelected(g),l=this.all.elements[g],k=this.bufferRender([h],g)[0];this.all.replaceElement(g,k,true);if(j){this.selected.replaceElement(l,k);this.all.item(g).addClass(this.selectedClass)}this.updateIndexes(g,g)}},onAdd:function(i,k,j){if(this.all.getCount()===0){this.refresh();return}var l=this.bufferRender(k,j),h,a=this.all.elements;if(j<this.all.getCount()){h=this.all.item(j).insertSibling(l,"before",true);a.splice.apply(a,[j,0].concat(l))}else{h=this.all.last().insertSibling(l,"after",true);a.push.apply(a,l)}this.updateIndexes(j)},onRemove:function(f,e,d){this.deselect(d);this.all.removeElement(d,true);this.updateIndexes(d);if(this.store.getCount()===0){this.refresh()}},refreshNode:function(b){this.onUpdate(this.store,this.store.getAt(b))},updateIndexes:function(g,h){var e=this.all.elements;g=g||0;h=h||((h===0)?0:(e.length-1));for(var f=g;f<=h;f++){e[f].viewIndex=f}},getStore:function(){return this.store},bindStore:function(d,c){if(!c&&this.store){if(d!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("datachanged",this.onDataChanged,this);this.store.un("add",this.onAdd,this);this.store.un("remove",this.onRemove,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(!d){this.store=null}}if(d){d=Ext.StoreMgr.lookup(d);d.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=d;if(d){this.refresh()}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemFromChild:function(b){return Ext.fly(b).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(f){var d=f.getTarget(this.itemSelector,this.getTemplateTarget()),e;if(d){e=this.indexOf(d);if(this.onItemClick(d,e,f)!==false){this.fireEvent("click",this,e,d,f)}}else{if(this.fireEvent("containerclick",this,f)!==false){this.onContainerClick(f)}}},onContainerClick:function(b){this.clearSelections()},onContextMenu:function(c){var d=c.getTarget(this.itemSelector,this.getTemplateTarget());if(d){this.fireEvent("contextmenu",this,this.indexOf(d),d,c)}else{this.fireEvent("containercontextmenu",this,c)}},onDblClick:function(c){var d=c.getTarget(this.itemSelector,this.getTemplateTarget());if(d){this.fireEvent("dblclick",this,this.indexOf(d),d,c)}},onMouseOver:function(c){var d=c.getTarget(this.itemSelector,this.getTemplateTarget());if(d&&d!==this.lastItem){this.lastItem=d;Ext.fly(d).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(d),d,c)}},onMouseOut:function(b){if(this.lastItem){if(!b.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,b);delete this.lastItem}}},onItemClick:function(d,e,f){if(this.fireEvent("beforeclick",this,e,d,f)===false){return false}if(this.multiSelect){this.doMultiSelection(d,e,f);f.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(d,e,f);f.preventDefault()}}return true},doSingleSelection:function(d,e,f){if(f.ctrlKey&&this.isSelected(e)){this.deselect(e)}else{this.select(e,false)}},doMultiSelection:function(h,f,g){if(g.shiftKey&&this.last!==false){var e=this.last;this.selectRange(e,f,g.ctrlKey);this.last=e}else{if((g.ctrlKey||this.simpleSelect)&&this.isSelected(f)){this.deselect(f)}else{this.select(f,g.ctrlKey||g.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var e=[],g=this.selected.elements,h=0,f=g.length;for(;h<f;h++){e.push(g[h].viewIndex)}return e},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(h){var e=[],g=0,f=h.length;for(;g<f;g++){e[e.length]=this.store.getAt(h[g].viewIndex)}return e},getRecord:function(b){return this.store.getAt(b.viewIndex)},clearSelections:function(d,c){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!c){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!d){this.fireEvent("selectionchange",this,this.selected.elements)}}},isSelected:function(b){return this.selected.contains(this.getNode(b))},deselect:function(b){if(this.isSelected(b)){b=this.getNode(b);this.selected.removeElement(b);if(this.last==b.viewIndex){this.last=false}Ext.fly(b).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(k,i,g){if(Ext.isArray(k)){if(!i){this.clearSelections(true)}for(var l=0,h=k.length;l<h;l++){this.select(k[l],true,true)}if(!g){this.fireEvent("selectionchange",this,this.selected.elements)}}else{var j=this.getNode(k);if(!i){this.clearSelections(true)}if(j&&!this.isSelected(j)){if(this.fireEvent("beforeselect",this,j,this.selected.elements)!==false){Ext.fly(j).addClass(this.selectedClass);this.selected.add(j);this.last=j.viewIndex;if(!g){this.fireEvent("selectionchange",this,this.selected.elements)}}}}},selectRange:function(f,e,d){if(!d){this.clearSelections(true)}this.select(this.getNodes(f,e),true)},getNode:function(c){if(Ext.isString(c)){return document.getElementById(c)}else{if(Ext.isNumber(c)){return this.all.elements[c]}else{if(c instanceof Ext.data.Record){var d=this.store.indexOf(c);return this.all.elements[d]}}}return c},getNodes:function(h,g){var i=this.all.elements,f=[],j;h=h||0;g=!Ext.isDefined(g)?Math.max(i.length-1,0):g;if(h<=g){for(j=h;j<=g&&i[j];j++){f.push(i[j])}}else{for(j=h;j>=g&&i[j];j--){f.push(i[j])}}return f},indexOf:function(b){b=this.getNode(b);if(Ext.isNumber(b.viewIndex)){return b.viewIndex}return this.all.indexOf(b)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear()}},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg("dataview",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:undefined,columnResize:true,columnSort:true,maxColumnWidth:Ext.isIE?99:100,initComponent:function(){if(this.columnResize){this.colResizer=new Ext.list.ColumnResizer(this.colResizer);this.colResizer.init(this)}if(this.columnSort){this.colSorter=new Ext.list.Sorter(this.columnSort);this.colSorter.init(this)}if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")}if(!this.tpl){this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>")}var j=this.columns,o=0,n=0,i=j.length,s=[];for(var p=0;p<i;p++){var c=j[p];if(!c.isColumn){c.xtype=c.xtype?(/^lv/.test(c.xtype)?c.xtype:"lv"+c.xtype):"lvcolumn";c=Ext.create(c)}if(c.width){o+=c.width*100;if(o>this.maxColumnWidth){c.width-=(o-this.maxColumnWidth)/100}n++}s.push(c)}j=this.columns=s;if(n<i){var r=i-n;if(o<this.maxColumnWidth){var t=((this.maxColumnWidth-o)/r)/100;for(var q=0;q<i;q++){var c=j[q];if(!c.width){c.width=t}}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);if(this.hideHeaders){this.el.dom.firstChild.style.display="none"}},getTemplateTarget:function(){return this.innerBody},collectData:function(){var b=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:b}},verifyInternalSize:function(){if(this.lastSize){this.onResize(this.lastSize.width,this.lastSize.height)}},onResize:function(l,j){var g=this.innerBody.dom,i=this.innerHd.dom,k=l-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px",h;if(!g){return}h=g.parentNode;if(Ext.isNumber(l)){if(this.reserveScrollOffset||((h.offsetWidth-h.clientWidth)>10)){g.style.width=k;i.style.width=k}else{g.style.width=l+"px";i.style.width=l+"px";setTimeout(function(){if((h.offsetWidth-h.clientWidth)>10){g.style.width=k;i.style.width=k}},10)}}if(Ext.isNumber(j)){h.style.height=Math.max(0,j-i.parentNode.offsetHeight)+"px"}},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(h){h=h.dom||h;var g=h.parentNode,j=g.parentNode.childNodes,c=0,i;for(;i=j[c];c++){if(i==g){return c}}return -1},setHdWidths:function(){var g=this.innerHd.dom.getElementsByTagName("div"),h=0,e=this.columns,f=e.length;for(;h<f;h++){g[h].style.width=(e[h].width*100)+"%"}}});Ext.reg("listview",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:true,align:"left",header:"",width:null,cls:"",constructor:function(b){if(!b.tpl){b.tpl=new Ext.XTemplate("{"+b.dataIndex+"}")}else{if(Ext.isString(b.tpl)){b.tpl=new Ext.XTemplate(b.tpl)}}Ext.apply(this,b)}});Ext.reg("lvcolumn",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(b){b.tpl=b.tpl||new Ext.XTemplate("{"+b.dataIndex+':number("'+(b.format||this.format)+'")}');Ext.list.NumberColumn.superclass.constructor.call(this,b)}});Ext.reg("lvnumbercolumn",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(b){b.tpl=b.tpl||new Ext.XTemplate("{"+b.dataIndex+':date("'+(b.format||this.format)+'")}');Ext.list.DateColumn.superclass.constructor.call(this,b)}});Ext.reg("lvdatecolumn",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(g){g.tpl=g.tpl||new Ext.XTemplate("{"+g.dataIndex+":this.format}");var c=this.trueText,h=this.falseText,f=this.undefinedText;g.tpl.format=function(a){if(a===undefined){return f}if(!a||a==="false"){return h}return c};Ext.list.DateColumn.superclass.constructor.call(this,g)}});Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:0.05,constructor:function(b){Ext.apply(this,b);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(b){this.view=b;b.on("render",this.initEvents,this)},initEvents:function(b){b.mon(b.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(b.innerHd);b.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(l,o){var p=5,e=l.getPageX(),k=l.getTarget("em",3,true);if(k){var m=k.getRegion(),n=k.dom.style,j=k.dom.parentNode;if(e-m.left<=p&&j!=j.parentNode.firstChild){this.activeHd=Ext.get(j.previousSibling.firstChild);n.cursor=Ext.isWebKit?"e-resize":"col-resize"}else{if(m.right-e<=p&&j!=j.parentNode.lastChild.previousSibling){this.activeHd=k;n.cursor=Ext.isWebKit?"w-resize":"col-resize"}else{delete this.activeHd;n.cursor=""}}}},onBeforeStart:function(b){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(h){var i=this,e=i.view,j=i.dragHd,g=i.tracker.getXY()[0];i.proxy=e.el.createChild({cls:"x-list-resizer"});i.dragX=j.getX();i.headerIndex=e.findHeaderIndex(j);i.headersDisabled=e.disableHeaders;e.disableHeaders=true;i.proxy.setHeight(e.el.getHeight());i.proxy.setX(i.dragX);i.proxy.setWidth(g-i.dragX);this.setBoundaries()},setBoundaries:function(n){var m=this.view,p=this.headerIndex,t=m.innerHd.getWidth(),n=m.innerHd.getX(),u=Math.ceil(t*this.minPct),l=t-u,r=m.columns.length,s=m.innerHd.select("em",true),q=u+n,v=l+n,o;if(r==2){this.minX=q;this.maxX=v}else{o=s.item(p+2);this.minX=s.item(p).getX()+u;this.maxX=o?o.getX()-u:v;if(p==0){this.minX=q}else{if(p==r-2){this.maxX=v}}}},onDrag:function(f){var d=this,e=d.tracker.getXY()[0].constrain(d.minX,d.maxX);d.proxy.setWidth(e-this.dragX)},onEnd:function(p){var r=this.proxy.getWidth(),q=this.headerIndex,m=this.view,t=m.columns,u=m.innerHd.getWidth(),n=Math.ceil(r*m.maxColumnWidth/u)/100,s=this.headersDisabled,e=t[q],o=t[q+1],v=e.width+o.width;this.proxy.remove();e.width=n;o.width=v-n;delete this.dragHd;m.setHdWidths();m.refresh();setTimeout(function(){m.disableHeaders=s},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(b){Ext.apply(this,b);Ext.list.Sorter.superclass.constructor.call(this)},init:function(b){this.view=b;b.on("render",this.initEvents,this)},initEvents:function(b){b.mon(b.innerHd,"click",this.onHdClick,this);b.innerHd.setStyle("cursor","pointer");b.mon(b.store,"datachanged",this.updateSortState,this);this.updateSortState.defer(10,this,[b.store])},updateSortState:function(n){var k=n.getSortState();if(!k){return}this.sortState=k;var l=this.view.columns,j=-1;for(var m=0,i=l.length;m<i;m++){if(l[m].dataIndex==k.field){j=m;break}}if(j!=-1){var h=k.direction;this.updateSortIcon(j,h)}},updateSortIcon:function(e,f){var g=this.sortClasses;var h=this.view.innerHd.select("em").removeClass(g);h.item(e).addClass(g[f=="DESC"?1:0])},onHdClick:function(f){var d=f.getTarget("em",3);if(d&&!this.view.disableHeaders){var e=this.view.findHeaderIndex(d);this.view.store.sort(this.view.columns[e].dataIndex)}}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:false,autoTabSelector:"div.x-tab",activeTab:undefined,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header"}else{this.elements+=",footer";this.stripTarget="footer"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},onRender:function(l,h){Ext.TabPanel.superclass.onRender.call(this,l,h);if(this.plain){var i=this.tabPosition=="top"?"header":"footer";this[i].addClass("x-tab-panel-"+i+"-plain")}var g=this[this.stripTarget];this.stripWrap=g.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var j=(this.tabPosition=="bottom"?this.stripWrap:null);g.createChild({cls:"x-tab-strip-spacer"},j);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var k=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");k.disableFormats=true;k.compile();Ext.TabPanel.prototype.itemTpl=k}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}if(this.activeTab!==undefined){var b=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(b)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});if(this.enableTabScroll){this.mon(this.strip,"mousewheel",this.onWheel,this)}},findTargets:function(f){var d=null,e=f.getTarget("li:not(.x-tab-edge)",this.strip);if(e){d=this.getComponent(e.id.split(this.idDelimiter)[1]);if(d.disabled){return{close:null,item:null,el:null}}}return{close:f.getTarget(".x-tab-strip-close",this.strip),item:d,el:e}},onStripMouseDown:function(c){if(c.button!==0){return}c.preventDefault();var d=this.findTargets(c);if(d.close){if(d.item.fireEvent("beforeclose",d.item)!==false){d.item.fireEvent("close",d.item);this.remove(d.item)}return}if(d.item&&d.item!=this.activeTab){this.setActiveTab(d.item)}},onStripContextMenu:function(c){c.preventDefault();var d=this.findTargets(c);if(d.item){this.fireEvent("contextmenu",this,d.item,c)}},readTabs:function(k){if(k===true){this.items.each(function(a){this.remove(a)},this)}var l=this.el.query(this.autoTabSelector);for(var g=0,h=l.length;g<h;g++){var j=l[g],i=j.getAttribute("title");j.removeAttribute("title");this.add({title:i,contentEl:j})}},initTab:function(m,h){var l=this.strip.dom.childNodes[h],k=this.getTemplateArgs(m),n=l?this.itemTpl.insertBefore(l,k):this.itemTpl.append(this.strip,k),i="x-tab-strip-over",j=Ext.get(n);j.hover(function(){if(!m.disabled){j.addClass(i)}},function(){j.removeClass(i)});if(m.tabTip){j.child("span.x-tab-strip-text",true).qtip=m.tabTip}m.tabEl=n;j.select("a").on("click",function(a){if(!a.getPageX()){this.onStripMouseDown(a)}},this,{preventDefault:true});m.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(c){var d=c.closable?"x-tab-strip-closable":"";if(c.disabled){d+=" x-item-disabled"}if(c.iconCls){d+=" x-tab-with-icon"}if(c.tabCls){d+=" "+c.tabCls}return{id:this.id+this.idDelimiter+c.getItemId(),text:c.title,cls:d,iconCls:c.iconCls||""}},onAdd:function(c){Ext.TabPanel.superclass.onAdd.call(this,c);if(this.rendered){var d=this.items;this.initTab(c,d.indexOf(c));this.delegateUpdates()}},onBeforeAdd:function(d){var e=d.events?(this.items.containsKey(d.getItemId())?d:null):this.items.get(d);if(e){this.setActiveTab(d);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var f=d.elements;d.elements=f?f.replace(",header",""):f;d.border=(d.border===true)},onRemove:function(f){var c=Ext.get(f.tabEl);if(c){c.select("a").removeAllListeners();Ext.destroy(c)}Ext.TabPanel.superclass.onRemove.call(this,f);this.stack.remove(f);delete f.tabEl;f.un("disable",this.onItemDisabled,this);f.un("enable",this.onItemEnabled,this);f.un("titlechange",this.onItemTitleChanged,this);f.un("iconchange",this.onItemIconChanged,this);f.un("beforeshow",this.onBeforeShowItem,this);if(f==this.activeTab){var e=this.stack.next();if(e){this.setActiveTab(e)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.setActiveTab(null)}}}if(!this.destroying){this.delegateUpdates()}},onBeforeShowItem:function(b){if(b!=this.activeTab){this.setActiveTab(b);return false}},onItemDisabled:function(c){var d=this.getTabEl(c);if(d){Ext.fly(d).addClass("x-item-disabled")}this.stack.remove(c)},onItemEnabled:function(c){var d=this.getTabEl(c);if(d){Ext.fly(d).removeClass("x-item-disabled")}},onItemTitleChanged:function(c){var d=this.getTabEl(c);if(d){Ext.fly(d).child("span.x-tab-strip-text",true).innerHTML=c.title}},onItemIconChanged:function(g,f,h){var e=this.getTabEl(g);if(e){e=Ext.get(e);e.child("span.x-tab-strip-text").replaceClass(h,f);e[Ext.isEmpty(f)?"removeClass":"addClass"]("x-tab-with-icon")}},getTabEl:function(d){var c=this.getComponent(d);return c?c.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(c){c=this.getComponent(c);var d=this.getTabEl(c);if(d){d.style.display="none";this.delegateUpdates()}this.stack.remove(c)},unhideTabStripItem:function(c){c=this.getComponent(c);var d=this.getTabEl(c);if(d){d.style.display="";this.delegateUpdates()}},delegateUpdates:function(){var b=this.rendered;if(this.suspendUpdates){return}if(this.resizeTabs&&b){this.autoSizeTabs()}if(this.enableTabScroll&&b){this.autoScrollTabs()}},autoSizeTabs:function(){var r=this.items.length,w=this.tabPosition!="bottom"?"header":"footer",v=this[w].dom.offsetWidth,x=this[w].dom.clientWidth;if(!this.resizeTabs||r<1||!x){return}var p=Math.max(Math.min(Math.floor((x-4)/r)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=p;var n=this.strip.query("li:not(.x-tab-edge)");for(var t=0,q=n.length;t<q;t++){var o=n[t],i=Ext.fly(o).child(".x-tab-strip-inner",true),s=o.offsetWidth,u=i.offsetWidth;i.style.width=(p-(s-u))+"px"}},adjustBodyWidth:function(b){if(this.header){this.header.setWidth(b)}if(this.footer){this.footer.setWidth(b)}return b},setActiveTab:function(f){f=this.getComponent(f);if(this.fireEvent("beforetabchange",this,f,this.activeTab)===false){return}if(!this.rendered){this.activeTab=f;return}if(this.activeTab!=f){if(this.activeTab){var e=this.getTabEl(this.activeTab);if(e){Ext.fly(e).removeClass("x-tab-strip-active")}}this.activeTab=f;if(f){var d=this.getTabEl(f);Ext.fly(d).addClass("x-tab-strip-active");this.stack.add(f);this.layout.setActiveItem(f);this.delegateUpdates();if(this.scrolling){this.scrollToTab(f,this.animScroll)}}this.fireEvent("tabchange",this,f)}},getActiveTab:function(){return this.activeTab||null},getItem:function(b){return this.getComponent(b)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var l=this.items.length,o=this.pos.dom.offsetWidth,p=this.pos.dom.clientWidth,m=this.stripWrap,n=m.dom,i=n.offsetWidth,k=this.getScrollPos(),j=this.edge.getOffsetsTo(this.stripWrap)[0]+k;if(!this.enableTabScroll||i<20){return}if(l==0||j<=p){n.scrollLeft=0;m.setWidth(p);if(this.scrolling){this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){n.style.marginLeft="";n.style.marginRight=""}}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit){n.style.marginLeft="18px";n.style.marginRight="18px"}}p-=m.getMargins("lr");m.setWidth(p>20?p:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(k>(j-p)){n.scrollLeft=j-p}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var f=this.stripWrap.dom.offsetHeight;var e=this.pos.insertFirst({cls:"x-tab-scroller-left"});e.setHeight(f);e.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(e,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=e;var d=this.pos.insertFirst({cls:"x-tab-scroller-right"});d.setHeight(f);d.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(d,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=d},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(l,i){if(!l){return}var n=this.getTabEl(l),j=this.getScrollPos(),m=this.getScrollArea(),k=Ext.fly(n).getOffsetsTo(this.stripWrap)[0]+j,h=k+n.offsetWidth;if(k<j){this.scrollTo(k,i)}else{if(h>(j+m)){this.scrollTo(h-m,i)}}},scrollTo:function(c,d){this.stripWrap.scrollTo("left",c,d?this.getScrollAnim():false);if(!d){this.updateScrollButtons()}},onWheel:function(k){var j=k.getWheelDelta()*this.wheelIncrement*-1;k.stopEvent();var i=this.getScrollPos(),l=i+j,e=this.getScrollWidth()-this.getScrollArea();var d=Math.max(0,Math.min(e,l));if(d!=i){this.scrollTo(d,false)}},onScrollRight:function(){var e=this.getScrollWidth()-this.getScrollArea(),f=this.getScrollPos(),d=Math.min(e,f+this.getScrollIncrement());if(d!=f){this.scrollTo(d,this.animScroll)}},onScrollLeft:function(){var c=this.getScrollPos(),d=Math.max(0,c-this.getScrollIncrement());if(d!=c){this.scrollTo(d,this.animScroll)}},updateScrollButtons:function(){var b=this.getScrollPos();this.scrollLeft[b===0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[b>=(this.getScrollWidth()-this.getScrollArea())?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var b=[];return{add:function(a){b.push(a);if(b.length>10){b.shift()}},remove:function(f){var g=[];for(var h=0,a=b.length;h<a;h++){if(b[h]!=f){g.push(b[h])}}b=g},next:function(){return b.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(Ext.isString(this.toggleGroup)){this.enableToggle=true}},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){if(this.useSetClass){if(!Ext.isEmpty(this.oldCls)){this.el.removeClass([this.oldCls,"x-btn-pressed"])}this.oldCls=(this.iconCls||this.icon)?(this.text?"x-btn-text-icon":"x-btn-icon"):"x-btn-noicon";this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null])}},getMenuClass:function(){return this.menu?(this.arrowAlign!="bottom"?"x-btn-arrow":"x-btn-arrow-bottom"):""},onRender:function(h,f){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2}" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>");Ext.Button.buttonTemplate.compile()}this.template=Ext.Button.buttonTemplate}var e,g=this.getTemplateArgs();if(f){e=this.template.insertBefore(f,g,true)}else{e=this.template.append(h,g,true)}this.btnEl=e.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(e,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(d,f){this.el=d;this.setIcon(this.icon);this.setText(this.text);this.setIconClass(this.iconCls);if(Ext.isDefined(this.tabIndex)){f.dom.tabIndex=this.tabIndex}if(this.tooltip){this.setTooltip(this.tooltip,true)}if(this.handleMouseEvents){this.mon(d,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown})}if(this.menu){this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide})}if(this.repeat){var e=new Ext.util.ClickRepeater(d,Ext.isObject(this.repeat)?this.repeat:{});this.mon(e,"click",this.onRepeatClick,this)}else{this.mon(d,this.clickEvent,this.onClick,this)}},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=true;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(b){this.iconCls=b;if(this.el){this.btnEl.dom.className="";this.btnEl.addClass(["x-btn-text",b||""]);this.setButtonClass()}return this},setTooltip:function(c,d){if(this.rendered){if(!d){this.clearTip()}if(Ext.isObject(c)){Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},c));this.tooltip=c}else{this.btnEl.dom[this.tooltipType]=c}}else{this.tooltip=c}return this},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){if(this.rendered){this.clearTip()}if(this.menu&&this.destroyMenu!==false){Ext.destroy(this.btnEl,this.menu)}Ext.destroy(this.repeater)},onDestroy:function(){if(this.rendered){this.doc.un("mouseover",this.monitorMouseOver,this);this.doc.un("mouseup",this.onMouseUp,this);delete this.doc;delete this.btnEl;Ext.ButtonToggleMgr.unregister(this)}Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var b=this.btnEl;if(b&&b.getWidth()>20){b.clip();b.setWidth(Ext.util.TextMetrics.measure(b,this.text).width+b.getFrameWidth("lr"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(c,d){this.handler=c;this.scope=d;return this},setText:function(b){this.text=b;if(this.el){this.btnEl.update(b||"&#160;");this.setButtonClass()}this.doAutoWidth();return this},setIcon:function(b){this.icon=b;if(this.el){this.btnEl.setStyle("background-image",b?"url("+b+")":"");this.setButtonClass()}return this},getText:function(){return this.text},toggle:function(c,d){c=c===undefined?!this.pressed:!!c;if(c!=this.pressed){if(this.rendered){this.el[c?"addClass":"removeClass"]("x-btn-pressed")}this.pressed=c;if(!d){this.fireEvent("toggle",this,c);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,c)}}}return this},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(b){if(this.el){if(!Ext.isIE6||!this.text){this.el[b?"addClass":"removeClass"](this.disabledClass)}this.el.dom.disabled=b}this.disabled=b},showMenu:function(){if(this.rendered&&this.menu){if(this.tooltip){Ext.QuickTips.getQuickTip().cancelShow(this.btnEl)}if(this.menu.isVisible()){this.menu.hide()}this.menu.ownerCt=this;this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(d,c){this.onClick(c)},onClick:function(b){if(b){b.preventDefault()}if(b.button!==0){return}if(!this.disabled){this.doToggle();if(this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("click",this,b);if(this.handler){this.handler.call(this.scope||this,this,b)}}},doToggle:function(){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}},isMenuTriggerOver:function(c,d){return this.menu&&!d},isMenuTriggerOut:function(c,d){return this.menu&&!d},onMouseOver:function(c){if(!this.disabled){var d=c.within(this.el,true);if(!d){this.el.addClass("x-btn-over");if(!this.monitoringMouseOver){this.doc.on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent("mouseover",this,c)}if(this.isMenuTriggerOver(c,d)){this.fireEvent("menutriggerover",this,this.menu,c)}}},monitorMouseOver:function(b){if(b.target!=this.el.dom&&!b.within(this.el)){if(this.monitoringMouseOver){this.doc.un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(b)}},onMouseOut:function(c){var d=c.within(this.el)&&c.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,c);if(this.isMenuTriggerOut(c,d)){this.fireEvent("menutriggerout",this,this.menu,c)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(b){if(!this.disabled){this.el.addClass("x-btn-focus")}},onBlur:function(b){this.el.removeClass("x-btn-focus")},getClickEl:function(c,d){return this.el},onMouseDown:function(b){if(!this.disabled&&b.button===0){this.getClickEl(b).addClass("x-btn-click");this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(b){if(b.button===0){this.getClickEl(b,true).removeClass("x-btn-click");this.doc.un("mouseup",this.onMouseUp,this)}},onMenuShow:function(b){if(this.menu.ownerCt==this){this.menu.ownerCt=this;this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)}},onMenuHide:function(b){if(this.menu.ownerCt==this){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu);delete this.menu.ownerCt}},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){var d={};function c(g,a){if(a){var b=d[g.toggleGroup];for(var i=0,j=b.length;i<j;i++){if(b[i]!=g){b[i].toggle(false)}}}}return{register:function(b){if(!b.toggleGroup){return}var a=d[b.toggleGroup];if(!a){a=d[b.toggleGroup]=[]}a.push(b);b.on("toggle",c)},unregister:function(b){if(!b.toggleGroup){return}var a=d[b.toggleGroup];if(a){a.remove(b);b.un("toggle",c)}},getPressed:function(a){var b=d[a];if(b){for(var g=0,h=b.length;g<h;g++){if(b[g].pressed===true){return b[g]}}}return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:true,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);if(this.arrowTooltip){this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip}},setArrowHandler:function(c,d){this.arrowHandler=c;this.scope=d},getMenuClass:function(){return"x-btn-split"+(this.arrowAlign=="bottom"?"-bottom":"")},isClickOnArrow:function(f){if(this.arrowAlign!="bottom"){var d=this.el.child("em.x-btn-split");var e=d.getRegion().right-d.getPadding("r");return f.getPageX()>e}else{return f.getPageY()>this.btnEl.getRegion().bottom}},onClick:function(c,d){c.preventDefault();if(!this.disabled){if(this.isClickOnArrow(c)){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("arrowclick",this,c);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,c)}}else{this.doToggle();this.fireEvent("click",this,c);if(this.handler){this.handler.call(this.scope||this,this,c)}}}},isMenuTriggerOver:function(b){return this.menu&&b.target.tagName==this.arrowSelector},isMenuTriggerOut:function(c,d){return this.menu&&c.target.tagName!=this.arrowSelector}});Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(d){if(d&&this.showText===true){var c="";if(this.prependText){c+=this.prependText}c+=d.text;return c}return undefined},setActiveItem:function(f,e){if(!Ext.isObject(f)){f=this.menu.getComponent(f)}if(f){if(!this.rendered){this.text=this.getItemText(f);this.iconCls=f.iconCls}else{var d=this.getItemText(f);if(d){this.setText(d)}this.setIconClass(f.iconCls)}this.activeItem=f;if(!f.checked){f.setChecked(true,e)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!e){this.fireEvent("change",this,f)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change");if(this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var b=0;Ext.each(this.items,function(d,a){Ext.apply(d,{group:d.group||this.id,itemIndex:a,checkHandler:this.checkHandler,scope:this,checked:d.checked||false});this.menu.items.push(d);if(d.checked){b=a}},this);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this);this.setActiveItem(b,true)},checkHandler:function(d,c){if(c){this.setActiveItem(d)}},toggleSelected:function(){var f=this.menu;f.render();if(!f.hasLayout){f.doLayout()}var g,e;for(var h=1;h<this.itemCount;h++){g=(this.activeItem.itemIndex+h)%this.itemCount;e=f.items.itemAt(g);if(!e.disabled){e.setChecked(true);break}}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(b){if(Ext.isArray(b)){b={items:b,layout:"toolbar"}}else{b=Ext.apply({layout:"toolbar"},b);if(b.buttons){b.items=b.buttons}}Ext.Toolbar.superclass.constructor.call(this,b)};(function(){var b=Ext.Toolbar;Ext.extend(b,Ext.Container,{defaultType:"button",enableOverflow:false,trackMenus:true,internalDefaults:{removeMode:"container",hideParent:true},toolbarCls:"x-toolbar",initComponent:function(){b.superclass.initComponent.call(this);this.addEvents("overflowchange")},onRender:function(d,a){if(!this.el){if(!this.autoCreate){this.autoCreate={cls:this.toolbarCls+" x-small-editor"}}this.el=d.createChild(Ext.apply({id:this.id},this.autoCreate),a);Ext.Toolbar.superclass.onRender.apply(this,arguments)}},lookupComponent:function(a){if(Ext.isString(a)){if(a=="-"){a=new b.Separator()}else{if(a==" "){a=new b.Spacer()}else{if(a=="->"){a=new b.Fill()}else{a=new b.TextItem(a)}}}this.applyDefaults(a)}else{if(a.isFormField||a.render){a=this.createComponent(a)}else{if(a.tag){a=new b.Item({autoEl:a})}else{if(a.tagName){a=new b.Item({el:a})}else{if(Ext.isObject(a)){a=a.xtype?this.createComponent(a):this.constructButton(a)}}}}}return a},applyDefaults:function(c){if(!Ext.isString(c)){c=Ext.Toolbar.superclass.applyDefaults.call(this,c);var a=this.internalDefaults;if(c.events){Ext.applyIf(c.initialConfig,a);Ext.apply(c,a)}else{Ext.applyIf(c,a)}}return c},addSeparator:function(){return this.add(new b.Separator())},addSpacer:function(){return this.add(new b.Spacer())},addFill:function(){this.add(new b.Fill())},addElement:function(a){return this.addItem(new b.Item({el:a}))},addItem:function(a){return this.add.apply(this,arguments)},addButton:function(h){if(Ext.isArray(h)){var f=[];for(var g=0,a=h.length;g<a;g++){f.push(this.addButton(h[g]))}return f}return this.add(this.constructButton(h))},addText:function(a){return this.addItem(new b.TextItem(a))},addDom:function(a){return this.add(new b.Item({autoEl:a}))},addField:function(a){return this.add(a)},insertButton:function(j,g){if(Ext.isArray(g)){var h=[];for(var i=0,a=g.length;i<a;i++){h.push(this.insertButton(j+i,g[i]))}return h}return Ext.Toolbar.superclass.insert.call(this,j,g)},trackMenu:function(f,a){if(this.trackMenus&&f.menu){var e=a?"mun":"mon";this[e](f,"menutriggerover",this.onButtonTriggerOver,this);this[e](f,"menushow",this.onButtonMenuShow,this);this[e](f,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(a){var e=a.events?a:this.createComponent(a,a.split?"splitbutton":this.defaultType);return e},onAdd:function(a){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(a);if(this.disabled){a.disable()}},onRemove:function(a){Ext.Toolbar.superclass.onRemove.call(this);if(a==this.activeMenuBtn){delete this.activeMenuBtn}this.trackMenu(a,true)},onDisable:function(){this.items.each(function(a){if(a.disable){a.disable()}})},onEnable:function(){this.items.each(function(a){if(a.enable){a.enable()}})},onButtonTriggerOver:function(a){if(this.activeMenuBtn&&this.activeMenuBtn!=a){this.activeMenuBtn.hideMenu();a.showMenu();this.activeMenuBtn=a}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);b.Item=Ext.extend(Ext.BoxComponent,{hideParent:true,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbitem",b.Item);b.Separator=Ext.extend(b.Item,{onRender:function(d,a){this.el=d.createChild({tag:"span",cls:"xtb-sep"},a)}});Ext.reg("tbseparator",b.Separator);b.Spacer=Ext.extend(b.Item,{onRender:function(d,a){this.el=d.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},a)}});Ext.reg("tbspacer",b.Spacer);b.Fill=Ext.extend(b.Item,{render:Ext.emptyFn,isFill:true});Ext.reg("tbfill",b.Fill);b.TextItem=Ext.extend(b.Item,{constructor:function(a){b.TextItem.superclass.constructor.call(this,Ext.isString(a)?{text:a}:a)},onRender:function(d,a){this.autoEl={cls:"xtb-text",html:this.text||""};b.TextItem.superclass.onRender.call(this,d,a)},setText:function(a){if(this.rendered){this.el.update(a)}else{this.text=a}}});Ext.reg("tbtext",b.TextItem);b.Button=Ext.extend(Ext.Button,{});b.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg("tbbutton",b.Button);Ext.reg("tbsplit",b.SplitButton)})();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:true,internalDefaults:{removeMode:"container",hideParent:true},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});if(!this.title){this.addClass("x-btn-group-notitle")}this.on("afterlayout",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(c){c=Ext.ButtonGroup.superclass.applyDefaults.call(this,c);var d=this.internalDefaults;if(c.events){Ext.applyIf(c.initialConfig,d);Ext.apply(c,d)}else{Ext.applyIf(c,d)}return c},onAfterLayout:function(){var b=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(b);this.el.setWidth(b+this.getFrameWidth())}});Ext.reg("buttongroup",Ext.ButtonGroup);(function(){var b=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var d=[this.first=new b.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new b.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:false,allowNegative:false,enableKeyEvents:true,selectOnFocus:true,submitValue:false,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new b.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new b.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.moveNext,scope:this}),this.last=new b.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.moveLast,scope:this}),"-",this.refresh=new b.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})];var a=this.items||this.buttons||[];if(this.prependButtons){this.items=a.concat(d)}else{this.items=d.concat(a)}delete this.buttons;if(this.displayInfo){this.items.push("->");this.items.push(this.displayItem=new b.TextItem({}))}Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.on("afterlayout",this.onFirstLayout,this,{single:true});this.cursor=0;this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayItem){var a=this.store.getCount();var d=a==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+a,this.store.getTotalCount());this.displayItem.setText(d)}},onLoad:function(a,m,d){if(!this.rendered){this.dsLoaded=[a,m,d];return}var l=this.getParams();this.cursor=(d.params&&d.params[l.start])?d.params[l.start]:0;var j=this.getPageData(),n=j.activePage,k=j.pages;this.afterTextItem.setText(String.format(this.afterPageText,j.pages));this.inputItem.setValue(n);this.first.setDisabled(n==1);this.prev.setDisabled(n==1);this.next.setDisabled(n==k);this.last.setDisabled(n==k);this.refresh.enable();this.updateInfo();this.fireEvent("change",this,j)},getPageData:function(){var a=this.store.getTotalCount();return{total:a,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:a<this.pageSize?1:Math.ceil(a/this.pageSize)}},changePage:function(a){this.doLoad(((a-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},readPage:function(d){var a=this.inputItem.getValue(),f;if(!a||isNaN(f=parseInt(a,10))){this.inputItem.setValue(d.activePage);return false}return f},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(a){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(e,j){var l=j.getKey(),d=this.getPageData(),k;if(l==j.RETURN){j.stopEvent();k=this.readPage(d);if(k!==false){k=Math.min(Math.max(1,k),d.pages)-1;this.doLoad(k*this.pageSize)}}else{if(l==j.HOME||l==j.END){j.stopEvent();k=l==j.HOME?1:d.pages;e.setValue(k)}else{if(l==j.UP||l==j.PAGEUP||l==j.DOWN||l==j.PAGEDOWN){j.stopEvent();if((k=this.readPage(d))){var a=j.shiftKey?10:1;if(l==j.DOWN||l==j.PAGEDOWN){a*=-1}k+=a;if(k>=1&k<=d.pages){e.setValue(k)}}}}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(e){var f={},a=this.getParams();f[a.start]=e;f[a.limit]=this.pageSize;if(this.fireEvent("beforechange",this,f)!==false){this.store.load({params:f})}},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var d=this.store.getTotalCount(),a=d%this.pageSize;this.doLoad(a?(d-a):d-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(f,e){var a;if(!e&&this.store){if(f!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.beforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoadError,this)}if(!f){this.store=null}}if(f){f=Ext.StoreMgr.lookup(f);f.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});a=true}this.store=f;if(a){this.onLoad(f,null,{})}},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})})();Ext.reg("paging",Ext.PagingToolbar);Ext.History=(function(){var p,r;var k=false;var q;function o(){var c=location.href,b=c.indexOf("#"),a=b>=0?c.substr(b+1):null;if(Ext.isGecko){a=decodeURIComponent(a)}return a}function t(){r.value=q}function n(a){q=a;Ext.History.fireEvent("change",a)}function m(b){var c=['<html><body><div id="state">',Ext.util.Format.htmlEncode(b),"</div></body></html>"].join("");try{var d=p.contentWindow.document;d.open();d.write(c);d.close();return true}catch(a){return false}}function s(){if(!p.contentWindow||!p.contentWindow.document){setTimeout(s,10);return}var d=p.contentWindow.document;var b=d.getElementById("state");var c=b?b.innerText:null;var a=o();setInterval(function(){d=p.contentWindow.document;b=d.getElementById("state");var e=b?b.innerText:null;var f=o();if(e!==c){c=e;n(c);location.hash=c;a=c;t()}else{if(f!==a){a=f;m(f)}}},50);k=true;Ext.History.fireEvent("ready",Ext.History)}function l(){q=r.value?r.value:o();if(Ext.isIE){s()}else{var a=o();setInterval(function(){var b=o();if(b!==a){a=b;n(a);t()}},50);k=true;Ext.History.fireEvent("ready",Ext.History)}}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(a,b){if(k){Ext.callback(a,b,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(a,b)});return}r=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){p=Ext.getDom(Ext.History.iframeId)}this.addEvents("ready","change");if(a){this.on("ready",a,b,{single:true})}l()},add:function(b,a){if(a!==false){if(this.getToken()==b){return true}}if(Ext.isIE){return m(b)}else{location.hash=b;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return k?q:o()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:"close",handler:this[this.closeAction],scope:this})}},showAt:function(b){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth()}if(this.constrainPosition){b=this.el.adjustForConstraints(b)}this.setPagePosition(b[0],b[1])},doAutoWidth:function(d){d=d||0;var c=this.body.getTextWidth();if(this.title){c=Math.max(c,this.header.child("span").getTextWidth(this.title))}c+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+d;this.setWidth(c.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(d,c){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(d,c||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.reg("tip",Ext.Tip);Ext.Tip.DD=function(c,d){Ext.apply(this,d);this.tip=c;Ext.Tip.DD.superclass.constructor.call(this,c.el.id,"WindowDD-"+c.id);this.setHandleElId(c.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(b){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,constrainPosition:false,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(c,d){Ext.ToolTip.superclass.onRender.call(this,c,d);this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(f){var e;if((e=Ext.get(f))){if(this.target){var d=Ext.get(this.target);this.mun(d,"mouseover",this.onTargetOver,this);this.mun(d,"mouseout",this.onTargetOut,this);this.mun(d,"mousemove",this.onMouseMove,this)}this.mon(e,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this});this.target=e}if(this.anchor){this.anchorTarget=this.target}},onMouseMove:function(c){var d=this.delegate?c.getTarget(this.delegate):this.triggerElement=true;if(d){this.targetXY=c.getXY();if(d===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(c)}}else{if(!this.closable&&this.isVisible()){this.hide()}}},getTargetXY:function(){if(this.delegate){this.anchorTarget=this.triggerElement}if(this.anchor){this.targetCounter++;var t=this.getOffsets(),l=(this.anchorToTarget&&!this.trackMouse)?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,v=Ext.lib.Dom.getViewWidth()-5,p=Ext.lib.Dom.getViewHeight()-5,o=document.documentElement,r=document.body,m=(o.scrollLeft||r.scrollLeft||0)+5,n=(o.scrollTop||r.scrollTop||0)+5,u=[l[0]+t[0],l[1]+t[1]],q=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(u[0]<m){if(this.anchorToTarget){this.defaultAlign="l-r";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="left";return this.getTargetXY()}if(u[0]+q.width>v){if(this.anchorToTarget){this.defaultAlign="r-l";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="right";return this.getTargetXY()}if(u[1]<n){if(this.anchorToTarget){this.defaultAlign="t-b";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="top";return this.getTargetXY()}if(u[1]+q.height>p){if(this.anchorToTarget){this.defaultAlign="b-t";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="bottom";return this.getTargetXY()}}this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl.addClass(this.anchorCls);this.targetCounter=0;return u}else{var s=this.getMouseOffset();return[this.targetXY[0]+s[0],this.targetXY[1]+s[1]]}},getMouseOffset:function(){var b=this.anchor?[0,0]:[15,18];if(this.mouseOffset){b[0]+=this.mouseOffset[0];b[1]+=this.mouseOffset[1]}return b},getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0)}else{var b=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!b){throw"AnchorTip.defaultAlign is invalid"}this.tipAnchor=b[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var d,e=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse){switch(e){case"t":d=[0,9];break;case"b":d=[0,-13];break;case"r":d=[-13,0];break;default:d=[9,0];break}}else{switch(e){case"t":d=[-15-this.anchorOffset,30];break;case"b":d=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":d=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:d=[25,-13-this.anchorOffset];break}}var f=this.getMouseOffset();d[0]+=f[0];d[1]+=f[1];return d},onTargetOver:function(c){if(this.disabled||c.within(this.target.dom,true)){return}var d=c.getTarget(this.delegate);if(d){this.triggerElement=d;this.clearTimer("hide");this.targetXY=c.getXY();this.delayShow()}},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(b){if(this.disabled||b.within(this.target.dom,true)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date();if(this.anchorEl){this.anchorEl.hide()}Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){if(this.anchor){this.showAt([-1000,-1000]);this.origConstrainPosition=this.constrainPosition;this.constrainPosition=false;this.anchor=this.origAnchor}this.showAt(this.getTargetXY());if(this.anchor){this.anchorEl.show();this.syncAnchor();this.constrainPosition=this.origConstrainPosition}else{this.anchorEl.hide()}},showAt:function(b){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,b);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}if(this.anchor&&!this.anchorEl.isVisible()){this.syncAnchor();this.anchorEl.show()}else{this.anchorEl.hide()}},syncAnchor:function(){var e,d,f;switch(this.tipAnchor.charAt(0)){case"t":e="b";d="tl";f=[20+this.anchorOffset,2];break;case"r":e="l";d="tr";f=[-2,11+this.anchorOffset];break;case"b":e="t";d="bl";f=[20+this.anchorOffset,-2];break;default:e="r";d="tl";f=[2,11+this.anchorOffset];break}this.anchorEl.alignTo(this.el,e+"-"+d,f)},setPagePosition:function(d,c){Ext.ToolTip.superclass.setPagePosition.call(this,d,c);if(this.anchor){this.syncAnchor()}},clearTimer:function(b){b=b+"Timer";clearTimeout(this[b]);delete this[b]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(b){if(this.autoHide!==true&&!this.closable&&!b.within(this.el.dom)){this.disable();this.doEnable.defer(100,this)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(f,g){if(this.constrainPosition){var h=this.targetXY[1],e=this.getSize().height;if(g<=h&&(g+e)>=h){g=h-e-5}}return{x:f,y:g}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg("tooltip",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(o){var m=Ext.isArray(o)?o:arguments;for(var n=0,i=m.length;n<i;n++){var j=m[n];var l=j.target;if(l){if(Ext.isArray(l)){for(var p=0,c=l.length;p<c;p++){this.targets[Ext.id(l[p])]=j}}else{this.targets[Ext.id(l)]=j}}}},unregister:function(b){delete this.targets[Ext.id(b)]},cancelShow:function(c){var d=this.activeTarget;c=Ext.get(c).dom;if(this.isVisible()){if(d&&d.el==c){this.hide()}}else{if(d&&d.el==c){this.clearTimer("show")}}},getTipCfg:function(g){var e=g.getTarget(),h,f;if(this.interceptTitles&&e.title&&Ext.isString(e.title)){h=e.title;e.qtip=h;e.removeAttribute("title");g.preventDefault()}else{f=this.tagConfig;h=e.qtip||Ext.fly(e).getAttribute(f.attribute,f.namespace)}return h},onTargetOver:function(j){if(this.disabled){return}this.targetXY=j.getXY();var n=j.getTarget();if(!n||n.nodeType!==1||n==document||n==document.body){return}if(this.activeTarget&&((n==this.activeTarget.el)||Ext.fly(this.activeTarget.el).contains(n))){this.clearTimer("hide");this.show();return}if(n&&this.targets[n.id]){this.activeTarget=this.targets[n.id];this.activeTarget.el=n;this.anchor=this.activeTarget.anchor;if(this.anchor){this.anchorTarget=n}this.delayShow();return}var l,k=Ext.fly(n),e=this.tagConfig,m=e.namespace;if(l=this.getTipCfg(j)){var i=k.getAttribute(e.hide,m);this.activeTarget={el:n,text:l,width:k.getAttribute(e.width,m),autoHide:i!="user"&&i!=="false",title:k.getAttribute(e.title,m),cls:k.getAttribute(e.cls,m),align:k.getAttribute(e.align,m)};this.anchor=k.getAttribute(e.anchor,m);if(this.anchor){this.anchorTarget=n}this.delayShow()}},onTargetOut:function(b){if(this.activeTarget&&b.within(this.activeTarget.el)&&!this.getTipCfg(b)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},showAt:function(c){var d=this.activeTarget;if(d){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=d}if(d.width){this.setWidth(d.width);this.body.setWidth(this.adjustBodyWidth(d.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(d.title||"");this.body.update(d.text);this.autoHide=d.autoHide;this.dismissDelay=d.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(d.cls){this.el.addClass(d.cls);this.lastCls=d.cls}if(this.anchor){this.constrainPosition=false}else{if(d.align){c=this.el.getAlignToXY(d.el,d.align);this.constrainPosition=false}else{this.constrainPosition=true}}}Ext.QuickTip.superclass.showAt.call(this,c)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg("quicktip",Ext.QuickTip);Ext.QuickTips=function(){var c,d=false;return{init:function(a){if(!c){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(a)});return}c=new Ext.QuickTip({elements:"header,body",disabled:d});if(a!==false){c.render(Ext.getBody())}}},ddDisable:function(){if(c&&!d){c.disable()}},ddEnable:function(){if(c&&!d){c.enable()}},enable:function(){if(c){c.enable()}d=false},disable:function(){if(c){c.disable()}d=true},isEnabled:function(){return c!==undefined&&!c.disabled},getQuickTip:function(){return c},register:function(){c.register.apply(c,arguments)},unregister:function(){c.unregister.apply(c,arguments)},tips:function(){c.register.apply(c,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(b){b.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(d,f,e){this.show();this.body.update(this.getText(e));this.doAutoWidth();this.el.alignTo(e.el,"b-t?",this.offsets)},getText:function(b){return String(b.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var d=this.loader;if(!d){d=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod})}else{if(Ext.isObject(d)&&!d.load){d=new Ext.tree.TreeLoader(d)}}this.loader=d;this.nodeHash={};if(this.root){var c=this.root;delete this.root;this.setRootNode(c)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover");if(this.singleExpand){this.on("beforeexpandnode",this.restrictExpand,this)}},proxyNodeEvent:function(n,h,i,j,k,l,m){if(n=="collapse"||n=="expand"||n=="beforecollapse"||n=="beforeexpand"||n=="move"||n=="beforemove"){n=n+"node"}return this.fireEvent(n,h,i,j,k,l,m)},getRootNode:function(){return this.root},setRootNode:function(c){this.destroyRoot();if(!c.render){c=this.loader.createNode(c)}this.root=c;c.ownerTree=this;c.isRoot=true;this.registerNode(c);if(!this.rootVisible){var d=c.attributes.uiProvider;c.ui=d?new d(c):new Ext.tree.RootTreeNodeUI(c)}if(this.innerCt){this.clearInnerCt();this.renderRoot()}return c},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render();if(!this.rootVisible){this.root.renderChildren()}},getNodeById:function(b){return this.nodeHash[b]},registerNode:function(b){this.nodeHash[b.id]=b},unregisterNode:function(b){delete this.nodeHash[b.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(d){var c=d.parentNode;if(c){if(c.expandedChild&&c.expandedChild.parentNode==c){c.expandedChild.collapse()}c.expandedChild=d}},getChecked:function(a,h){h=h||this.root;var g=[];var f=function(){if(this.attributes.checked){g.push(!a?this:(a=="id"?this.id:this.attributes[a]))}};h.cascade(f);return g},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(k,i,j){if(Ext.isEmpty(k)){if(j){j(false,undefined)}return}i=i||"id";var m=k.split(this.pathSeparator);var n=this.root;if(n.attributes[i]!=m[1]){if(j){j(false,null)}return}var f=1;var l=function(){if(++f==m.length){if(j){j(true,n)}return}var a=n.findChild(i,m[f]);if(!a){if(j){j(false,n)}return}n=a;a.expand(false,false,l)};n.expand(false,false,l)},selectPath:function(j,h,i){if(Ext.isEmpty(j)){if(i){i(false,undefined)}return}h=h||"id";var l=j.split(this.pathSeparator),f=l.pop();if(l.length>1){var k=function(b,c){if(b&&c){var a=c.findChild(h,f);if(a){a.select();if(i){i(true,a)}}else{if(i){i(false,a)}}}else{if(i){i(false,a)}}};this.expandPath(l.join(this.pathSeparator),h,k)}else{this.root.select();if(i){i(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(c,d){Ext.tree.TreePanel.superclass.onRender.call(this,c,d);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.body);Ext.destroy(this.dropZone,this.dragZone)}this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){if(this.root&&this.root.destroy){this.root.destroy(true)}}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(b){this.tree=b;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var b=this.tree;if(b.trackMouseOver!==false){b.mon(b.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut})}b.mon(b.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(d){var e;if(e=d.getTarget(".x-tree-node-el",10)){var f=Ext.fly(e,"_treeEvents").getAttribute("tree-node-id","ext");if(f){return this.tree.getNodeById(f)}}return null},getNodeTarget:function(c){var d=c.getTarget(".x-tree-node-icon",1);if(!d){d=c.getTarget(".x-tree-node-el",6)}return d},delegateOut:function(d,e){if(!this.beforeEvent(d)){return}if(d.getTarget(".x-tree-ec-icon",1)){var f=this.getNode(d);this.onIconOut(d,f);if(f==this.lastEcOver){delete this.lastEcOver}}if((e=this.getNodeTarget(d))&&!d.within(e,true)){this.onNodeOut(d,this.getNode(d))}},delegateOver:function(c,d){if(!this.beforeEvent(c)){return}if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on("mouseover",this.trackExit,this);this.trackingDoc=true}if(this.lastEcOver){this.onIconOut(c,this.lastEcOver);delete this.lastEcOver}if(c.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(c);this.onIconOver(c,this.lastEcOver)}if(d=this.getNodeTarget(c)){this.onNodeOver(c,this.getNode(c))}},trackExit:function(b){if(this.lastOverNode){if(this.lastOverNode.ui&&!b.within(this.lastOverNode.ui.getEl())){this.onNodeOut(b,this.lastOverNode)}delete this.lastOverNode;Ext.getBody().un("mouseover",this.trackExit,this);this.trackingDoc=false}},delegateClick:function(c,d){if(this.beforeEvent(c)){if(c.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(c,this.getNode(c))}else{if(c.getTarget(".x-tree-ec-icon",1)){this.onIconClick(c,this.getNode(c))}else{if(this.getNodeTarget(c)){this.onNodeClick(c,this.getNode(c))}}}}else{this.checkContainerEvent(c,"click")}},delegateDblClick:function(c,d){if(this.beforeEvent(c)){if(this.getNodeTarget(c)){this.onNodeDblClick(c,this.getNode(c))}}else{this.checkContainerEvent(c,"dblclick")}},delegateContextMenu:function(c,d){if(this.beforeEvent(c)){if(this.getNodeTarget(c)){this.onNodeContextMenu(c,this.getNode(c))}}else{this.checkContainerEvent(c,"contextmenu")}},checkContainerEvent:function(c,d){if(this.disabled){c.stopEvent();return false}this.onContainerEvent(c,d)},onContainerEvent:function(c,d){this.tree.fireEvent("container"+d,this.tree,c)},onNodeClick:function(c,d){d.ui.onClick(c)},onNodeOver:function(c,d){this.lastOverNode=d;d.ui.onOver(c)},onNodeOut:function(c,d){d.ui.onOut(c)},onIconOver:function(c,d){d.ui.addClass("x-tree-ec-over")},onIconOut:function(c,d){d.ui.removeClass("x-tree-ec-over")},onIconClick:function(c,d){d.ui.ecClick(c)},onCheckboxClick:function(c,d){d.ui.onCheckChange(c)},onNodeDblClick:function(c,d){d.ui.onDblClick(c)},onNodeContextMenu:function(c,d){d.ui.onContextMenu(c)},beforeEvent:function(c){var d=this.getNode(c);if(this.disabled||!d||!d.ui){c.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(b){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,b);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(b){this.tree=b;b.mon(b.getTreeEl(),"keydown",this.onKeyDown,this);b.on("click",this.onNodeClick,this)},onNodeClick:function(d,c){this.select(d)},select:function(f,e){if(!Ext.fly(f.ui.wrap).isVisible()&&e){return e.call(this,f)}var d=this.selNode;if(f==d){f.ui.onSelectedChange(true)}else{if(this.fireEvent("beforeselect",this,f,d)!==false){if(d&&d.ui){d.ui.onSelectedChange(false)}this.selNode=f;f.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,f,d)}}return f},unselect:function(c,d){if(this.selNode==c){this.clearSelections(d)}},clearSelections:function(d){var c=this.selNode;if(c){c.ui.onSelectedChange(false);this.selNode=null;if(d!==true){this.fireEvent("selectionchange",this,null)}}return c},getSelectedNode:function(){return this.selNode},isSelected:function(b){return this.selNode==b},selectPrevious:function(e){if(!(e=e||this.selNode||this.lastSelNode)){return null}var f=e.previousSibling;if(f){if(!f.isExpanded()||f.childNodes.length<1){return this.select(f,this.selectPrevious)}else{var d=f.lastChild;while(d&&d.isExpanded()&&Ext.fly(d.ui.wrap).isVisible()&&d.childNodes.length>0){d=d.lastChild}return this.select(d,this.selectPrevious)}}else{if(e.parentNode&&(this.tree.rootVisible||!e.parentNode.isRoot)){return this.select(e.parentNode,this.selectPrevious)}}return null},selectNext:function(c){if(!(c=c||this.selNode||this.lastSelNode)){return null}if(c.firstChild&&c.isExpanded()&&Ext.fly(c.ui.wrap).isVisible()){return this.select(c.firstChild,this.selectNext)}else{if(c.nextSibling){return this.select(c.nextSibling,this.selectNext)}else{if(c.parentNode){var d=null;c.parentNode.bubble(function(){if(this.nextSibling){d=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext);return false}});return d}}}return null},onKeyDown:function(h){var e=this.selNode||this.lastSelNode;var g=this;if(!e){return}var f=h.getKey();switch(f){case h.DOWN:h.stopEvent();this.selectNext();break;case h.UP:h.stopEvent();this.selectPrevious();break;case h.RIGHT:h.preventDefault();if(e.hasChildNodes()){if(!e.isExpanded()){e.expand()}else{if(e.firstChild){this.select(e.firstChild,h)}}}break;case h.LEFT:h.preventDefault();if(e.hasChildNodes()&&e.isExpanded()){e.collapse()}else{if(e.parentNode&&(this.tree.rootVisible||e.parentNode!=this.tree.getRootNode())){this.select(e.parentNode,h)}}break}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(b){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,b);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(b){this.tree=b;b.mon(b.getTreeEl(),"keydown",this.onKeyDown,this);b.on("click",this.onNodeClick,this)},onNodeClick:function(d,c){if(c.ctrlKey&&this.isSelected(d)){this.unselect(d)}else{this.select(d,c,c.ctrlKey)}},select:function(e,f,d){if(d!==true){this.clearSelections(true)}if(this.isSelected(e)){this.lastSelNode=e;return e}this.selNodes.push(e);this.selMap[e.id]=e;this.lastSelNode=e;e.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return e},unselect:function(d){if(this.selMap[d.id]){d.ui.onSelectedChange(false);var f=this.selNodes;var e=f.indexOf(d);if(e!=-1){this.selNodes.splice(e,1)}delete this.selMap[d.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(e){var g=this.selNodes;if(g.length>0){for(var h=0,f=g.length;h<f;h++){g[h].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(e!==true){this.fireEvent("selectionchange",this,this.selNodes)}}},isSelected:function(b){return this.selMap[b.id]?true:false},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(b){this.nodeHash={};this.root=null;if(b){this.setRootNode(b)}this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(b){this.root=b;b.ownerTree=this;b.isRoot=true;this.registerNode(b);return b},getNodeById:function(b){return this.nodeHash[b]},registerNode:function(b){this.nodeHash[b.id]=b},unregisterNode:function(b){delete this.nodeHash[b.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(b){this.attributes=b||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,"xnode-");this.attributes.id=this.id}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(c){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var d=this.getOwnerTree();if(d){if(d.proxyNodeEvent.apply(d,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(b){this.firstChild=b},setLastChild:function(b){this.lastChild=b},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(l){var k=false;if(Ext.isArray(l)){k=l}else{if(arguments.length>1){k=arguments}}if(k){for(var m=0,i=k.length;m<i;m++){this.appendChild(k[m])}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,l)===false){return false}var h=this.childNodes.length;var n=l.parentNode;if(n){if(l.fireEvent("beforemove",l.getOwnerTree(),l,n,this,h)===false){return false}n.removeChild(l)}h=this.childNodes.length;if(h===0){this.setFirstChild(l)}this.childNodes.push(l);l.parentNode=this;var j=this.childNodes[h-1];if(j){l.previousSibling=j;j.nextSibling=l}else{l.previousSibling=null}l.nextSibling=null;this.setLastChild(l);l.setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,l,h);if(n){l.fireEvent("move",this.ownerTree,l,n,this,h)}return l}},removeChild:function(f,d){var e=this.childNodes.indexOf(f);if(e==-1){return false}if(this.fireEvent("beforeremove",this.ownerTree,this,f)===false){return false}this.childNodes.splice(e,1);if(f.previousSibling){f.previousSibling.nextSibling=f.nextSibling}if(f.nextSibling){f.nextSibling.previousSibling=f.previousSibling}if(this.firstChild==f){this.setFirstChild(f.nextSibling)}if(this.lastChild==f){this.setLastChild(f.previousSibling)}this.fireEvent("remove",this.ownerTree,this,f);if(d){f.destroy(true)}else{f.clear()}return f},clear:function(b){this.setOwnerTree(null,b);this.parentNode=this.previousSibling=this.nextSibling=null;if(b){this.firstChild=this.lastChild=null}},destroy:function(b){if(b===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(a){a.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(k,h){if(!h){return this.appendChild(k)}if(k==h){return false}if(this.fireEvent("beforeinsert",this.ownerTree,this,k,h)===false){return false}var g=this.childNodes.indexOf(h);var l=k.parentNode;var j=g;if(l==this&&this.childNodes.indexOf(k)<g){j--}if(l){if(k.fireEvent("beforemove",k.getOwnerTree(),k,l,this,g,h)===false){return false}l.removeChild(k)}if(j===0){this.setFirstChild(k)}this.childNodes.splice(j,0,k);k.parentNode=this;var i=this.childNodes[j-1];if(i){k.previousSibling=i;i.nextSibling=k}else{k.previousSibling=null}k.nextSibling=h;h.previousSibling=k;k.setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,k,h);if(l){k.fireEvent("move",this.ownerTree,k,l,this,j,h)}return k},remove:function(b){if(this.parentNode){this.parentNode.removeChild(this,b)}return this},removeAll:function(e){var f=this.childNodes,d;while((d=f[0])){this.removeChild(d,e)}return this},item:function(b){return this.childNodes[b]},replaceChild:function(e,f){var d=f?f.nextSibling:null;this.removeChild(f);this.insertBefore(e,d);return f},indexOf:function(b){return this.childNodes.indexOf(b)},getOwnerTree:function(){if(!this.ownerTree){var b=this;while(b){if(b.ownerTree){this.ownerTree=b.ownerTree;break}b=b.parentNode}}return this.ownerTree},getDepth:function(){var c=0;var d=this;while(d.parentNode){++c;d=d.parentNode}return c},setOwnerTree:function(d,c){if(d!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=d;if(c!==true){Ext.each(this.childNodes,function(a){a.setOwnerTree(d)})}if(d){d.registerNode(this)}}},setId:function(c){if(c!==this.id){var d=this.ownerTree;if(d){d.unregisterNode(this)}this.id=this.attributes.id=c;if(d){d.registerNode(this)}this.onIdChange(c)}},onIdChange:Ext.emptyFn,getPath:function(h){h=h||"id";var f=this.parentNode;var b=[this.attributes[h]];while(f){b.unshift(f.attributes[h]);f=f.parentNode}var g=this.getOwnerTree().pathSeparator;return g+b.join(g)},bubble:function(h,e,f){var g=this;while(g){if(h.apply(e||g,f||[g])===false){break}g=g.parentNode}},cascade:function(i,j,g){if(i.apply(j||this,g||[this])!==false){var k=this.childNodes;for(var l=0,h=k.length;l<h;l++){k[l].cascade(i,j,g)}}},eachChild:function(i,j,g){var k=this.childNodes;for(var l=0,h=k.length;l<h;l++){if(i.apply(j||k[l],g||[k[l]])===false){break}}},findChild:function(d,f,e){return this.findChildBy(function(){return this.attributes[d]==f},null,e)},findChildBy:function(l,m,i){var n=this.childNodes,j=n.length,o=0,k,p;for(;o<j;o++){k=n[o];if(l.call(m||k,k)===true){return k}else{if(i){p=k.findChildBy(l,m,i);if(p!=null){return p}}}}return null},sort:function(l,m){var n=this.childNodes;var i=n.length;if(i>0){var k=m?function(){l.apply(m,arguments)}:l;n.sort(k);for(var h=0;h<i;h++){var j=n[h];j.previousSibling=n[h-1];j.nextSibling=n[h+1];if(h===0){this.setFirstChild(j)}if(h==i-1){this.setLastChild(j)}}}},contains:function(b){return b.isAncestor(this)},isAncestor:function(d){var c=this.parentNode;while(c){if(c==d){return true}c=c.parentNode}return false},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(d){d=d||{};if(Ext.isString(d)){d={text:d}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,d);this.expanded=d.expanded===true;this.isTarget=d.isTarget!==false;this.draggable=d.draggable!==false&&d.allowDrag!==false;this.allowChildren=d.allowChildren!==false&&d.allowDrop!==false;this.text=d.text;this.disabled=d.disabled===true;this.hidden=d.hidden===true;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var c=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new c(this)},preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var b;return this.loader||((b=this.getOwnerTree())&&b.loader?b.loader:(this.loader=new Ext.tree.TreeLoader()))},setFirstChild:function(d){var c=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,d);if(this.childrenRendered&&c&&d!=c){c.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(c){var d=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,c);if(this.childrenRendered&&d&&c!=d){d.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(c){if(!c.render&&!Ext.isArray(c)){c=this.getLoader().createNode(c)}var d=Ext.tree.TreeNode.superclass.appendChild.call(this,c);if(d&&this.childrenRendered){d.render()}this.ui.updateExpandIcon();return d},removeChild:function(d,e){this.ownerTree.getSelectionModel().unselect(d);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!e){var f=d.ui.rendered;if(f){d.ui.remove()}if(f&&this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}}return d},insertBefore:function(f,e){if(!f.render){f=this.getLoader().createNode(f)}var d=Ext.tree.TreeNode.superclass.insertBefore.call(this,f,e);if(d&&e&&this.childrenRendered){f.render()}this.ui.updateExpandIcon();return d},setText:function(c){var d=this.text;this.text=this.attributes.text=c;if(this.rendered){this.ui.onTextChange(this,c,d)}this.fireEvent("textchange",this,c,d)},setIconCls:function(c){var d=this.attributes.iconCls;this.attributes.iconCls=c;if(this.rendered){this.ui.onIconClsChange(this,c,d)}},setTooltip:function(d,c){this.attributes.qtip=d;this.attributes.qtipTitle=c;if(this.rendered){this.ui.onTipChange(this,d,c)}},setIcon:function(b){this.attributes.icon=b;if(this.rendered){this.ui.onIconChange(this,b)}},setHref:function(d,c){this.attributes.href=d;this.attributes.hrefTarget=c;if(this.rendered){this.ui.onHrefChange(this,d,c)}},setCls:function(c){var d=this.attributes.cls;this.attributes.cls=c;if(this.rendered){this.ui.onClsChange(this,c,d)}},select:function(){var b=this.getOwnerTree();if(b){b.getSelectionModel().select(this)}},unselect:function(d){var c=this.getOwnerTree();if(c){c.getSelectionModel().unselect(this,d)}},isSelected:function(){var b=this.getOwnerTree();return b?b.getSelectionModel().isSelected(this):false},expand:function(f,h,g,e){if(!this.expanded){if(this.fireEvent("beforeexpand",this,f,h)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&h!==false)||h){this.ui.animExpand(function(){this.fireEvent("expand",this);this.runCallback(g,e||this,[this]);if(f===true){this.expandChildNodes(true,true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);this.runCallback(g,e||this,[this])}}else{this.runCallback(g,e||this,[this])}if(f===true){this.expandChildNodes(true)}},runCallback:function(e,f,d){if(Ext.isFunction(e)){e.apply(f,d)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(h,k,j,l){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,h,k)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&k!==false)||k){this.ui.animCollapse(function(){this.fireEvent("collapse",this);this.runCallback(j,l||this,[this]);if(h===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this);this.runCallback(j,l||this,[this])}}else{if(!this.expanded){this.runCallback(j,l||this,[this])}}if(h===true){var m=this.childNodes;for(var n=0,i=m.length;n<i;n++){m[n].collapse(true,false)}}},delayedExpand:function(b){if(!this.expandProcId){this.expandProcId=this.expand.defer(b,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(f,d){var e=this.getOwnerTree();e.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var a=e.getNodeById(this.id);e.getTreeEl().scrollChildIntoView(a.ui.anchor);this.runCallback(f,d||this,[this])}.createDelegate(this))},expandChildNodes:function(f,h){var i=this.childNodes,j,g=i.length;for(j=0;j<g;j++){i[j].expand(f,h)}},collapseChildNodes:function(e){var g=this.childNodes;for(var h=0,f=g.length;h<f;h++){g[h].collapse(e)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent("disabledchange",this,false)},renderChildren:function(e){if(e!==false){this.fireEvent("beforechildrenrendered",this)}var g=this.childNodes;for(var h=0,f=g.length;h<f;h++){g[h].render(true)}this.childrenRendered=true},sort:function(h,i){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var j=this.childNodes;for(var f=0,g=j.length;f<g;f++){j[f].render(true)}}},render:function(b){this.ui.render(b);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(f,h){if(h){this.ui.childIndent=null}this.ui.renderIndent();if(f===true&&this.childrenRendered){var i=this.childNodes;for(var j=0,g=i.length;j<g;j++){i[j].renderIndent(true,h)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(b){if(b===true){this.unselect(true)}Ext.tree.TreeNode.superclass.destroy.call(this,b);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(b){this.ui.onIdChange(b)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(b){this.loaded=b&&b.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(f,l,j,n){if(this.loading){var k;var m=function(){if(!this.loading){clearInterval(k);this.expand(f,l,j,n)}}.createDelegate(this);k=setInterval(m,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var i=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(i){i.load(this,this.loadComplete.createDelegate(this,[f,l,j,n]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,f,l,j,n)},isLoading:function(){return this.loading},loadComplete:function(f,h,g,e){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(f,h,g,e)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(c,d){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,c,d)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(b){Ext.apply(this,{node:b,rendered:false,animating:false,wasLeaf:true,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(b){if(this.rendered){this.ctNode.removeChild(b.ui.getEl())}},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(d,f,e){if(this.rendered){this.textNode.innerHTML=f}},onIconClsChange:function(f,e,d){if(this.rendered){Ext.fly(this.iconNode).replaceClass(d,e)}},onIconChange:function(d,e){if(this.rendered){var f=Ext.isEmpty(e);this.iconNode.src=f?this.emptyIcon:e;Ext.fly(this.iconNode)[f?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(e,h,g){if(this.rendered){var f=Ext.isDefined(g);if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",h);if(f){this.textNode.setAttributeNS("ext","qtitle",g)}}else{this.textNode.setAttribute("ext:qtip",h);if(f){this.textNode.setAttribute("ext:qtitle",g)}}}},onHrefChange:function(d,e,f){if(this.rendered){this.anchor.href=this.getHref(e);if(Ext.isDefined(f)){this.anchor.target=f}}},onClsChange:function(f,e,d){if(this.rendered){Ext.fly(this.elNode).replaceClass(d,e)}},onDisableChange:function(d,c){this.disabled=c;if(this.checkbox){this.checkbox.disabled=c}this[c?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(b){if(b){this.focus();this.addClass("x-tree-selected")}else{this.removeClass("x-tree-selected")}},onMove:function(j,l,n,m,o,i){this.childIndent=null;if(this.rendered){var k=m.ui.getContainer();if(!k){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}var p=i?i.ui.getEl():null;if(p){k.insertBefore(this.wrap,p)}else{k.appendChild(this.wrap)}this.node.renderIndent(true,n!=m)}},addClass:function(b){if(this.elNode){Ext.fly(this.elNode).addClass(b)}},removeClass:function(b){if(this.elNode){Ext.fly(this.elNode).removeClass(b)}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled){this.onDisableChange(this.node,true)}if(this.node.hidden){this.hide()}var c=this.node.getOwnerTree();var d=c.enableDD||c.enableDrag||c.enableDrop;if(d&&(!this.node.isRoot||c.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=""}},onContextMenu:function(b){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){b.preventDefault();this.focus();this.fireEvent("contextmenu",this.node,b)}},onClick:function(d){if(this.dropping){d.stopEvent();return}if(this.fireEvent("beforeclick",this.node,d)!==false){var a=d.getTarget("a");if(!this.disabled&&this.node.attributes.href&&a){this.fireEvent("click",this.node,d);return}else{if(a&&d.ctrlKey){d.stopEvent()}}d.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,d)}else{d.stopEvent()}},onDblClick:function(b){b.preventDefault();if(this.disabled){return}if(this.fireEvent("beforedblclick",this.node,b)!==false){if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("dblclick",this.node,b)}},onOver:function(b){this.addClass("x-tree-node-over")},onOut:function(b){this.removeClass("x-tree-node-over")},onCheckChange:function(){var b=this.checkbox.checked;this.checkbox.defaultChecked=b;this.node.attributes.checked=b;this.fireEvent("checkchange",this.node,b)},ecClick:function(b){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(f){}}else{try{var d=this.node.getOwnerTree().getTreeEl().dom;var e=d.scrollLeft;this.anchor.focus();d.scrollLeft=e}catch(f){}}},toggleCheck:function(c){var d=this.checkbox;if(d){d.checked=(c===undefined?!d.checked:c);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(b){}},animExpand:function(c){var d=Ext.get(this.ctNode);d.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(c);return}this.animating=true;this.updateExpandIcon();d.slideIn("t",{callback:function(){this.animating=false;Ext.callback(c)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var b=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(b.hlColor||"C3DAF9",{endColor:b.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(c){var d=Ext.get(this.ctNode);d.enableDisplayMode("block");d.stopFx();this.animating=true;this.updateExpandIcon();d.slideOut("t",{callback:function(){this.animating=false;Ext.callback(c)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(b){b.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(h){var f=this.node,a=f.attributes;var g=f.parentNode?f.parentNode.ui.getContainer():f.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(f,a,g,h);if(a.qtip){this.onTipChange(f,a.qtip,a.qtipTitle)}else{if(a.qtipCfg){a.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(a.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(h===true){g.appendChild(this.wrap)}}},renderElements:function(q,l,m,a){this.indentMarkup=q.parentNode?q.parentNode.ui.getChildIndent():"";var p=Ext.isBoolean(l.checked),t,s=this.getHref(l.href),r=['<li class="x-tree-node"><div ext:tree-node-id="',q.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',l.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',l.icon||this.emptyIcon,'" class="x-tree-node-icon',(l.icon?" x-tree-node-inline-icon":""),(l.iconCls?" "+l.iconCls:""),'" unselectable="on" />',p?('<input class="x-tree-node-cb" type="checkbox" '+(l.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',s,'" tabIndex="1" ',l.hrefTarget?' target="'+l.hrefTarget+'"':"",'><span unselectable="on">',q.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");if(a!==true&&q.nextSibling&&(t=q.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",t,r)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",m,r)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var n=this.elNode.childNodes;this.indentNode=n[0];this.ecNode=n[1];this.iconNode=n[2];var o=3;if(p){this.checkbox=n[3];this.checkbox.defaultChecked=this.checkbox.checked;o++}this.anchor=n[o];this.textNode=n[o].firstChild},getHref:function(b){return Ext.isEmpty(b)?(Ext.isGecko?"":"#"):b},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var i=this.node,k,l,h=i.isLast()?"x-tree-elbow-end":"x-tree-elbow",j=i.hasChildNodes();if(j||i.attributes.expandable){if(i.expanded){h+="-minus";k="x-tree-node-collapsed";l="x-tree-node-expanded"}else{h+="-plus";k="x-tree-node-expanded";l="x-tree-node-collapsed"}if(this.wasLeaf){this.removeClass("x-tree-node-leaf");this.wasLeaf=false}if(this.c1!=k||this.c2!=l){Ext.fly(this.elNode).replaceClass(k,l);this.c1=k;this.c2=l}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed");delete this.c1;delete this.c2;this.wasLeaf=true}}var g="x-tree-ec-icon "+h;if(this.ecc!=g){this.ecNode.className=g;this.ecc=g}}},onIdChange:function(b){if(this.rendered){this.elNode.setAttribute("ext:tree-node-id",b)}},getChildIndent:function(){if(!this.childIndent){var d=[],c=this.node;while(c){if(!c.isRoot||(c.isRoot&&c.ownerTree.rootVisible)){if(!c.isLast()){d.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')}else{d.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />')}}c=c.parentNode}this.childIndent=d.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var d="",c=this.node.parentNode;if(c){d=c.ui.getChildIndent()}if(this.indentMarkup!=d){this.indentNode.innerHTML=d;this.indentMarkup=d}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(b){if(this[b]){Ext.fly(this[b]).remove();delete this[b]}},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var b=this.node.ownerTree.innerCt.dom;this.node.expanded=true;b.innerHTML='<div class="x-tree-root-node"></div>';this.wrap=this.ctNode=b.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(b){this.baseParams={};Ext.apply(this,b);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,paramOrder:undefined,paramsAsHash:false,nodeParameter:"node",directFn:undefined,load:function(d,f,e){if(this.clearOnLoad){while(d.firstChild){d.removeChild(d.firstChild)}}if(this.doPreload(d)){this.runCallback(f,e||d,[d])}else{if(this.directFn||this.dataUrl||this.url){this.requestData(d,f,e||d)}}},doPreload:function(i){if(i.attributes.children){if(i.childNodes.length<1){var j=i.attributes.children;i.beginUpdate();for(var f=0,g=j.length;f<g;f++){var h=i.appendChild(this.createNode(j[f]));if(this.preloadChildren){this.doPreload(h)}}i.endUpdate()}return true}return false},getParams:function(k){var l=Ext.apply({},this.baseParams),j=this.nodeParameter,h=this.paramOrder;j&&(l[j]=k.id);if(this.directFn){var n=[k.id];if(h){if(j&&h.indexOf(j)>-1){n=[]}for(var m=0,i=h.length;m<i;m++){n.push(l[h[m]])}}else{if(this.paramsAsHash){n=[l]}}return n}else{return l}},requestData:function(h,g,e){if(this.fireEvent("beforeload",this,h,g)!==false){if(this.directFn){var f=this.getParams(h);f.push(this.processDirectResponse.createDelegate(this,[{callback:g,node:h,scope:e}],true));this.directFn.apply(window,f)}else{this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:g,node:h,scope:e},params:this.getParams(h)})}}else{this.runCallback(g,e||h,[])}},processDirectResponse:function(e,d,f){if(d.status){this.handleResponse({responseData:Ext.isArray(e)?e:null,responseText:e,argument:f})}else{this.handleFailure({argument:f})}},runCallback:function(e,f,d){if(Ext.isFunction(e)){e.apply(f,d)}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(q,r,m,i){var e=q.responseText;try{var t=q.responseData||Ext.decode(e);r.beginUpdate();for(var p=0,o=t.length;p<o;p++){var s=this.createNode(t[p]);if(s){r.appendChild(s)}}r.endUpdate();this.runCallback(m,i||r,[r])}catch(n){this.handleFailure(q)}},handleResponse:function(d){this.transId=false;var a=d.argument;this.processResponse(d,a.node,a.callback,a.scope);this.fireEvent("load",this,a.node,d)},handleFailure:function(d){this.transId=false;var a=d.argument;this.fireEvent("loadexception",this,a.node,d);this.runCallback(a.callback,a.scope||a.node,[a.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(d,c){this.tree=d;this.filtered={};Ext.apply(this,c)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(i,g,f){g=g||"text";var j;if(typeof i=="string"){var h=i.length;if(h==0&&this.clearBlank){this.clear();return}i=i.toLowerCase();j=function(a){return a.attributes[g].substr(0,h).toLowerCase()==i}}else{if(i.exec){j=function(a){return i.test(a.attributes[g])}}else{throw"Illegal filter type, must be string or regex"}}this.filterBy(j,null,f)},filterBy:function(o,p,f){f=f||this.tree.root;if(this.autoClear){this.clear()}var j=this.filtered,k=this.reverse;var n=function(a){if(a==f){return true}if(j[a.id]){return false}var b=o.call(p||a,a);if(!b||k){j[a.id]=a;a.ui.hide();return false}return true};f.cascade(n);if(this.remove){for(var l in j){if(typeof l!="function"){var m=j[l];if(m&&m.parentNode){m.parentNode.removeChild(m)}}}}},clear:function(){var e=this.tree;var f=this.filtered;for(var g in f){if(typeof g!="function"){var h=f[g];if(h){h.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(j,p){Ext.apply(this,p);j.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var n=this.dir&&this.dir.toLowerCase()=="desc",k=this.property||"text",o=this.sortType,l=this.folderSort,i=this.caseSensitive===true,m=this.leafAttr||"leaf";if(Ext.isString(o)){o=Ext.data.SortTypes[o]}this.sortFn=function(h,b){var d=h.attributes,e=b.attributes;if(l){if(d[m]&&!e[m]){return 1}if(!d[m]&&e[m]){return -1}}var a=d[k],c=e[k],f=o?o(a):(i?a:a.toUpperCase()),g=o?o(c):(i?c:c.toUpperCase());if(f<g){return n?1:-1}else{if(f>g){return n?-1:1}}return 0}},doSort:function(b){b.sort(this.sortFn)},updateSort:function(d,c){if(c.childrenRendered){this.doSort.defer(1,this,[c])}},updateSortParent:function(d){var c=d.parentNode;if(c&&c.childrenRendered){this.doSort.defer(1,this,[c])}}});if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(d,c){this.allowParentInsert=c.allowParentInsert||false;this.allowContainerDrop=c.allowContainerDrop||false;this.appendOnly=c.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,d.getTreeEl(),c);this.tree=d;this.dragOverData={};this.lastInsertClass="x-tree-no-status"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1000,expandNode:function(b){if(b.hasChildNodes()&&!b.isExpanded()){b.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(b){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[b])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(r,e,l,o,p){if(!r||!p){return false}var n=r.node;var m=p.node;if(!(n&&n.isTarget&&e)){return false}if(e=="append"&&n.allowChildren===false){return false}if((e=="above"||e=="below")&&(n.parentNode&&n.parentNode.allowChildren===false)){return false}if(m&&(n==m||m.contains(n))){return false}var q=this.dragOverData;q.tree=this.tree;q.target=n;q.data=p;q.point=e;q.source=l;q.rawEvent=o;q.dropNode=m;q.cancel=false;var k=this.tree.fireEvent("nodedragover",q);return q.cancel===false&&k!==false},getDropPoint:function(r,s,n){var e=s.node;if(e.isRoot){return e.allowChildren!==false?"append":false}var u=s.ddel;var b=Ext.lib.Dom.getY(u),p=b+u.offsetHeight;var q=Ext.lib.Event.getPageY(r);var o=e.allowChildren===false||e.isLeaf();if(this.appendOnly||e.parentNode.allowChildren===false){return o?false:"append"}var t=false;if(!this.allowParentInsert){t=e.hasChildNodes()&&e.isExpanded()}var v=(p-b)/(o?2:3);if(q>=b&&q<(b+v)){return"above"}else{if(!t&&(o||q>=p-v&&q<=p)){return"below"}else{return"append"}}},onNodeEnter:function(g,f,h,e){this.cancelExpand()},onContainerOver:function(e,f,d){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",e,f,d)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(q,l,m,n){var e=this.getDropPoint(m,q,l);var p=q.node;if(!this.expandProcId&&e=="append"&&p.hasChildNodes()&&!q.node.isExpanded()){this.queueExpand(p)}else{if(e!="append"){this.cancelExpand()}}var o=this.dropNotAllowed;if(this.isValidDropPoint(q,e,l,m,n)){if(e){var r=q.ddel;var k;if(e=="above"){o=q.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between";k="x-tree-drag-insert-above"}else{if(e=="below"){o=q.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between";k="x-tree-drag-insert-below"}else{o="x-tree-drop-ok-append";k="x-tree-drag-append"}}if(this.lastInsertClass!=k){Ext.fly(r).replaceClass(this.lastInsertClass,k);this.lastInsertClass=k}}}return o},onNodeOut:function(g,f,h,e){this.cancelExpand();this.removeDropIndicators(g)},onNodeDrop:function(j,e,k,m){var i=this.getDropPoint(k,j,e);var l=j.node;l.ui.startDrop();if(!this.isValidDropPoint(j,i,e,k,m)){l.ui.endDrop();return false}var n=m.node||(e.getTreeNode?e.getTreeNode(m,l,i,k):null);return this.processDrop(l,m,i,e,k,n)},onContainerDrop:function(g,h,j){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",g,h,j)){var i=this.tree.getRootNode();i.ui.startDrop();var e=j.node||(g.getTreeNode?g.getTreeNode(j,i,"append",h):null);return this.processDrop(i,j,"append",g,h,e)}return false},processDrop:function(k,m,e,j,l,o){var n={tree:this.tree,target:k,data:m,point:e,source:j,rawEvent:l,dropNode:o,cancel:!o,dropStatus:false};var p=this.tree.fireEvent("beforenodedrop",n);if(p===false||n.cancel===true||!n.dropNode){k.ui.endDrop();return n.dropStatus}k=n.target;if(e=="append"&&!k.isExpanded()){k.expand(false,null,function(){this.completeDrop(n)}.createDelegate(this))}else{this.completeDrop(n)}return true},completeDrop:function(j){var m=j.dropNode,l=j.point,n=j.target;if(!Ext.isArray(m)){m=[m]}var k;for(var h=0,i=m.length;h<i;h++){k=m[h];if(l=="above"){n.parentNode.insertBefore(k,n)}else{if(l=="below"){n.parentNode.insertBefore(k,n.nextSibling)}else{n.appendChild(k)}}}k.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){k.ui.highlight()}n.ui.endDrop();this.tree.fireEvent("nodedrop",j)},afterNodeMoved:function(g,j,h,i,e){if(Ext.enableFx&&this.tree.hlDrop){e.ui.focus();e.ui.highlight()}this.tree.fireEvent("nodedrop",this.tree,i,j,g,h)},getTree:function(){return this.tree},removeDropIndicators:function(c){if(c&&c.ddel){var d=c.ddel;Ext.fly(d).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(d,e,f){this.cancelExpand();return true},afterRepair:function(b){if(b&&Ext.enableFx){b.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(d,c){Ext.tree.TreeDragZone.superclass.constructor.call(this,d.innerCt,c);this.tree=d};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(e,d){var f=e.node;return f&&f.draggable&&!f.disabled},onInitDrag:function(c){var d=this.dragData;this.tree.getSelectionModel().select(d.node);this.tree.eventModel.disable();this.proxy.update("");d.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,d.node,c)},getRepairXY:function(c,d){return d.node.ui.getDDRepairXY()},onEndDrag:function(d,c){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,d.node,c)},onValidDrop:function(e,d,f){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,e,d);this.hideProxy()},beforeInvalidDrop:function(e,f){var d=this.tree.getSelectionModel();d.clearSelections();d.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false}})}Ext.tree.TreeEditor=function(f,h,e){h=h||{};var g=h.events?h:new Ext.form.TextField(h);Ext.tree.TreeEditor.superclass.constructor.call(this,g,e);this.tree=f;if(!f.rendered){f.on("render",this.initEditor,this)}else{this.initEditor(f)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:false,hideEl:false,cls:"x-small-editor x-tree-editor",shim:false,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(b){b.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(f,j){var h=this.tree.getTreeEl().dom,i=j.dom;if(h.scrollLeft>i.offsetLeft){h.scrollLeft=i.offsetLeft}var g=Math.min(this.maxWidth,(h.clientWidth>20?h.clientWidth:h.offsetWidth)-Math.max(0,i.offsetLeft-h.scrollLeft)-5);this.setSize(g,"")},triggerEdit:function(e,f){this.completeEdit();if(e.attributes.editable!==false){this.editNode=e;if(this.tree.autoScroll){Ext.fly(e.ui.getEl()).scrollIntoView(this.tree.body)}var d=e.text||"";if(!Ext.isGecko&&Ext.isEmpty(e.text)){e.setText("&#160;")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[e.ui.textNode,d]);return false}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(d,c){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(d)){c.stopEvent();return this.triggerEdit(d)}},onNodeDblClick:function(d,c){clearTimeout(this.autoEditTimer)},updateNode:function(d,c){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(c)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(f,d){var e=d.getKey();if(e==d.ESC){d.stopEvent();this.cancelEdit()}else{if(e==d.ENTER&&!d.hasModifier()){d.stopEvent();this.completeEdit()}}},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var b=this.tree;b.un("beforeclick",this.beforeNodeClick,this);b.un("dblclick",this.onNodeDblClick,this)}});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,enableScrolling:true,maxHeight:null,scrollIncrement:24,showSeparator:true,defaultOffsets:[0,0],plain:false,floating:true,zIndex:15000,hidden:true,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:true,defaultType:"menuitem",bufferResize:false,initComponent:function(){if(Ext.isArray(this.initialConfig)){Ext.apply(this,{items:this.initialConfig})}this.addEvents("click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);if(this.floating){Ext.EventManager.onWindowResize(this.hide,this)}else{if(this.initialConfig.hidden!==false){this.hidden=false}this.internalDefaults={hideOnClick:false}}Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var b=this.doLayout.createDelegate(this,[]);this.on({add:b,remove:b})}},getLayoutTarget:function(){return this.ul},onRender:function(d,e){if(!d){d=Ext.getBody()}var f={id:this.getId(),cls:"x-menu "+((this.floating)?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};if(this.floating){this.el=new Ext.Layer({shadow:this.shadow,dh:f,constrain:false,parentEl:d,zindex:this.zIndex})}else{this.el=d.createChild(f)}Ext.menu.Menu.superclass.onRender.call(this,d,e);if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}this.focusEl=this.el.child("a.x-menu-focus");this.ul=this.el.child("ul.x-menu-list");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});if(this.enableScrolling){this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})}},findTargetItem:function(c){var d=c.getTarget(".x-menu-list-item",this.ul,true);if(d&&d.menuItemId){return this.items.get(d.menuItemId)}},onClick:function(c){var d=this.findTargetItem(c);if(d){if(d.isFormField){this.setActiveItem(d)}else{if(d instanceof Ext.menu.BaseItem){if(d.menu&&this.ignoreParentClicks){d.expandMenu();c.preventDefault()}else{if(d.onClick){d.onClick(c);this.fireEvent("click",this,d,c)}}}}}},setActiveItem:function(d,c){if(d!=this.activeItem){this.deactivateActive();if((this.activeItem=d).isFormField){d.focus()}else{d.activate(c)}}else{if(c){d.expandMenu()}}},deactivateActive:function(){var a=this.activeItem;if(a){if(a.isFormField){if(a.collapse){a.collapse()}}else{a.deactivate()}delete this.activeItem}},tryActivate:function(i,j){var g=this.items;for(var l=i,h=g.length;l>=0&&l<h;l+=j){var k=g.get(l);if(k.isVisible()&&!k.disabled&&(k.canActivate||k.isFormField)){this.setActiveItem(k,false);return k}}return false},onMouseOver:function(c){var d=this.findTargetItem(c);if(d){if(d.canActivate&&!d.disabled){this.setActiveItem(d,true)}}this.over=true;this.fireEvent("mouseover",this,c,d)},onMouseOut:function(c){var d=this.findTargetItem(c);if(d){if(d==this.activeItem&&d.shouldDeactivate&&d.shouldDeactivate(c)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent("mouseout",this,c,d)},onScroll:function(g,e){if(g){g.stopEvent()}var f=this.ul.dom,h=Ext.fly(e).is(".x-menu-scroller-top");f.scrollTop+=this.scrollIncrement*(h?-1:1);if(h?f.scrollTop<=0:f.scrollTop+this.activeMax>=f.scrollHeight){this.onScrollerOut(null,e)}},onScrollerIn:function(g,e){var f=this.ul.dom,h=Ext.fly(e).is(".x-menu-scroller-top");if(h?f.scrollTop>0:f.scrollTop+this.activeMax<f.scrollHeight){Ext.fly(e).addClass(["x-menu-item-active","x-menu-scroller-active"])}},onScrollerOut:function(c,d){Ext.fly(d).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(d,f,e){if(this.floating){this.parentMenu=e;if(!this.el){this.render();this.doLayout(false,true)}this.showAt(this.el.getAlignToXY(d,f||this.defaultAlign,this.defaultOffsets),e)}else{Ext.menu.Menu.superclass.show.call(this)}},showAt:function(c,d){if(this.fireEvent("beforeshow",this)!==false){this.parentMenu=d;if(!this.el){this.render()}if(this.enableScrolling){this.el.setXY(c);c[1]=this.constrainScroll(c[1]);c=[this.el.adjustForConstraints(c)[0],c[1]]}else{c=this.el.adjustForConstraints(c)}this.el.setXY(c);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent("autosize",this);if(!Ext.isIE8){this.el.repaint()}}this.hidden=false;this.focus();this.fireEvent("show",this)}},constrainScroll:function(k){var i,o=this.ul.setHeight("auto").getHeight(),j=k,l,n,m,p;if(this.floating){n=Ext.fly(this.el.dom.parentNode);m=n.getScroll().top;p=n.getViewSize().height;l=k-m;i=this.maxHeight?this.maxHeight:p-l;if(o>p){i=p;j=k-l}else{if(i<o){j=k-(o-i);i=o}}}else{i=this.getHeight()}if(this.maxHeight){i=Math.min(this.maxHeight,i)}if(o>i&&i>0){this.activeMax=i-this.scrollerHeight*2-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0);this.ul.setHeight(this.activeMax);this.createScrollers();this.el.select(".x-menu-scroller").setDisplayed("")}else{this.ul.setHeight(o);this.el.select(".x-menu-scroller").setDisplayed("none")}this.ul.dom.scrollTop=0;return j},createScrollers:function(){if(!this.scroller){this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})};this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],false)}});this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],false)}})}},onLayout:function(){if(this.isVisible()){if(this.enableScrolling){this.constrainScroll(this.el.getTop())}if(this.floating){this.el.sync()}}},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(b){if(!this.isDestroyed){this.deepHide=b;Ext.menu.Menu.superclass.hide.call(this);delete this.deepHide}},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();if(this.el&&this.floating){this.el.hide()}var b=this.parentMenu;if(this.deepHide===true&&b){if(b.floating){b.hide(true)}else{b.deactivateActive()}}},lookupComponent:function(b){if(Ext.isString(b)){b=(b=="separator"||b=="-")?new Ext.menu.Separator():new Ext.menu.TextItem(b);this.applyDefaults(b)}else{if(Ext.isObject(b)){b=this.getMenuItem(b)}else{if(b.tagName||b.el){b=new Ext.BoxComponent({el:b})}}}return b},applyDefaults:function(c){if(!Ext.isString(c)){c=Ext.menu.Menu.superclass.applyDefaults.call(this,c);var d=this.internalDefaults;if(d){if(c.events){Ext.applyIf(c.initialConfig,d);Ext.apply(c,d)}else{Ext.applyIf(c,d)}}}return c},getMenuItem:function(b){b.ownerCt=this;if(!b.isXType){if(!b.xtype&&Ext.isBoolean(b.checked)){return new Ext.menu.CheckItem(b)}return Ext.create(b,this.defaultType)}return b},addSeparator:function(){return this.add(new Ext.menu.Separator())},addElement:function(b){return this.add(new Ext.menu.BaseItem({el:b}))},addItem:function(b){return this.add(b)},addMenuItem:function(b){return this.add(this.getMenuItem(b))},addText:function(b){return this.add(new Ext.menu.TextItem(b))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var d=this.parentMenu;if(d&&d.activeChild==this){delete d.activeChild}delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}var c=this.scroller;if(c){Ext.destroy(c.topRepeater,c.bottomRepeater,c.top,c.bottom)}Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg("menu",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function d(a,b){if(!b.tryActivate(b.items.indexOf(b.activeItem)-1,-1)){b.tryActivate(b.items.length-1,-1)}}function c(a,b){if(!b.tryActivate(b.items.indexOf(b.activeItem)+1,1)){b.tryActivate(0,1)}}return{constructor:function(a){Ext.menu.MenuNav.superclass.constructor.call(this,a.el);this.scope=this.menu=a},doRelay:function(a,b){var e=a.getKey();if(this.menu.activeItem&&this.menu.activeItem.isFormField&&e!=a.TAB){return false}if(!this.menu.activeItem&&a.isNavKeyPress()&&e!=a.SPACE&&e!=a.RETURN){this.menu.tryActivate(0,1);return false}return b.call(this.scope||this,a,this.menu)},tab:function(a,b){a.stopEvent();if(a.shiftKey){d(a,b)}else{c(a,b)}},up:d,down:c,right:function(a,b){if(b.activeItem){b.activeItem.expandMenu(true)}},left:function(a,b){b.hide();if(b.parentMenu&&b.parentMenu.activeItem){b.parentMenu.activeItem.activate()}},enter:function(a,b){if(b.activeItem){a.stopPropagation();b.activeItem.onClick(a);b.fireEvent("click",this,b.activeItem);return true}}}}());Ext.menu.MenuMgr=function(){var t,v,y,w={},z=false,p=new Date();function n(){t={};v=new Ext.util.MixedCollection();y=Ext.getDoc().addKeyListener(27,r);y.disable()}function r(){if(v&&v.length>0){var a=v.clone();a.each(function(b){b.hide()});return true}return false}function u(a){v.remove(a);if(v.length<1){y.disable();Ext.getDoc().un("mousedown",o);z=false}}function q(b){var a=v.last();p=new Date();v.add(b);if(!z){y.enable();Ext.getDoc().on("mousedown",o);z=true}if(b.parentMenu){b.getEl().setZIndex(parseInt(b.parentMenu.getEl().getStyle("z-index"),10)+3);b.parentMenu.activeChild=b}else{if(a&&!a.isDestroyed&&a.isVisible()){b.getEl().setZIndex(parseInt(a.getEl().getStyle("z-index"),10)+3)}}}function x(a){if(a.activeChild){a.activeChild.hide()}if(a.autoHideTimer){clearTimeout(a.autoHideTimer);delete a.autoHideTimer}}function s(b){var a=b.parentMenu;if(!a&&!b.allowOtherMenus){r()}else{if(a&&a.activeChild){a.activeChild.hide()}}}function o(a){if(p.getElapsed()>50&&v.length>0&&!a.getTarget(".x-menu")){r()}}return{hideAll:function(){return r()},register:function(a){if(!t){n()}t[a.id]=a;a.on({beforehide:x,hide:u,beforeshow:s,show:q})},get:function(a){if(typeof a=="string"){if(!t){return null}return t[a]}else{if(a.events){return a}else{if(typeof a.length=="number"){return new Ext.menu.Menu({items:a})}else{return Ext.create(a,"menu")}}}},unregister:function(a){delete t[a.id];a.un("beforehide",x);a.un("hide",u);a.un("beforeshow",s);a.un("show",q)},registerCheckable:function(b){var a=b.group;if(a){if(!w[a]){w[a]=[]}w[a].push(b)}},unregisterCheckable:function(b){var a=b.group;if(a){w[a].remove(b)}},onCheckChange:function(d,c){if(d.group&&c){var a=w[d.group],e=0,f=a.length,b;for(;e<f;e++){b=a[e];if(b!=d){b.setChecked(false)}}}},getCheckedItem:function(b){var a=w[b];if(a){for(var c=0,d=a.length;c<d;c++){if(a[c].checked){return a[c]}}}return null},setCheckedItem:function(c,a){var b=w[c];if(b){for(var d=0,e=b.length;d<e;d++){if(b[d].id==a){b[d].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:false,activeClass:"x-menu-item-active",hideOnClick:true,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this);this.addEvents("click","activate","deactivate");if(this.handler){this.on("click",this.handler,this.scope)}},onRender:function(c,d){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);if(this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu){this.parentMenu=this.ownerCt}else{this.container.addClass("x-menu-list-item");this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate})}},setHandler:function(c,d){if(this.handler){this.un("click",this.handler,this.scope)}this.on("click",this.handler=c,this.scope=d)},onClick:function(b){if(!this.disabled&&this.fireEvent("click",this,b)!==false&&(this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,b)!==false)){this.handleClick(b)}else{b.stopEvent()}},activate:function(){if(this.disabled){return false}var b=this.container;b.addClass(this.activeClass);this.region=b.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(b){return !this.region||!this.region.contains(b.getPoint())},handleClick:function(c){var d=this.parentMenu;if(this.hideOnClick){if(d.floating){this.clickHideDelayTimer=d.hide.defer(this.clickHideDelay,d,[true])}else{d.deactivateActive()}}},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer);Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg("menubaseitem",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:false,itemCls:"x-menu-text",constructor:function(b){if(typeof b=="string"){b={text:b}}Ext.menu.TextItem.superclass.constructor.call(this,b)},onRender:function(){var b=document.createElement("span");b.className=this.itemCls;b.innerHTML=this.text;this.el=b;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg("menutextitem",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:false,activeClass:"",onRender:function(d){var c=document.createElement("span");c.className=this.itemCls;c.innerHTML="&#160;";this.el=c;d.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg("menuseparator",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:true,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}},onRender:function(e,a){if(!this.itemTpl){this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls}" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>")}var f=this.getTemplateArgs();this.el=a?this.itemTpl.insertBefore(a,f,true):this.itemTpl.append(e,f,true);this.iconEl=this.el.child("img.x-menu-item-icon");this.textEl=this.el.child(".x-menu-item-text");if(!this.href){this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:true})}Ext.menu.Item.superclass.onRender.call(this,e,a)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(b){this.text=b||"&#160;";if(this.rendered){this.textEl.update(this.text);this.parentMenu.layout.doAutoSize()}},setIconClass:function(d){var c=this.iconCls;this.iconCls=d;if(this.rendered){this.iconEl.replaceClass(c,this.iconCls)}},beforeDestroy:function(){clearTimeout(this.showTimer);clearTimeout(this.hideTimer);if(this.menu){delete this.menu.ownerCt;this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(b){if(!this.href){b.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(b){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(b){this.expandMenu()}}return true},shouldDeactivate:function(b){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,b)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(b.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(b){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[b])}else{if(this.menu.isVisible()&&b){this.menu.tryActivate(0,1)}}}},deferExpand:function(b){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(b){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.reg("menuitem",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this);this.addEvents("beforecheckchange","checkchange");if(this.checkHandler){this.on("checkchange",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(b){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(d,e){var f=e===true;if(this.checked!=d&&(f||this.fireEvent("beforecheckchange",this,d)!==false)){Ext.menu.MenuMgr.onCheckChange(this,d);if(this.container){this.container[d?"addClass":"removeClass"]("x-menu-item-checked")}this.checked=d;if(!f){this.fireEvent("checkchange",this,d)}}},handleClick:function(b){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg("menucheckitem",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this);if(this.strict=(Ext.isIE7&&Ext.isStrict)){this.on("show",this.onShow,this,{single:true,delay:20})}Ext.apply(this,{plain:true,showSeparator:false,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,["select"]);this.on("show",this.picker.focus,this.picker);this.on("select",this.menuHide,this);if(this.handler){this.on("select",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}},onBeforeShow:function(){if(this.picker){this.picker.hideMonthPicker(true)}},onShow:function(){var b=this.picker.getEl();b.setWidth(b.getWidth())}});Ext.reg("datemenu",Ext.menu.DateMenu);Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:true,showSeparator:false,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))});this.palette.purgeListeners();Ext.menu.ColorMenu.superclass.initComponent.call(this);this.relayEvents(this.palette,["select"]);this.on("select",this.menuHide,this);if(this.handler){this.on("select",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}}});Ext.reg("colormenu",Ext.menu.ColorMenu);Ext.namespace("Ext.ux");Ext.ux.FormViewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.ux.FormViewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";if(this.renderTo!=""){this.el=Ext.get(this.renderTo)}else{this.el=Ext.get(document.forms[0])}this.el.addClass("formviewport");this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(a,b){this.fireEvent("resize",this,a,b,a,b)}});Ext.reg("formviewport",Ext.ux.FormViewport);Ext.ns("Ext.ux.layout");Ext.ux.layout.CenterLayout=Ext.extend(Ext.layout.FitLayout,{setItemSize:function(b,a){this.container.addClass("ux-layout-center");b.addClass("ux-layout-center-item");if(b&&a.height>0){if(b.width){a.width=b.width}b.setSize(a)}}});Ext.Container.LAYOUTS["ux.center"]=Ext.ux.layout.CenterLayout;Ext.ux.layout.RowLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,isValidParent:function(b,a){return b.getEl().dom.parentNode==this.innerCt.dom},onLayout:function(f,j){var b=f.items.items,g=b.length,a,c;if(!this.innerCt){j.addClass("ux-row-layout-ct");this.innerCt=j.createChild({cls:"x-row-inner"})}this.renderAll(f,this.innerCt);var k=j.getViewSize();if(k.width<1&&k.height<1){return}var d=k.height-j.getPadding("tb"),e=d;this.innerCt.setSize({height:d});for(c=0;c<g;c++){a=b[c];if(!a.rowHeight){e-=(a.getSize().height+a.getEl().getMargins("tb"))}}e=e<0?0:e;for(c=0;c<g;c++){a=b[c];if(a.rowHeight){a.setSize({height:Math.floor(a.rowHeight*e)-a.getEl().getMargins("tb")})}}}});Ext.Container.LAYOUTS["ux.row"]=Ext.ux.layout.RowLayout;Ext.ux.TabCloseMenu=Ext.extend(Object,{closeTabText:"Close Tab",closeOtherTabsText:"Close Other Tabs",showCloseAll:true,closeAllTabsText:"Close All Tabs",constructor:function(a){Ext.apply(this,a||{})},init:function(a){this.tabs=a;a.on({scope:this,contextmenu:this.onContextMenu,destroy:this.destroy})},destroy:function(){Ext.destroy(this.menu);delete this.menu;delete this.tabs;delete this.active},onContextMenu:function(b,c,g){this.active=c;var a=this.createMenu(),d=true,h=true,f=a.getComponent("closeall");a.getComponent("close").setDisabled(!c.closable);b.items.each(function(){if(this.closable){d=false;if(this!=c){h=false;return false}}});a.getComponent("closeothers").setDisabled(h);if(f){f.setDisabled(d)}g.stopEvent();a.showAt(g.getPoint())},createMenu:function(){if(!this.menu){var a=[{itemId:"close",text:this.closeTabText,scope:this,handler:this.onClose}];if(this.showCloseAll){a.push("-")}a.push({itemId:"closeothers",text:this.closeOtherTabsText,scope:this,handler:this.onCloseOthers});if(this.showCloseAll){a.push({itemId:"closeall",text:this.closeAllTabsText,scope:this,handler:this.onCloseAll})}this.menu=new Ext.menu.Menu({items:a})}return this.menu},onClose:function(){this.tabs.remove(this.active)},onCloseOthers:function(){this.doClose(true)},onCloseAll:function(){this.doClose(false)},doClose:function(b){var a=[];this.tabs.items.each(function(c){if(c.closable){if(!b||c!=this.active){a.push(c)}}},this);Ext.each(a,function(c){this.tabs.remove(c)},this)}});Ext.preg("tabclosemenu",Ext.ux.TabCloseMenu);