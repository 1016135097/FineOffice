Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,submitValue:true,isFormField:true,msgDisplay:"",hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(h,f){if(!this.el){var e=this.getAutoCreate();if(!e.name){e.name=this.name||this.id}if(this.inputType){e.type=this.inputType}this.autoEl=e}Ext.form.Field.superclass.onRender.call(this,h,f);if(this.submitValue===false){this.el.dom.removeAttribute("name")}var g=this.el.dom.type;if(g){if(g=="password"){g="text"}this.el.addClass("x-form-"+g)}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},setReadOnly:function(b){if(this.rendered){this.el.dom.readOnly=b}this.readOnly=b},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(b){if(b.isSpecialKey()){this.fireEvent("specialkey",this,b)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&(this.validateOnBlur||this.validationEvent=="blur")){this.validate()}var b=this.getValue();if(String(b)!==String(this.startValue)){this.fireEvent("change",this,b,this.startValue)}this.fireEvent("blur",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(e){if(this.disabled){return true}var f=this.preventMark;this.preventMark=e===true;var d=this.validateValue(this.processValue(this.getRawValue()),e);this.preventMark=f;return d},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(b){return b},validateValue:function(c){var d=this.getErrors(c)[0];if(d==undefined){return true}else{this.markInvalid(d);return false}},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(f){if(this.rendered&&!this.preventMark){f=f||this.invalidText;var e=this.getMessageHandler();if(e){e.mark(this,f)}else{if(this.msgTarget){this.el.addClass(this.invalidClass);var d=Ext.getDom(this.msgTarget);if(d){d.innerHTML=f;d.style.display=this.msgDisplay}}}}this.setActiveError(f)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var d=this.getMessageHandler();if(d){d.clear(this)}else{if(this.msgTarget){this.el.removeClass(this.invalidClass);var c=Ext.getDom(this.msgTarget);if(c){c.innerHTML="";c.style.display="none"}}}}this.unsetActiveError()},setActiveError:function(c,d){this.activeError=c;if(d!==true){this.fireEvent("invalid",this,c)}},unsetActiveError:function(b){delete this.activeError;if(b!==true){this.fireEvent("valid",this)}},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,true)||this.el.findParent(".x-form-field-wrap",5,true)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(true)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var b=this.rendered?this.el.getValue():Ext.value(this.value,"");if(b===this.emptyText){b=""}return b},getValue:function(){if(!this.rendered){return this.value}var b=this.el.getValue();if(b===this.emptyText||b===undefined){b=""}return b},setRawValue:function(b){return this.rendered?(this.el.dom.value=(Ext.isEmpty(b)?"":b)):""},setValue:function(b){this.value=b;if(this.rendered){this.el.dom.value=(Ext.isEmpty(b)?"":b);this.validate()}return this},append:function(b){this.setValue([this.getValue(),b].join(""))}});Ext.form.MessageTargets={qtip:{mark:function(d,c){d.el.addClass(d.invalidClass);d.el.dom.qtip=c;d.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(b){b.el.removeClass(b.invalidClass);b.el.dom.qtip=""}},title:{mark:function(d,c){d.el.addClass(d.invalidClass);d.el.dom.title=c},clear:function(b){b.el.dom.title=""}},under:{mark:function(d,f){d.el.addClass(d.invalidClass);if(!d.errorEl){var e=d.getErrorCt();if(!e){d.el.dom.title=f;return}d.errorEl=e.createChild({cls:"x-form-invalid-msg"});d.on("resize",d.alignErrorEl,d);d.on("destroy",function(){Ext.destroy(this.errorEl)},d)}d.alignErrorEl();d.errorEl.update(f);Ext.form.Field.msgFx[d.msgFx].show(d.errorEl,d)},clear:function(b){b.el.removeClass(b.invalidClass);if(b.errorEl){Ext.form.Field.msgFx[b.msgFx].hide(b.errorEl,b)}else{b.el.dom.title=""}}},side:{mark:function(d,f){d.el.addClass(d.invalidClass);if(!d.errorIcon){var e=d.getErrorCt();if(!e){d.el.dom.title=f;return}d.errorIcon=e.createChild({cls:"x-form-invalid-icon"});if(d.ownerCt){d.ownerCt.on("afterlayout",d.alignErrorIcon,d);d.ownerCt.on("expand",d.alignErrorIcon,d)}d.on("resize",d.alignErrorIcon,d);d.on("destroy",function(){Ext.destroy(this.errorIcon)},d)}d.alignErrorIcon();d.errorIcon.dom.qtip=f;d.errorIcon.dom.qclass="x-form-invalid-tip";d.errorIcon.show()},clear:function(b){b.el.removeClass(b.invalidClass);if(b.errorIcon){b.errorIcon.dom.qtip="";b.errorIcon.hide()}else{b.el.dom.title=""}}}};Ext.form.Field.msgFx={normal:{show:function(d,c){d.setDisplayed("block")},hide:function(d,c){d.setDisplayed(false).update("")}},slide:{show:function(d,c){d.slideIn("t",{stopFx:true})},hide:function(d,c){d.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(d,c){d.fixDisplay();d.alignTo(c.el,"tl-tr");d.slideIn("l",{stopFx:true})},hide:function(d,c){d.slideOut("l",{stopFx:true,useDisplay:true})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.mon(this.el,"keyup",this.filterValidation,this)}else{if(this.validationEvent!==false&&this.validationEvent!="blur"){this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.mon(this.el,"mousedown",this.onMouseDown,this);if(this.emptyText){this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))){this.mon(this.el,"keypress",this.filterKeys,this)}if(this.grow){this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50});this.mon(this.el,"click",this.autoSize,this)}if(this.enableKeyEvents){this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})}},onMouseDown:function(b){if(!this.hasFocus){this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:true,preventDefault:true})}},processValue:function(d){if(this.stripCharsRe){var c=d.replace(this.stripCharsRe,"");if(c!==d){this.setRawValue(c);return c}}return d},filterValidation:function(b){if(!b.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable="on"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=""}},onKeyUpBuffered:function(b){if(this.doAutoSize(b)){this.autoSize()}},doAutoSize:function(b){return !b.isNavKeyPress()},onKeyUp:function(b){this.fireEvent("keyup",this,b)},onKeyDown:function(b){this.fireEvent("keydown",this,b)},onKeyPress:function(b){this.fireEvent("keypress",this,b)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var d=this.el,c;if(this.emptyText){if(d.dom.value==this.emptyText){this.setRawValue("");c=true}d.removeClass(this.emptyClass)}if(this.selectOnFocus||c){d.dom.select()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(d){if(d.ctrlKey){return}var e=d.getKey();if(Ext.isGecko&&(d.isNavKeyPress()||e==d.BACKSPACE||(e==d.DELETE&&d.button==-1))){return}var f=String.fromCharCode(d.getCharCode());if(!Ext.isGecko&&d.isSpecialKey()&&!f){return}if(!this.maskRe.test(f)){d.stopEvent()}},setValue:function(b){if(this.emptyText&&this.el&&!Ext.isEmpty(b)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize();return this},getErrors:function(f){var g=Ext.form.TextField.superclass.getErrors.apply(this,arguments);f=Ext.isDefined(f)?f:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var h=this.validator(f);if(h!==true){g.push(h)}}if(f.length<1||f===this.emptyText){if(this.allowBlank){return g}else{g.push(this.blankText)}}if(!this.allowBlank&&(f.length<1||f===this.emptyText)){g.push(this.blankText)}if(f.length<this.minLength){g.push(String.format(this.minLengthText,this.minLength))}if(f.length>this.maxLength){g.push(String.format(this.maxLengthText,this.maxLength))}if(this.vtype){var e=Ext.form.VTypes;if(!e[this.vtype](f,this)){g.push(this.vtypeText||e[this.vtype+"Text"])}}if(this.regex&&!this.regex.test(f)){g.push(this.regexText)}return g},selectText:function(i,h){var l=this.getRawValue();var k=false;if(l.length>0){i=i===undefined?0:i;h=h===undefined?l.length:h;var j=this.el.dom;if(j.setSelectionRange){j.setSelectionRange(i,h)}else{if(j.createTextRange){var d=j.createTextRange();d.moveStart("character",i);d.moveEnd("character",h-l.length);d.select()}}k=Ext.isGecko||Ext.isOpera}else{k=true}if(k){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var h=this.el;var d=h.dom.value;var g=document.createElement("div");g.appendChild(document.createTextNode(d));d=g.innerHTML;Ext.removeNode(g);g=null;d+="&#160;";var f=Math.min(this.growMax,Math.max(this.metrics.getWidth(d)+10,this.growMin));this.el.setWidth(f);this.fireEvent("autosize",this,f)},onDestroy:function(){if(this.validationTask){this.validationTask.cancel();this.validationTask=null}Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,editable:true,readOnly:false,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(e,f){Ext.form.TriggerField.superclass.onResize.call(this,e,f);var d=this.getTriggerWidth();if(Ext.isNumber(e)){this.el.setWidth(e-d)}this.wrap.setWidth(this.el.getWidth()+d)},getTriggerWidth:function(){var b=this.trigger.getWidth();if(!this.hideTrigger&&!this.readOnly&&b===0){b=this.defaultTriggerWidth}return b},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}},onRender:function(c,d){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,c,d);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass});this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return(this.el.getWidth()+this.trigger.getWidth())},updateEditState:function(){if(this.rendered){if(this.readOnly){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this);this.trigger.setDisplayed(false)}else{if(!this.editable){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mon(this.el,"click",this.onTriggerClick,this)}else{this.el.dom.readOnly=false;this.el.removeClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this)}this.trigger.setDisplayed(!this.hideTrigger)}this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(b){if(b!=this.hideTrigger){this.hideTrigger=b;this.updateEditState()}},setEditable:function(b){if(b!=this.editable){this.editable=b;this.updateEditState()}},setReadOnly:function(b){if(b!=this.readOnly){this.readOnly=b;this.updateEditState()}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);if(this.mimicing){this.doc.un("mousedown",this.mimicBlur,this)}delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=true;this.doc.on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.on("specialkey",this.checkTab,this)}}},checkTab:function(d,c){if(c.getKey()==c.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(b){if(!this.isDestroyed&&!this.wrap.contains(b.target)&&this.validateBlur(b)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;this.doc.un("mousedown",this.mimicBlur,this);if(this.monitorTab&&this.el){this.un("specialkey",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass(this.wrapFocusClass)}},beforeBlur:Ext.emptyFn,validateBlur:function(b){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(b){return this.triggers[b]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var f=this.triggers,d=0,e=f.length;for(;d<e;++d){if(this["hideTrigger"+(d+1)]){f[d].hide()}}},initTrigger:function(){var d=this.trigger.select(".x-form-trigger",true),c=this;d.each(function(g,a,h){var b="Trigger"+(h+1);g.hide=function(){var e=c.wrap.getWidth();this.dom.style.display="none";c.el.setWidth(e-c.trigger.getWidth());c["hidden"+b]=true};g.show=function(){var e=c.wrap.getWidth();this.dom.style.display="";c.el.setWidth(e-c.trigger.getWidth());c["hidden"+b]=false};this.mon(g,"click",this["on"+b+"Click"],this,{preventDefault:true});g.addClassOnOver("x-form-trigger-over");g.addClassOnClick("x-form-trigger-click")},this);this.triggers=d.elements},getTriggerWidth:function(){var b=0;Ext.each(this.triggers,function(g,h){var f="Trigger"+(h+1),a=g.getWidth();if(a===0&&!this["hidden"+f]){b+=this.defaultTriggerWidth}else{b+=a}},this);return b},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:"&#160;\n&#160;",enterIsSpecial:false,preventScrollbars:false,onRender:function(c,d){if(!this.el){this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}}Ext.form.TextArea.superclass.onRender.call(this,c,d);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"});if(this.preventScrollbars){this.el.setStyle("overflow","hidden")}this.el.setHeight(this.growMin)}},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(b){if(b.isSpecialKey()&&(this.enterIsSpecial||(b.getKey()!=b.ENTER||b.hasModifier()))){this.fireEvent("specialkey",this,b)}},doAutoSize:function(b){return !b.isNavKeyPress()||b.getKey()==b.ENTER},filterValidation:function(b){if(!b.isNavKeyPress()||(!this.enterIsSpecial&&b.keyCode==b.ENTER)){this.validationTask.delay(this.validationDelay)}},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var h=this.el,f=Ext.util.Format.htmlEncode(h.dom.value),g=this.textSizeEl,e;Ext.fly(g).setWidth(this.el.getWidth());if(f.length<1){f="&#160;&#160;"}else{f+=this.growAppend;if(Ext.isIE){f=f.replace(/\n/g,"&#160;<br />")}}g.innerHTML=f;e=Math.min(this.growMax,Math.max(g.offsetHeight,this.growMin));if(e!=this.lastHeight){this.lastHeight=e;this.el.setHeight(e);this.fireEvent("autosize",this,e)}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:false,initEvents:function(){var b=this.baseChars+"";if(this.allowDecimals){b+=this.decimalSeparator}if(this.allowNegative){b+="-"}b=Ext.escapeRe(b);this.maskRe=new RegExp("["+b+"]");if(this.autoStripChars){this.stripCharsRe=new RegExp("[^"+b+"]","gi")}Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(d){var f=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);d=Ext.isDefined(d)?d:this.processValue(this.getRawValue());if(d.length<1){return f}d=String(d).replace(this.decimalSeparator,".");if(isNaN(d)){f.push(String.format(this.nanText,d))}var e=this.parseValue(d);if(e<this.minValue){f.push(String.format(this.minText,this.minValue))}if(e>this.maxValue){f.push(String.format(this.maxText,this.maxValue))}return f},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(b){b=Ext.isNumber(b)?b:parseFloat(String(b).replace(this.decimalSeparator,"."));b=this.fixPrecision(b);b=isNaN(b)?"":String(b).replace(".",this.decimalSeparator);return Ext.form.NumberField.superclass.setValue.call(this,b)},setMinValue:function(b){this.minValue=Ext.num(b,Number.NEGATIVE_INFINITY)},setMaxValue:function(b){this.maxValue=Ext.num(b,Number.MAX_VALUE)},parseValue:function(b){b=parseFloat(String(b).replace(this.decimalSeparator,"."));return isNaN(b)?"":b},fixPrecision:function(c){var d=isNaN(c);if(!this.allowDecimals||this.decimalPrecision==-1||d||!c){return d?"":c}return parseFloat(parseFloat(c).toFixed(this.decimalPrecision))},beforeBlur:function(){var b=this.parseValue(this.getRawValue());if(!Ext.isEmpty(b)){this.setValue(b)}}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:true,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(d,f){if(Date.formatContainsHourInfo(f)){return Date.parseDate(d,f)}else{var e=Date.parseDate(d+" "+this.initTime,f+" "+this.initTimeFormat);if(e){return e.clearTime()}}},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");if(Ext.isString(this.minValue)){this.minValue=this.parseDate(this.minValue)}if(Ext.isString(this.maxValue)){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{down:function(b){this.onTriggerClick()},scope:this,forceKeyDown:true})},initDisabledDays:function(){if(this.disabledDates){var d=this.disabledDates,e=d.length-1,f="(?:";Ext.each(d,function(a,b){f+=Ext.isDate(a)?"^"+Ext.escapeRe(a.dateFormat(this.format))+"$":d[b];if(b!=e){f+="|"}},this);this.disabledDatesRE=new RegExp(f+")")}},setDisabledDates:function(b){this.disabledDates=b;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(b){this.disabledDays=b;if(this.menu){this.menu.picker.setDisabledDays(b)}},setMinValue:function(b){this.minValue=(Ext.isString(b)?this.parseDate(b):b);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(b){this.maxValue=(Ext.isString(b)?this.parseDate(b):b);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},getErrors:function(l){var j=Ext.form.DateField.superclass.getErrors.apply(this,arguments);l=this.formatDate(l||this.processValue(this.getRawValue()));if(l.length<1){return j}var n=l;l=this.parseDate(l);if(!l){j.push(String.format(this.invalidText,n,this.format));return j}var k=l.getTime();if(this.minValue&&k<this.minValue.clearTime().getTime()){j.push(String.format(this.minText,this.formatDate(this.minValue)))}if(this.maxValue&&k>this.maxValue.clearTime().getTime()){j.push(String.format(this.maxText,this.formatDate(this.maxValue)))}if(this.disabledDays){var i=l.getDay();for(var h=0;h<this.disabledDays.length;h++){if(i===this.disabledDays[h]){j.push(this.disabledDaysText);break}}}var m=this.formatDate(l);if(this.disabledDatesRE&&this.disabledDatesRE.test(m)){j.push(String.format(this.disabledDatesText,m))}return j},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(b){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(b)))},parseDate:function(i){if(!i||Ext.isDate(i)){return i}var g=this.safeParse(i,this.format),l=this.altFormats,j=this.altFormatsArray;if(!g&&l){j=j||l.split("|");for(var k=0,h=j.length;k<h&&!g;k++){g=this.safeParse(i,j[k])}}return g},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(b){return Ext.isDate(b)?b.dateFormat(this.format):b},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu({hideOnClick:false,focusOnSelect:false})}this.onFocus();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,"tl-bl?");this.menuEvents("on")},menuEvents:function(b){this.menu[b]("select",this.onSelect,this);this.menu[b]("hide",this.onMenuHide,this);this.menu[b]("show",this.onFocus,this)},onSelect:function(d,c){this.setValue(c);this.fireEvent("select",this,c);this.menu.hide()},onMenuHide:function(){this.focus(false,60);this.menuEvents("un")},beforeBlur:function(){var b=this.parseDate(this.getRawValue());if(b){this.setValue(b)}}});Ext.reg("datefield",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:false,validateOnBlur:false,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:false,initEvents:Ext.emptyFn,isValid:function(){return true},validate:function(){return true},getRawValue:function(){var b=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");if(b===this.emptyText){b=""}if(this.htmlEncode){b=Ext.util.Format.htmlDecode(b)}return b},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(b){if(this.htmlEncode){b=Ext.util.Format.htmlEncode(b)}return this.rendered?(this.el.dom.innerHTML=(Ext.isEmpty(b)?"":b)):(this.value=b)},setValue:function(b){this.setRawValue(b);return this}});Ext.reg("displayfield",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:true,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,clearFilterOnReset:true,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){var n=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=n.name}if(!this.store){this.mode="local";var j=[],m=n.options;for(var d=0,i=m.length;d<i;d++){var k=m[d],l=(k.hasAttribute?k.hasAttribute("value"):k.getAttributeNode("value").specified)?k.value:k.text;if(k.selected&&Ext.isEmpty(this.value,true)){this.value=l}j.push([l,k.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:j,autoDestroy:true});this.valueField="value";this.displayField="text"}n.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(n,this.autoCreate||this.defaultAutoCreate);this.render(this.el.parentNode,n)}Ext.removeNode(n)}else{if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField="field1";if(!this.store.expandData){this.displayField="field2"}this.mode="local"}}}this.selectedIndex=-1;if(this.mode=="local"){if(!Ext.isDefined(this.initialConfig.queryDelay)){this.queryDelay=10}if(!Ext.isDefined(this.initialConfig.minChars)){this.minChars=0}}},onRender:function(c,d){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.form.ComboBox.superclass.onRender.call(this,c,d);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:(this.hiddenId||Ext.id())},"before",true)}if(Ext.isGecko){this.el.dom.setAttribute("autocomplete","off")}if(!this.lazyInit){this.initList()}else{this.on("focus",this.initList,this,{single:true})}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,"")}},getParentZIndex:function(){var b;if(this.ownerCt){this.findParentBy(function(a){b=parseInt(a.getPositionEl().getStyle("z-index"),10);return !!b})}return b},getZIndex:function(c){c=c||Ext.getDom(this.getListParent()||Ext.getBody());var d=parseInt(Ext.fly(c).getStyle("z-index"),10);if(!d){d=this.getParentZIndex()}return(d||12000)+5},initList:function(){if(!this.list){var e="x-combo-list",f=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:f,shadow:this.shadow,cls:[e,this.listClass].join(" "),constrain:false,zindex:this.getZIndex(f)});var d=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(d,0);this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle("font-size",this.el.getStyle("font-size"))}if(this.title){this.header=this.list.createChild({cls:e+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:e+"-inner"});this.mon(this.innerList,"mouseover",this.onViewOver,this);this.mon(this.innerList,"mousemove",this.onViewMove,this);this.innerList.setWidth(d-this.list.getFrameWidth("lr"));if(this.pageSize){this.footer=this.list.createChild({cls:e+"-ft"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for="."><div class="'+e+'-item">{'+this.displayField+"}</div></tpl>"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+e+"-item",emptyText:this.listEmptyText,deferEmptyText:false});this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.mon(this.resizer,"resize",function(a,c,b){this.maxHeight=b-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=c;this.innerList.setWidth(c-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(d,c){if(this.store&&!c){if(this.store!==d&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.collapse,this)}if(!d){this.store=null;if(this.view){this.view.bindStore(null)}if(this.pageTb){this.pageTb.bindStore(null)}}}if(d){if(!c){this.lastQuery=null;if(this.pageTb){this.pageTb.bindStore(d)}}this.store=Ext.StoreMgr.lookup(d);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});if(this.view){this.view.bindStore(d)}}},reset:function(){if(this.clearFilterOnReset&&this.mode=="local"){this.store.clearFilter()}Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(b){this.inKeyMode=true;this.selectPrev()},down:function(b){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(b){this.onViewClick()},esc:function(b){this.collapse()},tab:function(b){if(this.forceSelection===true){this.collapse()}else{this.onViewClick(false)}return true},scope:this,doRelay:function(h,e,f){if(f=="down"||this.scope.isExpanded()){var g=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if(!Ext.isIE&&Ext.EventManager.useKeydown){this.scope.fireKey(h)}return g}return true},forceKeyDown:true,defaultEventAction:"stopEvent"});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(!this.enableKeyEvents){this.mon(this.el,"keyup",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,"hiddenField");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(b){if(!this.isExpanded()){Ext.form.ComboBox.superclass.fireKey.call(this,b)}},onResize:function(d,c){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(!isNaN(d)&&this.isVisible()&&this.list){this.doResize(d)}else{this.bufferSize=d}},doResize:function(d){if(!Ext.isDefined(this.listWidth)){var c=Math.max(d,this.minListWidth);this.list.setWidth(c);this.innerList.setWidth(c-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(this.autoSelect!==false&&!this.selectByValue(this.value,true)){this.select(0,true)}}else{if(this.autoSelect!==false){this.selectNext()}if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.collapse()}},onTypeAhead:function(){if(this.store.getCount()>0){var e=this.store.getAt(0);var h=e.data[this.displayField];var f=h.length;var g=this.getRawValue().length;if(g!=f){this.setRawValue(h);this.selectText(g,h.length)}}},assertValue:function(){var c=this.getRawValue(),d;if(this.valueField&&Ext.isDefined(this.value)){d=this.findRecord(this.valueField,this.value)}if(!d||d.get(this.displayField)!=c){d=this.findRecord(this.displayField,c)}if(!d&&this.forceSelection){if(c.length>0&&c!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,"");this.applyEmptyText()}else{this.clearValue()}}else{if(d&&this.valueField){if(this.value==c){return}c=d.get(this.valueField||this.displayField)}this.setValue(c)}},onSelect:function(d,c){if(this.fireEvent("beforeselect",this,d,c)!==false){this.setValue(d.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,d,c)}},getName:function(){var b=this.hiddenField;return b&&b.name?b.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:""}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(e){var f=e;if(this.valueField){var d=this.findRecord(this.valueField,e);if(d){f=d.data[this.displayField]}else{if(Ext.isDefined(this.valueNotFoundText)){f=this.valueNotFoundText}}}this.lastSelectionText=f;if(this.hiddenField){this.hiddenField.value=Ext.value(e,"")}Ext.form.ComboBox.superclass.setValue.call(this,f);this.value=e;return this},findRecord:function(f,d){var e;if(this.store.getCount()>0){this.store.each(function(a){if(a.data[f]==d){e=a;return false}})}return e},onViewMove:function(c,d){this.inKeyMode=false},onViewOver:function(g,e){if(this.inKeyMode){return}var h=this.view.findItemFromChild(e);if(h){var f=this.view.indexOf(h);this.select(f,false)}},onViewClick:function(e){var f=this.view.getSelectedIndexes()[0],h=this.store,g=h.getAt(f);if(g){this.onSelect(g,f)}else{this.collapse()}if(e!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height="";var g=this.innerList.dom,j=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,l=Math.max(g.clientHeight,g.offsetHeight,g.scrollHeight),h=this.getPosition()[1]-Ext.getBody().getScroll().top,i=Ext.lib.Dom.getViewHeight()-h-this.getSize().height,k=Math.max(h,i,this.minHeight||0)-this.list.shadowOffset-j-5;l=Math.min(l,k,this.maxHeight);this.innerList.setHeight(l);this.list.beginUpdate();this.list.setHeight(l+j);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(e,f){if(!Ext.isEmpty(e,true)){var d=this.findRecord(this.valueField||this.displayField,e);if(d){this.select(this.store.indexOf(d),f);return true}}return false},select:function(e,f){this.selectedIndex=e;this.view.select(e);if(f!==false){var d=this.view.getNode(e);if(d){this.innerList.scrollChildIntoView(d,false)}}},selectNext:function(){var b=this.store.getCount();if(b>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<b-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var b=this.store.getCount();if(b>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!==0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(c){var d=c.getKey();if(this.editable!==false&&this.readOnly!==true&&(d==c.BACKSPACE||!c.isSpecialKey())){this.lastKey=d;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,c)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},doQuery:function(f,d){f=Ext.isEmpty(f)?"":f;var e={query:f,forceAll:d,combo:this,cancel:false};if(this.fireEvent("beforequery",e)===false||e.cancel){return false}f=e.query;d=e.forceAll;if(d===true||(f.length>=this.minChars)){if(this.lastQuery!==f){this.lastQuery=f;if(this.mode=="local"){this.selectedIndex=-1;if(d){this.store.clearFilter()}else{this.store.filter(this.displayField,f)}this.onLoad()}else{this.store.baseParams[this.queryParam]=f;this.store.load({params:this.getParams(f)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(e){var d={},f=this.store.paramNames;if(this.pageSize){d[f.start]=0;d[f.limit]=this.pageSize}return d},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(b){if(!this.isDestroyed&&!b.within(this.wrap)&&!b.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.title||this.pageSize){this.assetHeight=0;if(this.title){this.assetHeight+=this.header.getHeight()}if(this.pageSize){this.assetHeight+=this.footer.getHeight()}}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();if(Ext.isGecko2){this.innerList.setOverflow("auto")}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent("expand",this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:false,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,"c-c")}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(c,d){Ext.form.Checkbox.superclass.onRender.call(this,c,d);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:"x-form-check-wrap"});if(this.boxLabel){this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIE&&!Ext.isStrict){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked)}},setValue:function(e){var f=this.checked,d=this.inputValue;if(e===false){this.checked=false}else{this.checked=(e===true||e==="true"||e=="1"||(d?e==d:String(e).toLowerCase()=="on"))}if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(f!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}return this}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");this.on("change",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(w,y){if(!this.el){var r={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:w,bufferResize:false};var D={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:true,anchor:"100%"}};if(this.items[0].items){Ext.apply(r,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var z=0,u=this.items.length;z<u;z++){Ext.applyIf(this.items[z],D)}}else{var A,t=[];if(typeof this.columns=="string"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var v=[];for(var z=0;z<this.columns;z++){v.push((100/this.columns)*0.01)}this.columns=v}A=this.columns.length;for(var z=0;z<A;z++){var C=Ext.apply({items:[]},D);C[this.columns[z]<=1?"columnWidth":"width"]=this.columns[z];if(this.defaults){C.defaults=Ext.apply(C.defaults||{},this.defaults)}t.push(C)}if(this.vertical){var i=Math.ceil(this.items.length/A),s=0;for(var z=0,u=this.items.length;z<u;z++){if(z>0&&z%i==0){s++}if(this.items[z].fieldLabel){this.items[z].hideLabel=false}t[s].items.push(this.items[z])}}else{for(var z=0,u=this.items.length;z<u;z++){var l=z%A;if(this.items[z].fieldLabel){this.items[z].hideLabel=false}t[l].items.push(this.items[z])}}Ext.apply(r,{layoutConfig:{columns:A},items:t})}this.panel=new Ext.Container(r);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var B=this.el.up(this.itemCls).child("label",true);if(B){B.setAttribute("htmlFor",this.forId)}}var x=this.panel.findBy(function(a){return a.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(x)}Ext.form.CheckboxGroup.superclass.onRender.call(this,w,y)},initValue:function(){if(this.value){this.setValue.apply(this,this.buffered?this.value:[this.value]);delete this.buffered;delete this.value}},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(b){b.on("check",this.fireChecked,this);b.inGroup=true})},doLayout:function(){if(this.rendered){this.panel.forceLayout=this.ownerCt.forceLayout;this.panel.doLayout()}},fireChecked:function(){var b=[];this.eachItem(function(a){if(a.checked){b.push(a)}});this.fireEvent("change",this,b)},getErrors:function(){var c=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var d=true;this.eachItem(function(a){if(a.checked){return(d=false)}});if(d){c.push(this.blankText)}}return c},isDirty:function(){if(this.disabled||!this.rendered){return false}var b=false;this.eachItem(function(a){if(a.isDirty()){b=true;return false}});return b},setReadOnly:function(b){if(this.rendered){this.eachItem(function(a){a.setReadOnly(b)})}this.readOnly=b},onDisable:function(){this.eachItem(function(b){b.disable()})},onEnable:function(){this.eachItem(function(b){b.enable()})},onResize:function(d,c){this.panel.setSize(d,c);this.panel.doLayout()},reset:function(){if(this.originalValue){this.eachItem(function(b){if(b.setValue){b.setValue(false);b.originalValue=b.getValue()}});this.resetOriginal=true;this.setValue(this.originalValue);delete this.resetOriginal}else{this.eachItem(function(b){if(b.reset){b.reset()}})}(function(){this.clearInvalid()}).defer(50,this)},setValue:function(){if(this.rendered){this.onSetValue.apply(this,arguments)}else{this.buffered=true;this.value=arguments}return this},onSetValue:function(g,h){if(arguments.length==1){if(Ext.isArray(g)){Ext.each(g,function(a,c){if(Ext.isObject(a)&&a.setValue){a.setValue(true);if(this.resetOriginal===true){a.originalValue=a.getValue()}}else{var b=this.items.itemAt(c);if(b){b.setValue(a)}}},this)}else{if(Ext.isObject(g)){for(var f in g){var e=this.getBox(f);if(e){e.setValue(g[f])}}}else{this.setValueForItem(g)}}}else{var e=this.getBox(g);if(e){e.setValue(h)}}},beforeDestroy:function(){Ext.destroy(this.panel);if(!this.rendered){Ext.destroy(this.items)}Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(b){b=String(b).split(",");this.eachItem(function(a){if(b.indexOf(a.inputValue)>-1){a.setValue(true)}})},getBox:function(c){var d=null;this.eachItem(function(a){if(c==a||a.dataIndex==c||a.id==c||a.getName()==c){d=a;return false}});return d},getValue:function(){var b=[];this.eachItem(function(a){if(a.checked){b.push(a)}});return b},eachItem:function(c,d){if(this.items&&this.items.each){this.items.each(c,d||this)}},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:true,isComposite:true,combineErrors:true,labelConnector:", ",initComponent:function(){var i=[],g=this.items,j;for(var k=0,l=g.length;k<l;k++){j=g[k];if(!Ext.isEmpty(j.ref)){j.ref="../"+j.ref}i.push(j.fieldLabel);Ext.applyIf(j,this.defaults);if(!(k==l-1&&this.skipLastItemMargin)){Ext.applyIf(j,{margins:this.defaultMargins})}}this.fieldLabel=this.fieldLabel||this.buildLabel(i);this.fieldErrors=new Ext.util.MixedCollection(true,function(a){return a.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this});this.innerCt.ownerCt=undefined;var h=this.innerCt.findBy(function(a){return a.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(h)},onRender:function(h,f){if(!this.el){var g=this.innerCt;g.render(h);this.el=g.getEl();if(this.combineErrors){this.eachItem(function(a){Ext.apply(a,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[a],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[a],0)})})}var e=this.el.parent().parent().child("label",true);if(e){e.setAttribute("for",this.items.items[0].id)}}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(g,h){var e=g.getName(),f={field:e,errorName:g.fieldLabel||e,error:h};this.fieldErrors.replace(e,f);if(!g.preventMark){g.el.addClass(g.invalidClass)}},onFieldClearInvalid:function(b){this.fieldErrors.removeKey(b.getName());b.el.removeClass(b.invalidClass)},updateInvalidMark:function(){var d=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0){this.clearInvalid();if(d){this.clearInvalid.defer(50,this)}}else{var c=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors();this.markInvalid(c);if(d){this.markInvalid(c)}}},validateValue:function(f,e){var d=true;this.eachItem(function(a){if(!a.isValid(e)){d=false}});return d},buildCombinedErrorMessage:function(h){var i=[],f;for(var j=0,g=h.length;j<g;j++){f=h[j];i.push(String.format("{0}: {1}",f.errorName,f.error))}return i.join("<br />")},sortErrors:function(){var b=this.items;this.fieldErrors.sort("ASC",function(h,j){var k=function(c){return function(d){return d.getName()==c}};var a=b.findIndexBy(k(h.field)),i=b.findIndexBy(k(j.field));return a<i?-1:1})},reset:function(){this.eachItem(function(b){b.reset()});(function(){this.clearInvalid()}).defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(b){b.clearInvalid()})},buildLabel:function(b){return Ext.clean(b).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered){return false}var b=false;this.eachItem(function(a){if(a.isDirty()){b=true;return false}});return b},eachItem:function(c,d){if(this.items&&this.items.each){this.items.each(c,d||this)}},onResize:function(h,j,g,i){var f=this.innerCt;if(this.rendered&&f.rendered){f.setSize(h,j)}Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(f,d){if(this.rendered){var e=this.innerCt;e.forceLayout=this.ownerCt.forceLayout;e.doLayout(f,d)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(b){if(b==undefined){b=true}b=!!b;if(this.rendered){this.eachItem(function(a){a.setReadOnly(b)})}this.readOnly=b},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(b){b.disable()})},onEnable:function(){this.eachItem(function(b){b.enable()})}});Ext.reg("compositefield",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var d=this.el.up("form")||Ext.getBody();var c=d.child('input[name="'+this.el.dom.name+'"]:checked',true);return c?c.value:null},setValue:function(e){var f,g,h;if(typeof e=="boolean"){Ext.form.Radio.superclass.setValue.call(this,e)}else{if(this.rendered){f=this.getCheckEl();h=f.child('input[name="'+this.el.dom.name+'"][value="'+e+'"]',true);if(h){Ext.getCmp(h.id).setValue(true)}}}if(this.rendered&&this.checked){f=f||this.getCheckEl();g=this.getCheckEl().select('input[name="'+this.el.dom.name+'"]');g.each(function(a){if(a.dom.id!=this.id){Ext.getCmp(a.dom.id).setValue(false)}},this)}return this},getCheckEl:function(){if(this.inGroup){return this.el.up(".x-form-radio-group")}return this.el.up("form")||Ext.getBody()}});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var b=null;this.eachItem(function(a){if(a.checked){b=a;return false}});return b},onSetValue:function(f,d){if(arguments.length>1){var e=this.getBox(f);if(e){e.setValue(d);if(e.checked){this.eachItem(function(a){if(a!==e){a.setValue(false)}})}}}else{this.setValueForItem(f)}},setValueForItem:function(b){b=String(b).split(",")[0];this.eachItem(function(a){a.setValue(b==a.inputValue)})},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var b=null;this.eachItem(function(a){if(a.checked){b=a;return false}});this.fireEvent("change",this,b)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:false,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(c,d){Ext.apply(this,d);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}this.items=new Ext.util.MixedCollection(false,function(a){return a.getItemId()});this.addEvents("beforeaction","actionfailed","actioncomplete");if(c){this.initEl(c)}Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:false,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:false,initEl:function(b){this.el=Ext.get(b);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on("submit",this.onSubmit,this)}this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(b){b.stopEvent()},destroy:function(b){if(b!==true){this.items.each(function(a){Ext.destroy(a)});Ext.destroy(this.el)}this.items.clear();this.purgeListeners()},isValid:function(){var b=true;this.items.each(function(a){if(!a.validate()){b=false}});return b},isDirty:function(){var b=false;this.items.each(function(a){if(a.isDirty()){b=true;return false}});return b},doAction:function(c,d){if(Ext.isString(c)){c=new Ext.form.Action.ACTION_TYPES[c](this,d)}if(this.fireEvent("beforeaction",this,c)!==false){this.beforeAction(c);c.run.defer(100,c)}return this},submit:function(e){e=e||{};if(this.standardSubmit){var f=e.clientValidation===false||this.isValid();if(f){var h=this.el.dom;if(this.url&&Ext.isEmpty(h.action)){h.action=this.url}h.submit()}return f}var g=String.format("{0}submit",this.api?"direct":"");this.doAction(g,e);return this},load:function(d){var c=String.format("{0}load",this.api?"direct":"");this.doAction(c,d);return this},updateRecord:function(e){e.beginEdit();var f=e.fields,g,h;f.each(function(a){g=this.findField(a.name);if(g){h=g.getValue();if(Ext.type(h)!==false&&h.getGroupValue){h=h.getGroupValue()}else{if(g.eachItem){h=[];g.eachItem(function(b){h.push(b.getValue())})}}e.set(a.name,h)}},this);e.endEdit();return this},loadRecord:function(b){this.setValues(b.data);return this},beforeAction:function(d){this.items.each(function(a){if(a.isFormField&&a.syncValue){a.syncValue()}});var c=d.options;if(c.waitMsg){if(this.waitMsgTarget===true){this.el.mask(c.waitMsg,"x-mask-loading")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(c.waitMsg,"x-mask-loading")}else{Ext.MessageBox.wait(c.waitMsg,c.waitTitle||this.waitTitle)}}}},afterAction:function(e,f){this.activeAction=null;var d=e.options;if(d.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(f){if(d.reset){this.reset()}Ext.callback(d.success,d.scope,[this,e]);this.fireEvent("actioncomplete",this,e)}else{Ext.callback(d.failure,d.scope,[this,e]);this.fireEvent("actionfailed",this,e)}},findField:function(f){var d=this.items.get(f);if(!Ext.isObject(d)){var e=function(a){if(a.isFormField){if(a.dataIndex==f||a.id==f||a.getName()==f){d=a;return false}else{if(a.isComposite){return a.items.each(e)}else{if(a instanceof Ext.form.CheckboxGroup&&a.rendered){return a.eachItem(e)}}}}};this.items.each(e)}return d||null},markInvalid:function(j){if(Ext.isArray(j)){for(var n=0,i=j.length;n<i;n++){var f=j[n];var m=this.findField(f.id);if(m){m.markInvalid(f.msg)}}}else{var l,k;for(k in j){if(!Ext.isFunction(j[k])&&(l=this.findField(k))){l.markInvalid(j[k])}}}return this},setValues:function(n){if(Ext.isArray(n)){for(var m=0,i=n.length;m<i;m++){var f=n[m];var l=this.findField(f.id);if(l){l.setValue(f.value);if(this.trackResetOnLoad){l.originalValue=l.getValue()}}}}else{var k,j;for(j in n){if(!Ext.isFunction(n[j])&&(k=this.findField(j))){k.setValue(n[j]);if(this.trackResetOnLoad){k.originalValue=k.getValue()}}}}return this},getValues:function(c){var d=Ext.lib.Ajax.serializeForm(this.el.dom);if(c===true){return d}return Ext.urlDecode(d)},getFieldValues:function(g){var i={},h,f,j;this.items.each(function(a){if(!a.disabled&&(g!==true||a.isDirty())){h=a.getName();f=i[h];j=a.getValue();if(Ext.isDefined(f)){if(Ext.isArray(f)){i[h].push(j)}else{i[h]=[f,j]}}else{i[h]=j}}});return i},clearInvalid:function(){this.items.each(function(b){b.clearInvalid()});return this},reset:function(){this.items.each(function(b){b.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(b){this.items.remove(b);return this},cleanDestroyed:function(){this.items.filterBy(function(b){return !!b.isDestroyed}).each(this.remove,this)},render:function(){this.items.each(function(b){if(b.isFormField&&!b.rendered&&document.getElementById(b.id)){b.applyToMarkup(b.id)}});return this},applyToFields:function(b){this.items.each(function(a){Ext.apply(a,b)});return this},applyIfToFields:function(b){this.items.each(function(a){Ext.applyIf(a,b)});return this},callFieldMethod:function(c,d){d=d||[];this.items.each(function(a){if(Ext.isFunction(a[c])){a[c].apply(a,d)}});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:false,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype="multipart/form-data"}this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var b=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,b)},initFields:function(){var f=this.form;var e=this;var d=function(a){if(e.isField(a)){f.add(a)}else{if(a.findBy&&a!=e){e.applySettings(a);if(a.items&&a.items.each){a.items.each(d,this)}}}};this.items.each(d,this)},applySettings:function(c){var d=c.ownerCt;Ext.applyIf(c,{labelAlign:d.labelAlign,labelWidth:d.labelWidth,itemCls:d.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(c,d){this.initFields();Ext.FormPanel.superclass.onRender.call(this,c,d);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(true);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(b){return !!b.setValue&&!!b.getValue&&!!b.markInvalid&&!!b.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});if(this.monitorValid){this.startMonitoring()}},onAdd:function(b){Ext.FormPanel.superclass.onAdd.call(this,b);this.processAdd(b)},onAddEvent:function(d,c){if(d!==this){this.processAdd(c)}},processAdd:function(b){if(this.isField(b)){this.form.add(b)}else{if(b.findBy){this.applySettings(b);this.form.add.apply(this.form,b.findBy(this.isField))}}},onRemove:function(b){Ext.FormPanel.superclass.onRemove.call(this,b);this.processRemove(b)},onRemoveEvent:function(d,c){if(d!==this){this.processRemove(c)}},processRemove:function(b){if(!this.destroying){if(this.isField(b)){this.form.remove(b)}else{if(b.findBy){Ext.each(b.findBy(this.isField),this.form.remove,this.form);this.form.cleanDestroyed()}}}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var h=true;this.form.items.each(function(a){if(!a.isValid(true)){h=false;return false}});if(this.fbar){var f=this.fbar.items.items;for(var i=0,g=f.length;i<g;i++){var j=f[i];if(j.formBind===true&&j.disabled===h){j.setDisabled(!h)}}}this.fireEvent("clientvalidation",this,h)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:false,onRender:function(d,e){if(!this.el){this.el=document.createElement("fieldset");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header"}}Ext.form.FieldSet.superclass.onRender.call(this,d,e);if(this.checkboxToggle){var f=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(f);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(d,c){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,d,c)},onExpand:function(d,c){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,d,c)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var k=[],g=this.fontFamilies,l,i;for(var j=0,h=g.length;j<h;j++){l=g[j];i=l.toLowerCase();k.push('<option value="',i,'" style="font-family:',l,';"',(this.defaultFont==i?' selected="true">':">"),l,"</option>")}return k.join("")},createToolbar:function(j){var l=[];var h=Ext.QuickTips&&Ext.QuickTips.isEnabled();function k(a,c,b){return{itemId:a,cls:"x-btn-icon",iconCls:"x-edit-"+a,enableToggle:c!==false,scope:j,handler:b||j.relayBtnCmd,clickEvent:"mousedown",tooltip:h?j.buttonTips[a]||undefined:undefined,overflowText:j.buttonTips[a].title||undefined,tabIndex:-1}}if(this.enableFont&&!Ext.isSafari2){var i=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}});l.push(i,"-")}if(this.enableFormat){l.push(k("bold"),k("italic"),k("underline"))}if(this.enableFontSize){l.push("-",k("increasefontsize",false,this.adjustFont),k("decreasefontsize",false,this.adjustFont))}if(this.enableColors){l.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:h?j.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,listeners:{scope:this,select:function(a,b){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+b:b);this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:h?j.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,listeners:{scope:this,select:function(a,b){if(Ext.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",b);this.execCmd("useCSS",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+b:b);this.deferFocus()}}},clickEvent:"mousedown"})})}if(this.enableAlignments){l.push("-",k("justifyleft"),k("justifycenter"),k("justifyright"))}if(!Ext.isSafari2){if(this.enableLinks){l.push("-",k("createlink",false,this.createLink))}if(this.enableLists){l.push("-",k("insertorderedlist"),k("insertunorderedlist"))}if(this.enableSourceEdit){l.push("-",k("sourceedit",true,function(a){this.toggleSourceEdit(!this.sourceEditMode)}))}}var g=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:l});if(i){this.fontSelect=i.el;this.mon(this.fontSelect,"change",function(){var a=this.fontSelect.dom.value;this.relayCmd("fontname",a);this.deferFocus()},this)}this.mon(g.el,"click",function(a){a.preventDefault()});this.tb=g;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(c){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,c);if(this.initialized){if(Ext.isIE){this.getEditorBody().contentEditable=!c}else{this.setDesignMode(!c)}var d=this.getEditorBody();if(d){d.style.cursor=this.readOnly?"default":"text"}this.disableItems(c)}},getDocMarkup:function(){var b=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,b)},getEditorBody:function(){var b=this.getDoc();return b.body||b.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(d,e){Ext.form.HtmlEditor.superclass.onRender.call(this,d,e);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.disableItems(true);this.tb.doLayout();this.createIFrame();if(!this.width){var f=this.el.getSize();this.setSize(f.width,this.height||f.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var b=document.createElement("iframe");b.name=Ext.id();b.frameBorder="0";b.style.overflow="auto";b.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(b);this.iframe=b;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var c=this.getDoc();this.win=this.getWin();c.open();c.write(this.getDocMarkup());c.close();var d={run:function(){var a=this.getDoc();if(a.body||a.readyState=="complete"){Ext.TaskMgr.stop(d);this.setDesignMode(true);this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(d)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var b=this.getDoc();if(!b){return}if(!b.editorInitialized||this.getDesignMode()!="on"){this.initFrame()}}},setDesignMode:function(c){var d=this.getDoc();if(d){if(this.readOnly){c=false}d.designMode=(/on|true/i).test(String(c).toLowerCase())?"on":"off"}},getDesignMode:function(){var b=this.getDoc();if(!b){return""}return String(b.designMode).toLowerCase()},disableItems:function(b){if(this.fontSelect){this.fontSelect.dom.disabled=b}this.tb.items.each(function(a){if(a.getItemId()!="sourceedit"){a.setDisabled(b)}})},onResize:function(f,j){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(f)){var h=f-this.wrap.getFrameWidth("lr");this.el.setWidth(h);this.tb.setWidth(h);this.iframe.style.width=Math.max(h,0)+"px"}if(Ext.isNumber(j)){var g=j-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(g);this.iframe.style.height=Math.max(g,0)+"px";var i=this.getEditorBody();if(i){i.style.height=Math.max((g-(this.iframePad*2)),0)+"px"}}}},toggleSourceEdit:function(e){var g,f;if(e===undefined){e=!this.sourceEditMode}this.sourceEditMode=e===true;var h=this.tb.getComponent("sourceedit");if(h.pressed!==this.sourceEditMode){h.toggle(this.sourceEditMode);if(!h.xtbHidden){return}}if(this.sourceEditMode){this.previousSize=this.getSize();g=Ext.get(this.iframe).getHeight();this.disableItems(true);this.syncValue();this.iframe.className="x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus();this.el.dom.style.height=g+"px"}else{f=parseInt(this.el.dom.style.height,10);if(this.initialized){this.disableItems(this.readOnly)}this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus();this.setSize(this.previousSize);delete this.previousSize;this.iframe.style.height=f+"px"}this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var b=prompt(this.createLinkText,this.defaultLinkValue);if(b&&b!="http://"){this.relayCmd("createlink",b)}},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(b){Ext.form.HtmlEditor.superclass.setValue.call(this,b);this.pushValue();return this},cleanHtml:function(b){b=String(b);if(Ext.isWebKit){b=b.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(b.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")){b=b.substring(1)}return b},syncValue:function(){if(this.initialized){var g=this.getEditorBody();var h=g.innerHTML;if(Ext.isWebKit){var e=g.getAttribute("style");var f=e.match(/text-align:(.*?);/i);if(f&&f[1]){h='<div style="'+f[0]+'">'+h+"</div>"}}h=this.cleanHtml(h);if(this.fireEvent("beforesync",this,h)!==false){this.el.dom.value=h;this.fireEvent("sync",this,h)}}},getValue:function(){this[this.sourceEditMode?"pushValue":"syncValue"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var b=this.el.dom.value;if(!this.activated&&b.length<1){b=this.defaultValue}if(this.fireEvent("beforepush",this,b)!==false){this.getEditorBody().innerHTML=b;if(Ext.isGecko){this.setDesignMode(false);this.setDesignMode(true)}this.fireEvent("push",this,b)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var j=this.getEditorBody(),g=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),h,e;g["background-attachment"]="fixed";j.bgProperties="fixed";Ext.DomHelper.applyStyles(j,g);h=this.getDoc();if(h){try{Ext.EventManager.removeAll(h)}catch(i){}}e=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(h,{mousedown:e,dblclick:e,click:e,keyup:e,buffer:100});if(Ext.isGecko){Ext.EventManager.on(h,"keypress",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(h,"keydown",this.fixKeys,this)}h.editorInitialized=true;this.initialized=true;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent("initialize",this)}catch(i){}},beforeDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);var d=this.getDoc();if(d){try{Ext.EventManager.removeAll(d);for(var f in d){delete d[f]}}catch(e){}}if(this.wrap){this.wrap.dom.innerHTML="";this.wrap.remove()}}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=true;this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var e=this.win.getSelection();if(!e.focusNode||e.focusNode.nodeType!=3){var d=e.getRangeAt(0);d.selectNodeContents(this.getEditorBody());d.collapse(true);this.deferFocus()}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false)}catch(f){}}this.fireEvent("activate",this)},adjustFont:function(e){var g=e.getItemId()=="increasefontsize"?1:-1,h=this.getDoc(),f=parseInt(h.queryCommandValue("FontSize")||2,10);if((Ext.isSafari&&!Ext.isSafari2)||Ext.isChrome||Ext.isAir){if(f<=10){f=1+g}else{if(f<=13){f=2+g}else{if(f<=16){f=3+g}else{if(f<=18){f=4+g}else{if(f<=24){f=5+g}else{f=6+g}}}}}f=f.constrain(1,6)}else{if(Ext.isSafari){g*=2}f=Math.max(1,f+g)+(Ext.isSafari?"px":0)}this.execCmd("FontSize",f)},onEditorEvent:function(b){this.updateToolbar()},updateToolbar:function(){if(this.readOnly){return}if(!this.activated){this.onFirstFocus();return}var d=this.tb.items.map,f=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var e=(f.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(e!=this.fontSelect.dom.value){this.fontSelect.dom.value=e}}if(this.enableFormat){d.bold.toggle(f.queryCommandState("bold"));d.italic.toggle(f.queryCommandState("italic"));d.underline.toggle(f.queryCommandState("underline"))}if(this.enableAlignments){d.justifyleft.toggle(f.queryCommandState("justifyleft"));d.justifycenter.toggle(f.queryCommandState("justifycenter"));d.justifyright.toggle(f.queryCommandState("justifyright"))}if(!Ext.isSafari2&&this.enableLists){d.insertorderedlist.toggle(f.queryCommandState("insertorderedlist"));d.insertunorderedlist.toggle(f.queryCommandState("insertunorderedlist"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(b){this.relayCmd(b.getItemId())},relayCmd:function(c,d){(function(){this.focus();this.execCmd(c,d);this.updateToolbar()}).defer(10,this)},execCmd:function(d,e){var f=this.getDoc();f.execCommand(d,false,e===undefined?null:e);this.syncValue()},applyCommand:function(c){if(c.ctrlKey){var f=c.getCharCode(),e;if(f>0){f=String.fromCharCode(f);switch(f){case"b":e="bold";break;case"i":e="italic";break;case"u":e="underline";break}if(e){this.win.focus();this.execCmd(e);this.deferFocus();c.preventDefault()}}}},insertAtCursor:function(f){if(!this.activated){return}if(Ext.isIE){this.win.focus();var d=this.getDoc(),e=d.selection.createRange();if(e){e.pasteHTML(f);this.syncValue();this.deferFocus()}}else{this.win.focus();this.execCmd("InsertHTML",f);this.deferFocus()}},fixKeys:function(){if(Ext.isIE){return function(h){var g=h.getKey(),i=this.getDoc(),e;if(g==h.TAB){h.stopEvent();e=i.selection.createRange();if(e){e.collapse(true);e.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}else{if(g==h.ENTER){e=i.selection.createRange();if(e){var j=e.parentElement();if(!j||j.tagName.toLowerCase()!="li"){h.stopEvent();e.pasteHTML("<br />");e.collapse(false);e.select()}}}}}}else{if(Ext.isOpera){return function(c){var d=c.getKey();if(d==c.TAB){c.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}}else{if(Ext.isWebKit){return function(c){var d=c.getKey();if(d==c.TAB){c.stopEvent();this.execCmd("InsertText","\t");this.deferFocus()}else{if(d==c.ENTER){c.stopEvent();this.execCmd("InsertHtml","<br /><br />");this.deferFocus()}}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:false,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){if(Ext.isDefined(this.minValue)){this.setMinValue(this.minValue,true)}if(Ext.isDefined(this.maxValue)){this.setMaxValue(this.maxValue,true)}if(!this.store){this.generateStore(true)}Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(c,d){this.setLimit(c,true,d);return this},setMaxValue:function(c,d){this.setLimit(c,false,d);return this},generateStore:function(e){var h=this.minValue||new Date(this.initDate).clearTime(),f=this.maxValue||new Date(this.initDate).clearTime().add("mi",(24*60)-1),g=[];while(h<=f){g.push(h.dateFormat(this.format));h=h.add("mi",this.increment)}this.bindStore(g,e)},setLimit:function(d,h,g){var i;if(Ext.isString(d)){i=this.parseDate(d)}else{if(Ext.isDate(d)){i=d}}if(i){var j=new Date(this.initDate).clearTime();j.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds());this[h?"minValue":"maxValue"]=j;if(!g){this.generateStore()}}},getValue:function(){var b=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(b))||""},setValue:function(b){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(b)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(l){if(!l||Ext.isDate(l)){return l}var k=this.initDate+" ",m=this.initDateFormat+" ",i=Date.parseDate(k+l,m+this.format),p=this.altFormats;if(!i&&p){if(!this.altFormatsArray){this.altFormatsArray=p.split("|")}for(var n=0,o=this.altFormatsArray,j=o.length;n<j&&!i;n++){i=Date.parseDate(k+l,m+o[n])}}return i}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:true,tipText:null,actionMode:"wrap",initComponent:function(){var c=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);if(this.useTips){var d=this.tipText?{getText:this.tipText}:{};c.plugins=[new Ext.slider.Tip(d)]}this.slider=new Ext.Slider(c);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(c,d){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"};Ext.form.SliderField.superclass.onRender.call(this,c,d);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(e,h,g,f){Ext.form.SliderField.superclass.onResize.call(this,e,h,g,f);this.slider.setSize(e,h)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on("change",this.onChange,this)},onChange:function(c,d){this.setValue(d,undefined,true)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(b){this.slider.setMinValue(b);return this},setMaxValue:function(b){this.slider.setMaxValue(b);return this},setValue:function(f,d,e){if(!e){this.slider.setValue(f,d)}return Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg("sliderfield",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(c,d){if(!this.el){this.el=document.createElement("label");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||"");if(this.forId){this.el.setAttribute("for",this.forId)}}Ext.form.Label.superclass.onRender.call(this,c,d)},setText:function(e,d){var f=d===false;this[!f?"text":"html"]=e;delete this[f?"text":"html"];if(this.rendered){this.el.dom.innerHTML=d!==false?Ext.util.Format.htmlEncode(e):e}return this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(c,d){this.form=c;this.options=d||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(b){},success:function(b){},handleResponse:function(b){},failure:function(b){this.response=b;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(b){this.response=b;if(!b.responseText&&!b.responseXML){return true}this.result=this.handleResponse(b);return this.result},decodeResponse:function(d){try{return Ext.decode(d.responseText)}catch(c){return false}},getUrl:function(f){var e=this.options.url||this.form.url||this.form.el.dom.action;if(f){var d=this.getParams();if(d){e=Ext.urlAppend(e,d)}}return e},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var d=this.form.baseParams;var c=this.options.params;if(c){if(typeof c=="object"){c=Ext.urlEncode(Ext.applyIf(c,d))}else{if(typeof c=="string"&&d){c+="&"+Ext.urlEncode(d)}}}else{if(d){c=Ext.urlEncode(d)}}return c},createCallback:function(b){var b=b||{};return{success:this.success,failure:this.failure,scope:this,timeout:(b.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(c,d){Ext.form.Action.Submit.superclass.constructor.call(this,c,d)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var j=this.options,i=this.getMethod(),k=i=="GET";if(j.clientValidation===false||this.form.isValid()){if(j.submitEmptyText===false){var h=this.form.items,l=[],g=function(a){if(a.el.getValue()==a.emptyText){l.push(a);a.el.dom.value=""}if(a.isComposite&&a.rendered){a.items.each(g)}};h.each(g)}Ext.Ajax.request(Ext.apply(this.createCallback(j),{form:this.form.el.dom,url:this.getUrl(k),method:i,headers:j.headers,params:!k?this.getParams():null,isUpload:this.form.fileUpload}));if(j.submitEmptyText===false){Ext.each(l,function(a){if(a.applyEmptyText){a.applyEmptyText()}})}}else{if(j.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(c){var d=this.processResponse(c);if(d===true||d.success){this.form.afterAction(this,true);return}if(d.errors){this.form.markInvalid(d.errors)}this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,false)},handleResponse:function(l){if(this.form.errorReader){var g=this.form.errorReader.read(l);var i=[];if(g.records){for(var k=0,h=g.records.length;k<h;k++){var j=g.records[k];i[k]=j.data}}if(i.length<1){i=null}return{success:g.success,errors:i}}return this.decodeResponse(l)}});Ext.form.Action.Load=function(c,d){Ext.form.Action.Load.superclass.constructor.call(this,c,d);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(c){var d=this.processResponse(c);if(d===true||!d.success||!d.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(d.data);this.form.afterAction(this,true)},handleResponse:function(d){if(this.form.reader){var e=this.form.reader.read(d);var f=e.records&&e.records[0]?e.records[0].data:null;return{success:e.success,data:f}}return this.decodeResponse(d)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(c,d){Ext.form.Action.DirectLoad.superclass.constructor.call(this,c,d)},type:"directload",run:function(){var b=this.getParams();b.push(this.success,this);this.form.api.load.apply(window,b)},getParams:function(){var n=[],j={};var l=this.form.baseParams;var k=this.options.params;Ext.apply(j,k,l);var h=this.form.paramOrder;if(h){for(var m=0,i=h.length;m<i;m++){n.push(j[h[m]])}}else{if(this.form.paramsAsHash){n.push(j)}}return n},processResponse:function(b){this.result=b;return b},success:function(d,c){if(c.type==Ext.Direct.exceptions.SERVER){d={}}Ext.form.Action.DirectLoad.superclass.success.call(this,d)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(c,d){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,c,d)},type:"directsubmit",run:function(){var b=this.options;if(b.clientValidation===false||this.form.isValid()){this.success.params=this.getParams();this.form.api.submit(this.form.el.dom,this.success,this)}else{if(b.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},getParams:function(){var f={};var e=this.form.baseParams;var d=this.options.params;Ext.apply(f,d,e);return f},processResponse:function(b){this.result=b;return b},success:function(d,c){if(c.type==Ext.Direct.exceptions.SERVER){d={}}Ext.form.Action.DirectSubmit.superclass.success.call(this,d)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var h=/^[a-zA-Z_]+$/,g=/^[a-zA-Z0-9_]+$/,e=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,f=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(a){return e.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-\+\'@]/i,url:function(a){return f.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(a){return h.test(a)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return g.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();
/*!
 * Ext JS Library 3.4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.ns("Ext.ux.form");Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:false,buttonOffset:3,readOnly:true,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(c,a){Ext.ux.form.FileUploadField.superclass.onRender.call(this,c,a);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();var b=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(b,{renderTo:this.wrap,cls:"x-form-file-btn"+(b.iconCls?" x-btn-icon":"")}));if(this.buttonOnly){this.el.hide();this.wrap.setWidth(this.button.getEl().getWidth())}this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over","x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",type:"file",size:1})},reset:function(){if(this.rendered){this.fileInput.remove();this.createFileInput();this.bindListeners()}Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){Ext.ux.form.FileUploadField.superclass.onResize.call(this,a,b);this.wrap.setWidth(a);if(!this.buttonOnly){var a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset;this.el.setWidth(a)}},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);this.doDisable(true)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(false)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);Ext.form.FileUploadField=Ext.ux.form.FileUploadField;